var _N=Object.defineProperty;var wN=(t,e,n)=>e in t?_N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>wN(t,typeof e!="symbol"?e+"":e,n);function EN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gk={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),bN=Symbol.for("react.portal"),TN=Symbol.for("react.fragment"),kN=Symbol.for("react.strict_mode"),SN=Symbol.for("react.profiler"),IN=Symbol.for("react.provider"),CN=Symbol.for("react.context"),AN=Symbol.for("react.forward_ref"),PN=Symbol.for("react.suspense"),RN=Symbol.for("react.memo"),NN=Symbol.for("react.lazy"),j1=Symbol.iterator;function MN(t){return t===null||typeof t!="object"?null:(t=j1&&t[j1]||t["@@iterator"],typeof t=="function"?t:null)}var yk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vk=Object.assign,_k={};function Sa(t,e,n){this.props=t,this.context=e,this.refs=_k,this.updater=n||yk}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wk(){}wk.prototype=Sa.prototype;function r0(t,e,n){this.props=t,this.context=e,this.refs=_k,this.updater=n||yk}var i0=r0.prototype=new wk;i0.constructor=r0;vk(i0,Sa.prototype);i0.isPureReactComponent=!0;var z1=Array.isArray,Ek=Object.prototype.hasOwnProperty,s0={current:null},xk={key:!0,ref:!0,__self:!0,__source:!0};function bk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ek.call(e,r)&&!xk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jc,type:t,key:s,ref:o,props:i,_owner:s0.current}}function DN(t,e){return{$$typeof:Jc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function o0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jc}function ON(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $1=/\/+/g;function Rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ON(""+t.key):e.toString(36)}function Th(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jc:case bN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Rm(o,0):r,z1(i)?(n="",t!=null&&(n=t.replace($1,"$&/")+"/"),Th(i,e,n,"",function(c){return c})):i!=null&&(o0(i)&&(i=DN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",z1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Rm(s,a);o+=Th(s,e,n,l,i)}else if(l=MN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Rm(s,a++),o+=Th(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mu(t,e,n){if(t==null)return t;var r=[],i=0;return Th(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},kh={transition:null},VN={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:kh,ReactCurrentOwner:s0};we.Children={map:Mu,forEach:function(t,e,n){Mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mu(t,function(){e++}),e},toArray:function(t){return Mu(t,function(e){return e})||[]},only:function(t){if(!o0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Sa;we.Fragment=TN;we.Profiler=SN;we.PureComponent=r0;we.StrictMode=kN;we.Suspense=PN;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VN;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=s0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ek.call(e,l)&&!xk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jc,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:CN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IN,_context:t},t.Consumer=t};we.createElement=bk;we.createFactory=function(t){var e=bk.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:AN,render:t}};we.isValidElement=o0;we.lazy=function(t){return{$$typeof:NN,_payload:{_status:-1,_result:t},_init:LN}};we.memo=function(t,e){return{$$typeof:RN,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=kh.transition;kh.transition={};try{t()}finally{kh.transition=e}};we.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};we.useCallback=function(t,e){return Qt.current.useCallback(t,e)};we.useContext=function(t){return Qt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Qt.current.useEffect(t,e)};we.useId=function(){return Qt.current.useId()};we.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Qt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};we.useRef=function(t){return Qt.current.useRef(t)};we.useState=function(t){return Qt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Qt.current.useTransition()};we.version="18.2.0";gk.exports=we;var C=gk.exports;const m=xN(C),FN=EN({__proto__:null,default:m},[C]);var Gp={},Tk={exports:{}},_n={},kk={exports:{}},Sk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var G=V.length;V.push(W);e:for(;0<G;){var te=G-1>>>1,H=V[te];if(0<i(H,W))V[te]=W,V[G]=H,G=te;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],G=V.pop();if(G!==W){V[0]=G;e:for(var te=0,H=V.length,se=H>>>1;te<se;){var de=2*(te+1)-1,Te=V[de],fe=de+1,nt=V[fe];if(0>i(Te,G))fe<H&&0>i(nt,Te)?(V[te]=nt,V[fe]=G,te=fe):(V[te]=Te,V[de]=G,te=de);else if(fe<H&&0>i(nt,G))V[te]=nt,V[fe]=G,te=fe;else break e}}return W}function i(V,W){var G=V.sortIndex-W.sortIndex;return G!==0?G:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function I(V){if(v=!1,T(V),!y)if(n(l)!==null)y=!0,ce(R);else{var W=n(c);W!==null&&j(I,W.startTime-V)}}function R(V,W){y=!1,v&&(v=!1,_(b),b=-1),p=!0;var G=f;try{for(T(W),d=n(l);d!==null&&(!(d.expirationTime>W)||V&&!N());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var H=te(d.expirationTime<=W);W=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&r(l),T(W)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var de=n(c);de!==null&&j(I,de.startTime-W),se=!1}return se}finally{d=null,f=G,p=!1}}var O=!1,k=null,b=-1,S=5,P=-1;function N(){return!(t.unstable_now()-P<S)}function D(){if(k!==null){var V=t.unstable_now();P=V;var W=!0;try{W=k(!0,V)}finally{W?M():(O=!1,k=null)}}else O=!1}var M;if(typeof w=="function")M=function(){w(D)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ee=ie.port2;ie.port1.onmessage=D,M=function(){ee.postMessage(null)}}else M=function(){x(D,0)};function ce(V){k=V,O||(O=!0,M())}function j(V,W){b=x(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,ce(R))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var G=f;f=W;try{return V()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=f;f=V;try{return W()}finally{f=G}},t.unstable_scheduleCallback=function(V,W,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,V){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=G+H,V={id:u++,callback:W,priorityLevel:V,startTime:G,expirationTime:H,sortIndex:-1},G>te?(V.sortIndex=G,e(c,V),n(l)===null&&V===n(c)&&(v?(_(b),b=-1):v=!0,j(I,G-te))):(V.sortIndex=H,e(l,V),y||p||(y=!0,ce(R))),V},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(V){var W=f;return function(){var G=f;f=W;try{return V.apply(this,arguments)}finally{f=G}}}})(Sk);kk.exports=Sk;var BN=kk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik=C,vn=BN;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ck=new Set,hc={};function co(t,e){oa(t,e),oa(t+"Capture",e)}function oa(t,e){for(hc[t]=e,t=0;t<e.length;t++)Ck.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yp=Object.prototype.hasOwnProperty,UN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H1={},W1={};function jN(t){return Yp.call(W1,t)?!0:Yp.call(H1,t)?!1:UN.test(t)?W1[t]=!0:(H1[t]=!0,!1)}function zN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $N(t,e,n,r){if(e===null||typeof e>"u"||zN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var a0=/[\-:]([a-z])/g;function l0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(a0,l0);Rt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(a0,l0);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(a0,l0);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function c0(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($N(e,n,i,r)&&(n=null),r||i===null?jN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xr=Ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),Co=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),u0=Symbol.for("react.strict_mode"),Qp=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),h0=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Jp=Symbol.for("react.suspense_list"),d0=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),Rk=Symbol.for("react.offscreen"),K1=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=K1&&t[K1]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Nm;function bl(t){if(Nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nm=e&&e[1]||""}return`
`+Nm+t}var Mm=!1;function Dm(t,e){if(!t||Mm)return"";Mm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bl(t):""}function HN(t){switch(t.tag){case 5:return bl(t.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return t=Dm(t.type,!1),t;case 11:return t=Dm(t.type.render,!1),t;case 1:return t=Dm(t.type,!0),t;default:return""}}function Zp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case Co:return"Portal";case Qp:return"Profiler";case u0:return"StrictMode";case Xp:return"Suspense";case Jp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pk:return(t.displayName||"Context")+".Consumer";case Ak:return(t._context.displayName||"Context")+".Provider";case h0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d0:return e=t.displayName||null,e!==null?e:Zp(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return Zp(t(e))}catch{}}return null}function WN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zp(e);case 8:return e===u0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KN(t){var e=Nk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=KN(t))}function Mk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eg(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dk(t,e){e=e.checked,e!=null&&c0(t,"checked",e,!1)}function tg(t,e){Dk(t,e);var n=qi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ng(t,e.type,n):e.hasOwnProperty("defaultValue")&&ng(t,e.type,qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function G1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ng(t,e,n){(e!=="number"||od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tl=Array.isArray;function Ko(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Tl(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qi(n)}}function Ok(t,e){var n=qi(e.value),r=qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Q1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lu,Vk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lu=Lu||document.createElement("div"),Lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qN=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(t){qN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ul[e]=Ul[t]})});function Fk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ul.hasOwnProperty(t)&&Ul[t]?(""+e).trim():e+"px"}function Bk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GN=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sg(t,e){if(e){if(GN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function og(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ag=null;function f0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lg=null,qo=null,Go=null;function X1(t){if(t=tu(t)){if(typeof lg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=wf(e),lg(t.stateNode,t.type,e))}}function Uk(t){qo?Go?Go.push(t):Go=[t]:qo=t}function jk(){if(qo){var t=qo,e=Go;if(Go=qo=null,X1(t),e)for(t=0;t<e.length;t++)X1(e[t])}}function zk(t,e){return t(e)}function $k(){}var Om=!1;function Hk(t,e,n){if(Om)return t(e,n);Om=!0;try{return zk(t,e,n)}finally{Om=!1,(qo!==null||Go!==null)&&($k(),jk())}}function fc(t,e){var n=t.stateNode;if(n===null)return null;var r=wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var cg=!1;if(Ur)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){cg=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{cg=!1}function YN(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var jl=!1,ad=null,ld=!1,ug=null,QN={onError:function(t){jl=!0,ad=t}};function XN(t,e,n,r,i,s,o,a,l){jl=!1,ad=null,YN.apply(QN,arguments)}function JN(t,e,n,r,i,s,o,a,l){if(XN.apply(this,arguments),jl){if(jl){var c=ad;jl=!1,ad=null}else throw Error(K(198));ld||(ld=!0,ug=c)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function J1(t){if(uo(t)!==t)throw Error(K(188))}function ZN(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return J1(i),t;if(s===r)return J1(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Kk(t){return t=ZN(t),t!==null?qk(t):null}function qk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qk(t);if(e!==null)return e;t=t.sibling}return null}var Gk=vn.unstable_scheduleCallback,Z1=vn.unstable_cancelCallback,e5=vn.unstable_shouldYield,t5=vn.unstable_requestPaint,Ze=vn.unstable_now,n5=vn.unstable_getCurrentPriorityLevel,m0=vn.unstable_ImmediatePriority,Yk=vn.unstable_UserBlockingPriority,cd=vn.unstable_NormalPriority,r5=vn.unstable_LowPriority,Qk=vn.unstable_IdlePriority,gf=null,hr=null;function i5(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:a5,s5=Math.log,o5=Math.LN2;function a5(t){return t>>>=0,t===0?32:31-(s5(t)/o5|0)|0}var Vu=64,Fu=4194304;function kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=kl(a):(s&=o,s!==0&&(r=kl(s)))}else o=n&~i,o!==0?r=kl(o):s!==0&&(r=kl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function l5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=l5(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function hg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xk(){var t=Vu;return Vu<<=1,!(Vu&4194240)&&(Vu=64),t}function Lm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function u5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function p0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function Jk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zk,g0,eS,tS,nS,dg=!1,Bu=[],Ri=null,Ni=null,Mi=null,mc=new Map,pc=new Map,yi=[],h5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function hl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tu(e),e!==null&&g0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function d5(t,e,n,r,i){switch(e){case"focusin":return Ri=hl(Ri,t,e,n,r,i),!0;case"dragenter":return Ni=hl(Ni,t,e,n,r,i),!0;case"mouseover":return Mi=hl(Mi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mc.set(s,hl(mc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pc.set(s,hl(pc.get(s)||null,t,e,n,r,i)),!0}return!1}function rS(t){var e=Ds(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=Wk(n),e!==null){t.blockedOn=e,nS(t.priority,function(){eS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ag=r,n.target.dispatchEvent(r),ag=null}else return e=tu(n),e!==null&&g0(e),t.blockedOn=n,!1;e.shift()}return!0}function tw(t,e,n){Sh(t)&&n.delete(e)}function f5(){dg=!1,Ri!==null&&Sh(Ri)&&(Ri=null),Ni!==null&&Sh(Ni)&&(Ni=null),Mi!==null&&Sh(Mi)&&(Mi=null),mc.forEach(tw),pc.forEach(tw)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,dg||(dg=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,f5)))}function gc(t){function e(i){return dl(i,t)}if(0<Bu.length){dl(Bu[0],t);for(var n=1;n<Bu.length;n++){var r=Bu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ri!==null&&dl(Ri,t),Ni!==null&&dl(Ni,t),Mi!==null&&dl(Mi,t),mc.forEach(e),pc.forEach(e),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)rS(n),n.blockedOn===null&&yi.shift()}var Yo=Xr.ReactCurrentBatchConfig,hd=!0;function m5(t,e,n,r){var i=Ce,s=Yo.transition;Yo.transition=null;try{Ce=1,y0(t,e,n,r)}finally{Ce=i,Yo.transition=s}}function p5(t,e,n,r){var i=Ce,s=Yo.transition;Yo.transition=null;try{Ce=4,y0(t,e,n,r)}finally{Ce=i,Yo.transition=s}}function y0(t,e,n,r){if(hd){var i=fg(t,e,n,r);if(i===null)Km(t,e,r,dd,n),ew(t,r);else if(d5(i,t,e,n,r))r.stopPropagation();else if(ew(t,r),e&4&&-1<h5.indexOf(t)){for(;i!==null;){var s=tu(i);if(s!==null&&Zk(s),s=fg(t,e,n,r),s===null&&Km(t,e,r,dd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Km(t,e,r,null,n)}}var dd=null;function fg(t,e,n,r){if(dd=null,t=f0(r),t=Ds(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dd=t,null}function iS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n5()){case m0:return 1;case Yk:return 4;case cd:case r5:return 16;case Qk:return 536870912;default:return 16}default:return 16}}var bi=null,v0=null,Ih=null;function sS(){if(Ih)return Ih;var t,e=v0,n=e.length,r,i="value"in bi?bi.value:bi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ih=i.slice(t,1<r?1-r:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uu(){return!0}function nw(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uu:nw,this.isPropagationStopped=nw,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_0=wn(Ia),eu=He({},Ia,{view:0,detail:0}),g5=wn(eu),Vm,Fm,fl,yf=He({},eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(Vm=t.screenX-fl.screenX,Fm=t.screenY-fl.screenY):Fm=Vm=0,fl=t),Vm)},movementY:function(t){return"movementY"in t?t.movementY:Fm}}),rw=wn(yf),y5=He({},yf,{dataTransfer:0}),v5=wn(y5),_5=He({},eu,{relatedTarget:0}),Bm=wn(_5),w5=He({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),E5=wn(w5),x5=He({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b5=wn(x5),T5=He({},Ia,{data:0}),iw=wn(T5),k5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I5[t])?!!e[t]:!1}function w0(){return C5}var A5=He({},eu,{key:function(t){if(t.key){var e=k5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w0,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P5=wn(A5),R5=He({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sw=wn(R5),N5=He({},eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w0}),M5=wn(N5),D5=He({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),O5=wn(D5),L5=He({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V5=wn(L5),F5=[9,13,27,32],E0=Ur&&"CompositionEvent"in window,zl=null;Ur&&"documentMode"in document&&(zl=document.documentMode);var B5=Ur&&"TextEvent"in window&&!zl,oS=Ur&&(!E0||zl&&8<zl&&11>=zl),ow=" ",aw=!1;function aS(t,e){switch(t){case"keyup":return F5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function U5(t,e){switch(t){case"compositionend":return lS(e);case"keypress":return e.which!==32?null:(aw=!0,ow);case"textInput":return t=e.data,t===ow&&aw?null:t;default:return null}}function j5(t,e){if(Po)return t==="compositionend"||!E0&&aS(t,e)?(t=sS(),Ih=v0=bi=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oS&&e.locale!=="ko"?null:e.data;default:return null}}var z5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z5[t.type]:e==="textarea"}function cS(t,e,n,r){Uk(r),e=fd(e,"onChange"),0<e.length&&(n=new _0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $l=null,yc=null;function $5(t){wS(t,0)}function vf(t){var e=Mo(t);if(Mk(e))return t}function H5(t,e){if(t==="change")return e}var uS=!1;if(Ur){var Um;if(Ur){var jm="oninput"in document;if(!jm){var cw=document.createElement("div");cw.setAttribute("oninput","return;"),jm=typeof cw.oninput=="function"}Um=jm}else Um=!1;uS=Um&&(!document.documentMode||9<document.documentMode)}function uw(){$l&&($l.detachEvent("onpropertychange",hS),yc=$l=null)}function hS(t){if(t.propertyName==="value"&&vf(yc)){var e=[];cS(e,yc,t,f0(t)),Hk($5,e)}}function W5(t,e,n){t==="focusin"?(uw(),$l=e,yc=n,$l.attachEvent("onpropertychange",hS)):t==="focusout"&&uw()}function K5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(yc)}function q5(t,e){if(t==="click")return vf(e)}function G5(t,e){if(t==="input"||t==="change")return vf(e)}function Y5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:Y5;function vc(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yp.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dw(t,e){var n=hw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function dS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fS(){for(var t=window,e=od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=od(t.document)}return e}function x0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q5(t){var e=fS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dS(n.ownerDocument.documentElement,n)){if(r!==null&&x0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=dw(n,s);var o=dw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X5=Ur&&"documentMode"in document&&11>=document.documentMode,Ro=null,mg=null,Hl=null,pg=!1;function fw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pg||Ro==null||Ro!==od(r)||(r=Ro,"selectionStart"in r&&x0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hl&&vc(Hl,r)||(Hl=r,r=fd(mg,"onSelect"),0<r.length&&(e=new _0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ro)))}function ju(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var No={animationend:ju("Animation","AnimationEnd"),animationiteration:ju("Animation","AnimationIteration"),animationstart:ju("Animation","AnimationStart"),transitionend:ju("Transition","TransitionEnd")},zm={},mS={};Ur&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function _f(t){if(zm[t])return zm[t];if(!No[t])return t;var e=No[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mS)return zm[t]=e[n];return t}var pS=_f("animationend"),gS=_f("animationiteration"),yS=_f("animationstart"),vS=_f("transitionend"),_S=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){_S.set(t,e),co(e,[t])}for(var $m=0;$m<mw.length;$m++){var Hm=mw[$m],J5=Hm.toLowerCase(),Z5=Hm[0].toUpperCase()+Hm.slice(1);ss(J5,"on"+Z5)}ss(pS,"onAnimationEnd");ss(gS,"onAnimationIteration");ss(yS,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(vS,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function pw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JN(r,e,void 0,t),t.currentTarget=null}function wS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;pw(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;pw(i,a,c),s=l}}}if(ld)throw t=ug,ld=!1,ug=null,t}function Oe(t,e){var n=e[wg];n===void 0&&(n=e[wg]=new Set);var r=t+"__bubble";n.has(r)||(ES(e,t,2,!1),n.add(r))}function Wm(t,e,n){var r=0;e&&(r|=4),ES(n,t,r,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function _c(t){if(!t[zu]){t[zu]=!0,Ck.forEach(function(n){n!=="selectionchange"&&(eM.has(n)||Wm(n,!1,t),Wm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zu]||(e[zu]=!0,Wm("selectionchange",!1,e))}}function ES(t,e,n,r){switch(iS(e)){case 1:var i=m5;break;case 4:i=p5;break;default:i=y0}n=i.bind(null,e,n,t),i=void 0,!cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Km(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ds(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Hk(function(){var c=s,u=f0(n),d=[];e:{var f=_S.get(t);if(f!==void 0){var p=_0,y=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":p=P5;break;case"focusin":y="focus",p=Bm;break;case"focusout":y="blur",p=Bm;break;case"beforeblur":case"afterblur":p=Bm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=v5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=M5;break;case pS:case gS:case yS:p=E5;break;case vS:p=O5;break;case"scroll":p=g5;break;case"wheel":p=V5;break;case"copy":case"cut":case"paste":p=b5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sw}var v=(e&4)!==0,x=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var w=c,T;w!==null;){T=w;var I=T.stateNode;if(T.tag===5&&I!==null&&(T=I,_!==null&&(I=fc(w,_),I!=null&&v.push(wc(w,I,T)))),x)break;w=w.return}0<v.length&&(f=new p(f,y,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==ag&&(y=n.relatedTarget||n.fromElement)&&(Ds(y)||y[jr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Ds(y):null,y!==null&&(x=uo(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=rw,I="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=sw,I="onPointerLeave",_="onPointerEnter",w="pointer"),x=p==null?f:Mo(p),T=y==null?f:Mo(y),f=new v(I,w+"leave",p,n,u),f.target=x,f.relatedTarget=T,I=null,Ds(u)===c&&(v=new v(_,w+"enter",y,n,u),v.target=T,v.relatedTarget=x,I=v),x=I,p&&y)t:{for(v=p,_=y,w=0,T=v;T;T=wo(T))w++;for(T=0,I=_;I;I=wo(I))T++;for(;0<w-T;)v=wo(v),w--;for(;0<T-w;)_=wo(_),T--;for(;w--;){if(v===_||_!==null&&v===_.alternate)break t;v=wo(v),_=wo(_)}v=null}else v=null;p!==null&&gw(d,f,p,v,!1),y!==null&&x!==null&&gw(d,x,y,v,!0)}}e:{if(f=c?Mo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var R=H5;else if(lw(f))if(uS)R=G5;else{R=K5;var O=W5}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=q5);if(R&&(R=R(t,c))){cS(d,R,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&ng(f,"number",f.value)}switch(O=c?Mo(c):window,t){case"focusin":(lw(O)||O.contentEditable==="true")&&(Ro=O,mg=c,Hl=null);break;case"focusout":Hl=mg=Ro=null;break;case"mousedown":pg=!0;break;case"contextmenu":case"mouseup":case"dragend":pg=!1,fw(d,n,u);break;case"selectionchange":if(X5)break;case"keydown":case"keyup":fw(d,n,u)}var k;if(E0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Po?aS(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(oS&&n.locale!=="ko"&&(Po||b!=="onCompositionStart"?b==="onCompositionEnd"&&Po&&(k=sS()):(bi=u,v0="value"in bi?bi.value:bi.textContent,Po=!0)),O=fd(c,b),0<O.length&&(b=new iw(b,t,null,n,u),d.push({event:b,listeners:O}),k?b.data=k:(k=lS(n),k!==null&&(b.data=k)))),(k=B5?U5(t,n):j5(t,n))&&(c=fd(c,"onBeforeInput"),0<c.length&&(u=new iw("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}wS(d,e)})}function wc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fc(t,n),s!=null&&r.unshift(wc(t,s,i)),s=fc(t,e),s!=null&&r.push(wc(t,s,i))),t=t.return}return r}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=fc(n,s),l!=null&&o.unshift(wc(n,l,a))):i||(l=fc(n,s),l!=null&&o.push(wc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tM=/\r\n?/g,nM=/\u0000|\uFFFD/g;function yw(t){return(typeof t=="string"?t:""+t).replace(tM,`
`).replace(nM,"")}function $u(t,e,n){if(e=yw(e),yw(t)!==e&&n)throw Error(K(425))}function md(){}var gg=null,yg=null;function vg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _g=typeof setTimeout=="function"?setTimeout:void 0,rM=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,iM=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(t){return vw.resolve(null).then(t).catch(sM)}:_g;function sM(t){setTimeout(function(){throw t})}function qm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),gc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gc(e)}function Di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _w(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),ur="__reactFiber$"+Ca,Ec="__reactProps$"+Ca,jr="__reactContainer$"+Ca,wg="__reactEvents$"+Ca,oM="__reactListeners$"+Ca,aM="__reactHandles$"+Ca;function Ds(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_w(t);t!==null;){if(n=t[ur])return n;t=_w(t)}return e}t=n,n=t.parentNode}return null}function tu(t){return t=t[ur]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function wf(t){return t[Ec]||null}var Eg=[],Do=-1;function os(t){return{current:t}}function Fe(t){0>Do||(t.current=Eg[Do],Eg[Do]=null,Do--)}function Ne(t,e){Do++,Eg[Do]=t.current,t.current=e}var Gi={},$t=os(Gi),on=os(!1),Xs=Gi;function aa(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function pd(){Fe(on),Fe($t)}function ww(t,e,n){if($t.current!==Gi)throw Error(K(168));Ne($t,e),Ne(on,n)}function xS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,WN(t)||"Unknown",i));return He({},n,r)}function gd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Xs=$t.current,Ne($t,t),Ne(on,on.current),!0}function Ew(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=xS(t,e,Xs),r.__reactInternalMemoizedMergedChildContext=t,Fe(on),Fe($t),Ne($t,t)):Fe(on),Ne(on,n)}var Ar=null,Ef=!1,Gm=!1;function bS(t){Ar===null?Ar=[t]:Ar.push(t)}function lM(t){Ef=!0,bS(t)}function as(){if(!Gm&&Ar!==null){Gm=!0;var t=0,e=Ce;try{var n=Ar;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,Ef=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),Gk(m0,as),i}finally{Ce=e,Gm=!1}}return null}var Oo=[],Lo=0,yd=null,vd=0,Tn=[],kn=0,Js=null,Nr=1,Mr="";function Cs(t,e){Oo[Lo++]=vd,Oo[Lo++]=yd,yd=t,vd=e}function TS(t,e,n){Tn[kn++]=Nr,Tn[kn++]=Mr,Tn[kn++]=Js,Js=t;var r=Nr;t=Mr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var s=32-Gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Nr=1<<32-Gn(e)+i|n<<i|r,Mr=s+t}else Nr=1<<s|n<<i|r,Mr=t}function b0(t){t.return!==null&&(Cs(t,1),TS(t,1,0))}function T0(t){for(;t===yd;)yd=Oo[--Lo],Oo[Lo]=null,vd=Oo[--Lo],Oo[Lo]=null;for(;t===Js;)Js=Tn[--kn],Tn[kn]=null,Mr=Tn[--kn],Tn[kn]=null,Nr=Tn[--kn],Tn[kn]=null}var yn=null,mn=null,Be=!1,Wn=null;function kS(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,mn=Di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Js!==null?{id:Nr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,mn=null,!0):!1;default:return!1}}function xg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bg(t){if(Be){var e=mn;if(e){var n=e;if(!xw(t,e)){if(xg(t))throw Error(K(418));e=Di(n.nextSibling);var r=yn;e&&xw(t,e)?kS(r,n):(t.flags=t.flags&-4097|2,Be=!1,yn=t)}}else{if(xg(t))throw Error(K(418));t.flags=t.flags&-4097|2,Be=!1,yn=t}}}function bw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Hu(t){if(t!==yn)return!1;if(!Be)return bw(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vg(t.type,t.memoizedProps)),e&&(e=mn)){if(xg(t))throw SS(),Error(K(418));for(;e;)kS(t,e),e=Di(e.nextSibling)}if(bw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=yn?Di(t.stateNode.nextSibling):null;return!0}function SS(){for(var t=mn;t;)t=Di(t.nextSibling)}function la(){mn=yn=null,Be=!1}function k0(t){Wn===null?Wn=[t]:Wn.push(t)}var cM=Xr.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var _d=os(null),wd=null,Vo=null,S0=null;function I0(){S0=Vo=wd=null}function C0(t){var e=_d.current;Fe(_d),t._currentValue=e}function Tg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qo(t,e){wd=t,S0=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(S0!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(wd===null)throw Error(K(308));Vo=t,wd.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var Os=null;function A0(t){Os===null?Os=[t]:Os.push(t)}function IS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,A0(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function P0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,A0(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function Ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p0(t,n)}}function Tw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ed(t,e,n,r){var i=t.updateQueue;pi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=He({},d,f);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);eo|=o,t.lanes=o,t.memoizedState=d}}function kw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var AS=new Ik.Component().refs;function kg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xf={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Vi(t),s=Vr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(Yn(e,t,i,r),Ah(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Vi(t),s=Vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(Yn(e,t,i,r),Ah(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=Vi(t),i=Vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Oi(t,i,r),e!==null&&(Yn(e,t,r,n),Ah(e,t,r))}};function Sw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vc(n,r)||!vc(i,s):!0}function PS(t,e,n){var r=!1,i=Gi,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=an(e)?Xs:$t.current,r=e.contextTypes,s=(r=r!=null)?aa(t,i):Gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Iw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xf.enqueueReplaceState(e,e.state,null)}function Sg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=AS,P0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=an(e)?Xs:$t.current,i.context=aa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xf.enqueueReplaceState(i,i.state,null),Ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===AS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cw(t){var e=t._init;return e(t._payload)}function RS(t){function e(_,w){if(t){var T=_.deletions;T===null?(_.deletions=[w],_.flags|=16):T.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Fi(_,w),_.index=0,_.sibling=null,_}function s(_,w,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<w?(_.flags|=2,w):T):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,T,I){return w===null||w.tag!==6?(w=tp(T,_.mode,I),w.return=_,w):(w=i(w,T),w.return=_,w)}function l(_,w,T,I){var R=T.type;return R===Ao?u(_,w,T.props.children,I,T.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===mi&&Cw(R)===w.type)?(I=i(w,T.props),I.ref=ml(_,w,T),I.return=_,I):(I=Oh(T.type,T.key,T.props,null,_.mode,I),I.ref=ml(_,w,T),I.return=_,I)}function c(_,w,T,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=np(T,_.mode,I),w.return=_,w):(w=i(w,T.children||[]),w.return=_,w)}function u(_,w,T,I,R){return w===null||w.tag!==7?(w=$s(T,_.mode,I,R),w.return=_,w):(w=i(w,T),w.return=_,w)}function d(_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tp(""+w,_.mode,T),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Du:return T=Oh(w.type,w.key,w.props,null,_.mode,T),T.ref=ml(_,null,w),T.return=_,T;case Co:return w=np(w,_.mode,T),w.return=_,w;case mi:var I=w._init;return d(_,I(w._payload),T)}if(Tl(w)||cl(w))return w=$s(w,_.mode,T,null),w.return=_,w;Wu(_,w)}return null}function f(_,w,T,I){var R=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return R!==null?null:a(_,w,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Du:return T.key===R?l(_,w,T,I):null;case Co:return T.key===R?c(_,w,T,I):null;case mi:return R=T._init,f(_,w,R(T._payload),I)}if(Tl(T)||cl(T))return R!==null?null:u(_,w,T,I,null);Wu(_,T)}return null}function p(_,w,T,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(T)||null,a(w,_,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Du:return _=_.get(I.key===null?T:I.key)||null,l(w,_,I,R);case Co:return _=_.get(I.key===null?T:I.key)||null,c(w,_,I,R);case mi:var O=I._init;return p(_,w,T,O(I._payload),R)}if(Tl(I)||cl(I))return _=_.get(T)||null,u(w,_,I,R,null);Wu(w,I)}return null}function y(_,w,T,I){for(var R=null,O=null,k=w,b=w=0,S=null;k!==null&&b<T.length;b++){k.index>b?(S=k,k=null):S=k.sibling;var P=f(_,k,T[b],I);if(P===null){k===null&&(k=S);break}t&&k&&P.alternate===null&&e(_,k),w=s(P,w,b),O===null?R=P:O.sibling=P,O=P,k=S}if(b===T.length)return n(_,k),Be&&Cs(_,b),R;if(k===null){for(;b<T.length;b++)k=d(_,T[b],I),k!==null&&(w=s(k,w,b),O===null?R=k:O.sibling=k,O=k);return Be&&Cs(_,b),R}for(k=r(_,k);b<T.length;b++)S=p(k,_,b,T[b],I),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?b:S.key),w=s(S,w,b),O===null?R=S:O.sibling=S,O=S);return t&&k.forEach(function(N){return e(_,N)}),Be&&Cs(_,b),R}function v(_,w,T,I){var R=cl(T);if(typeof R!="function")throw Error(K(150));if(T=R.call(T),T==null)throw Error(K(151));for(var O=R=null,k=w,b=w=0,S=null,P=T.next();k!==null&&!P.done;b++,P=T.next()){k.index>b?(S=k,k=null):S=k.sibling;var N=f(_,k,P.value,I);if(N===null){k===null&&(k=S);break}t&&k&&N.alternate===null&&e(_,k),w=s(N,w,b),O===null?R=N:O.sibling=N,O=N,k=S}if(P.done)return n(_,k),Be&&Cs(_,b),R;if(k===null){for(;!P.done;b++,P=T.next())P=d(_,P.value,I),P!==null&&(w=s(P,w,b),O===null?R=P:O.sibling=P,O=P);return Be&&Cs(_,b),R}for(k=r(_,k);!P.done;b++,P=T.next())P=p(k,_,b,P.value,I),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?b:P.key),w=s(P,w,b),O===null?R=P:O.sibling=P,O=P);return t&&k.forEach(function(D){return e(_,D)}),Be&&Cs(_,b),R}function x(_,w,T,I){if(typeof T=="object"&&T!==null&&T.type===Ao&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Du:e:{for(var R=T.key,O=w;O!==null;){if(O.key===R){if(R=T.type,R===Ao){if(O.tag===7){n(_,O.sibling),w=i(O,T.props.children),w.return=_,_=w;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===mi&&Cw(R)===O.type){n(_,O.sibling),w=i(O,T.props),w.ref=ml(_,O,T),w.return=_,_=w;break e}n(_,O);break}else e(_,O);O=O.sibling}T.type===Ao?(w=$s(T.props.children,_.mode,I,T.key),w.return=_,_=w):(I=Oh(T.type,T.key,T.props,null,_.mode,I),I.ref=ml(_,w,T),I.return=_,_=I)}return o(_);case Co:e:{for(O=T.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(_,w.sibling),w=i(w,T.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=np(T,_.mode,I),w.return=_,_=w}return o(_);case mi:return O=T._init,x(_,w,O(T._payload),I)}if(Tl(T))return y(_,w,T,I);if(cl(T))return v(_,w,T,I);Wu(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(_,w.sibling),w=i(w,T),w.return=_,_=w):(n(_,w),w=tp(T,_.mode,I),w.return=_,_=w),o(_)):n(_,w)}return x}var ca=RS(!0),NS=RS(!1),nu={},dr=os(nu),xc=os(nu),bc=os(nu);function Ls(t){if(t===nu)throw Error(K(174));return t}function R0(t,e){switch(Ne(bc,e),Ne(xc,t),Ne(dr,nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ig(e,t)}Fe(dr),Ne(dr,e)}function ua(){Fe(dr),Fe(xc),Fe(bc)}function MS(t){Ls(bc.current);var e=Ls(dr.current),n=ig(e,t.type);e!==n&&(Ne(xc,t),Ne(dr,n))}function N0(t){xc.current===t&&(Fe(dr),Fe(xc))}var je=os(0);function xd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ym=[];function M0(){for(var t=0;t<Ym.length;t++)Ym[t]._workInProgressVersionPrimary=null;Ym.length=0}var Ph=Xr.ReactCurrentDispatcher,Qm=Xr.ReactCurrentBatchConfig,Zs=0,$e=null,dt=null,xt=null,bd=!1,Wl=!1,Tc=0,uM=0;function Mt(){throw Error(K(321))}function D0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function O0(t,e,n,r,i,s){if(Zs=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=t===null||t.memoizedState===null?mM:pM,t=n(r,i),Wl){s=0;do{if(Wl=!1,Tc=0,25<=s)throw Error(K(301));s+=1,xt=dt=null,e.updateQueue=null,Ph.current=gM,t=n(r,i)}while(Wl)}if(Ph.current=Td,e=dt!==null&&dt.next!==null,Zs=0,xt=dt=$e=null,bd=!1,e)throw Error(K(300));return t}function L0(){var t=Tc!==0;return Tc=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?$e.memoizedState=xt=t:xt=xt.next=t,xt}function On(){if(dt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=xt===null?$e.memoizedState:xt.next;if(e!==null)xt=e,dt=t;else{if(t===null)throw Error(K(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},xt===null?$e.memoizedState=xt=t:xt=xt.next=t}return xt}function kc(t,e){return typeof e=="function"?e(t):e}function Xm(t){var e=On(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Zs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,$e.lanes|=u,eo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jn(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$e.lanes|=s,eo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jm(t){var e=On(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jn(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function DS(){}function OS(t,e){var n=$e,r=On(),i=e(),s=!Jn(r.memoizedState,i);if(s&&(r.memoizedState=i,rn=!0),r=r.queue,V0(FS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Sc(9,VS.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(K(349));Zs&30||LS(n,e,i)}return i}function LS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VS(t,e,n,r){e.value=n,e.getSnapshot=r,BS(e)&&US(t)}function FS(t,e,n){return n(function(){BS(e)&&US(t)})}function BS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function US(t){var e=zr(t,1);e!==null&&Yn(e,t,1,-1)}function Aw(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:t},e.queue=t,t=t.dispatch=fM.bind(null,$e,t),[e.memoizedState,t]}function Sc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jS(){return On().memoizedState}function Rh(t,e,n,r){var i=ar();$e.flags|=t,i.memoizedState=Sc(1|e,n,void 0,r===void 0?null:r)}function bf(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&D0(r,o.deps)){i.memoizedState=Sc(e,n,s,r);return}}$e.flags|=t,i.memoizedState=Sc(1|e,n,s,r)}function Pw(t,e){return Rh(8390656,8,t,e)}function V0(t,e){return bf(2048,8,t,e)}function zS(t,e){return bf(4,2,t,e)}function $S(t,e){return bf(4,4,t,e)}function HS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WS(t,e,n){return n=n!=null?n.concat([t]):null,bf(4,4,HS.bind(null,e,t),n)}function F0(){}function KS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&D0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&D0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GS(t,e,n){return Zs&21?(Jn(n,e)||(n=Xk(),$e.lanes|=n,eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function hM(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Qm.transition;Qm.transition={};try{t(!1),e()}finally{Ce=n,Qm.transition=r}}function YS(){return On().memoizedState}function dM(t,e,n){var r=Vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QS(t))XS(e,n);else if(n=IS(t,e,n,r),n!==null){var i=Yt();Yn(n,t,r,i),JS(n,e,r)}}function fM(t,e,n){var r=Vi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QS(t))XS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o)){var l=e.interleaved;l===null?(i.next=i,A0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=IS(t,e,i,r),n!==null&&(i=Yt(),Yn(n,t,r,i),JS(n,e,r))}}function QS(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function XS(t,e){Wl=bd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p0(t,n)}}var Td={readContext:Dn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},mM={readContext:Dn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:Pw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4194308,4,HS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rh(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dM.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Aw,useDebugValue:F0,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Aw(!1),e=t[0];return t=hM.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=ar();if(Be){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),bt===null)throw Error(K(349));Zs&30||LS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Pw(FS.bind(null,r,s,t),[t]),r.flags|=2048,Sc(9,VS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=bt.identifierPrefix;if(Be){var n=Mr,r=Nr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pM={readContext:Dn,useCallback:KS,useContext:Dn,useEffect:V0,useImperativeHandle:WS,useInsertionEffect:zS,useLayoutEffect:$S,useMemo:qS,useReducer:Xm,useRef:jS,useState:function(){return Xm(kc)},useDebugValue:F0,useDeferredValue:function(t){var e=On();return GS(e,dt.memoizedState,t)},useTransition:function(){var t=Xm(kc)[0],e=On().memoizedState;return[t,e]},useMutableSource:DS,useSyncExternalStore:OS,useId:YS,unstable_isNewReconciler:!1},gM={readContext:Dn,useCallback:KS,useContext:Dn,useEffect:V0,useImperativeHandle:WS,useInsertionEffect:zS,useLayoutEffect:$S,useMemo:qS,useReducer:Jm,useRef:jS,useState:function(){return Jm(kc)},useDebugValue:F0,useDeferredValue:function(t){var e=On();return dt===null?e.memoizedState=t:GS(e,dt.memoizedState,t)},useTransition:function(){var t=Jm(kc)[0],e=On().memoizedState;return[t,e]},useMutableSource:DS,useSyncExternalStore:OS,useId:YS,unstable_isNewReconciler:!1};function ha(t,e){try{var n="",r=e;do n+=HN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ig(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yM=typeof WeakMap=="function"?WeakMap:Map;function ZS(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sd||(Sd=!0,Vg=r),Ig(t,e)},n}function e2(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ig(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ig(t,e),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RM.bind(null,t,e,n),e.then(t,t))}function Nw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var vM=Xr.ReactCurrentOwner,rn=!1;function Kt(t,e,n,r){e.child=t===null?NS(e,null,n,r):ca(e,t.child,n,r)}function Dw(t,e,n,r,i){n=n.render;var s=e.ref;return Qo(e,i),r=O0(t,e,n,r,s,i),n=L0(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Be&&n&&b0(e),e.flags|=1,Kt(t,e,r,i),e.child)}function Ow(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!K0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,t2(t,e,s,r,i)):(t=Oh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=Fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function t2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vc(s,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,$r(t,e,i)}return Cg(t,e,n,r,i)}function n2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Bo,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Bo,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ne(Bo,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ne(Bo,dn),dn|=r;return Kt(t,e,i,n),e.child}function r2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cg(t,e,n,r,i){var s=an(n)?Xs:$t.current;return s=aa(e,s),Qo(e,i),n=O0(t,e,n,r,s,i),r=L0(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Be&&r&&b0(e),e.flags|=1,Kt(t,e,n,i),e.child)}function Lw(t,e,n,r,i){if(an(n)){var s=!0;gd(e)}else s=!1;if(Qo(e,i),e.stateNode===null)Nh(t,e),PS(e,n,r),Sg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=an(n)?Xs:$t.current,c=aa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Iw(e,o,r,c),pi=!1;var f=e.memoizedState;o.state=f,Ed(e,r,o,i),l=e.memoizedState,a!==r||f!==l||on.current||pi?(typeof u=="function"&&(kg(e,n,u,r),l=e.memoizedState),(a=pi||Sw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=an(n)?Xs:$t.current,l=aa(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Iw(e,o,r,l),pi=!1,f=e.memoizedState,o.state=f,Ed(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||on.current||pi?(typeof p=="function"&&(kg(e,n,p,r),y=e.memoizedState),(c=pi||Sw(e,n,c,r,f,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ag(t,e,n,r,s,i)}function Ag(t,e,n,r,i,s){r2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ew(e,n,!1),$r(t,e,s);r=e.stateNode,vM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ca(e,t.child,null,s),e.child=ca(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&Ew(e,n,!0),e.child}function i2(t){var e=t.stateNode;e.pendingContext?ww(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ww(t,e.context,!1),R0(t,e.containerInfo)}function Vw(t,e,n,r,i){return la(),k0(i),e.flags|=256,Kt(t,e,n,r),e.child}var Pg={dehydrated:null,treeContext:null,retryLane:0};function Rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function s2(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(je,i&1),t===null)return bg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sf(o,r,0,null),t=$s(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rg(n),e.memoizedState=Pg,t):B0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _M(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fi(a,s):(s=$s(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Rg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pg,r}return s=t.child,t=s.sibling,r=Fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function B0(t,e){return e=Sf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ku(t,e,n,r){return r!==null&&k0(r),ca(e,t.child,null,n),t=B0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _M(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zm(Error(K(422))),Ku(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sf({mode:"visible",children:r.children},i,0,null),s=$s(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ca(e,t.child,null,o),e.child.memoizedState=Rg(o),e.memoizedState=Pg,s);if(!(e.mode&1))return Ku(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Zm(s,r,void 0),Ku(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(t,i),Yn(r,t,i,-1))}return W0(),r=Zm(Error(K(421))),Ku(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mn=Di(i.nextSibling),yn=e,Be=!0,Wn=null,t!==null&&(Tn[kn++]=Nr,Tn[kn++]=Mr,Tn[kn++]=Js,Nr=t.id,Mr=t.overflow,Js=e),e=B0(e,r.children),e.flags|=4096,e)}function Fw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tg(t.return,e,n)}function ep(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function o2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fw(t,n,e);else if(t.tag===19)Fw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ep(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ep(e,!0,n,null,s);break;case"together":ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wM(t,e,n){switch(e.tag){case 3:i2(e),la();break;case 5:MS(e);break;case 1:an(e.type)&&gd(e);break;case 4:R0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(_d,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?s2(t,e,n):(Ne(je,je.current&1),t=$r(t,e,n),t!==null?t.sibling:null);Ne(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,n2(t,e,n)}return $r(t,e,n)}var a2,Ng,l2,c2;a2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ng=function(){};l2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ls(dr.current);var s=null;switch(n){case"input":i=eg(t,i),r=eg(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=rg(t,i),r=rg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=md)}sg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};c2=function(t,e,n,r){n!==r&&(e.flags|=4)};function pl(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EM(t,e,n){var r=e.pendingProps;switch(T0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return an(e.type)&&pd(),Dt(e),null;case 3:return r=e.stateNode,ua(),Fe(on),Fe($t),M0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Ug(Wn),Wn=null))),Ng(t,e),Dt(e),null;case 5:N0(e);var i=Ls(bc.current);if(n=e.type,t!==null&&e.stateNode!=null)l2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Dt(e),null}if(t=Ls(dr.current),Hu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ur]=e,r[Ec]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<Sl.length;i++)Oe(Sl[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":q1(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":Y1(r,s),Oe("invalid",r)}sg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),i=["children",""+a]):hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Ou(r),G1(r,s,!0);break;case"textarea":Ou(r),Q1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=md)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Ec]=r,a2(t,e,!1,!1),e.stateNode=t;e:{switch(o=og(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sl.length;i++)Oe(Sl[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":q1(t,r),i=eg(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Y1(t,r),i=rg(t,r),Oe("invalid",t);break;default:i=r}sg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Bk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Vk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dc(t,l):typeof l=="number"&&dc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&c0(t,s,l,o))}switch(n){case"input":Ou(t),G1(t,r,!1);break;case"textarea":Ou(t),Q1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ko(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ko(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=md)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)c2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ls(bc.current),Ls(dr.current),Hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(s=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:$u(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$u(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return Dt(e),null;case 13:if(Fe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&mn!==null&&e.mode&1&&!(e.flags&128))SS(),la(),e.flags|=98560,s=!1;else if(s=Hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[ur]=e}else la(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),s=!1}else Wn!==null&&(Ug(Wn),Wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?mt===0&&(mt=3):W0())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return ua(),Ng(t,e),t===null&&_c(e.stateNode.containerInfo),Dt(e),null;case 10:return C0(e.type._context),Dt(e),null;case 17:return an(e.type)&&pd(),Dt(e),null;case 19:if(Fe(je),s=e.memoizedState,s===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pl(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xd(t),o!==null){for(e.flags|=128,pl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>da&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304)}else{if(!r)if(t=xd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return Dt(e),null}else 2*Ze()-s.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,r=!0,pl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=je.current,Ne(je,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return H0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function xM(t,e){switch(T0(e),e.tag){case 1:return an(e.type)&&pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(),Fe(on),Fe($t),M0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return N0(e),null;case 13:if(Fe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));la()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(je),null;case 4:return ua(),null;case 10:return C0(e.type._context),null;case 22:case 23:return H0(),null;case 24:return null;default:return null}}var qu=!1,Ft=!1,bM=typeof WeakSet=="function"?WeakSet:Set,J=null;function Fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function Mg(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var Bw=!1;function TM(t,e){if(gg=hd,t=fS(),x0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yg={focusedElem:t,selectionRange:n},hd=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:$n(e.type,v),x);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(I){Ge(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=Bw,Bw=!1,y}function Kl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Mg(e,n,s)}i=i.next}while(i!==r)}}function Tf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u2(t){var e=t.alternate;e!==null&&(t.alternate=null,u2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Ec],delete e[wg],delete e[oM],delete e[aM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h2(t){return t.tag===5||t.tag===3||t.tag===4}function Uw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=md));else if(r!==4&&(t=t.child,t!==null))for(Og(t,e,n),t=t.sibling;t!==null;)Og(t,e,n),t=t.sibling}function Lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}var St=null,Hn=!1;function ci(t,e,n){for(n=n.child;n!==null;)d2(t,e,n),n=n.sibling}function d2(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:Ft||Fo(n,e);case 6:var r=St,i=Hn;St=null,ci(t,e,n),St=r,Hn=i,St!==null&&(Hn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Hn?(t=St,n=n.stateNode,t.nodeType===8?qm(t.parentNode,n):t.nodeType===1&&qm(t,n),gc(t)):qm(St,n.stateNode));break;case 4:r=St,i=Hn,St=n.stateNode.containerInfo,Hn=!0,ci(t,e,n),St=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Mg(n,e,o),i=i.next}while(i!==r)}ci(t,e,n);break;case 1:if(!Ft&&(Fo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,ci(t,e,n),Ft=r):ci(t,e,n);break;default:ci(t,e,n)}}function jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bM),e.forEach(function(r){var i=MM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Hn=!1;break e;case 3:St=a.stateNode.containerInfo,Hn=!0;break e;case 4:St=a.stateNode.containerInfo,Hn=!0;break e}a=a.return}if(St===null)throw Error(K(160));d2(s,o,i),St=null,Hn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f2(e,t),e=e.sibling}function f2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),ir(t),r&4){try{Kl(3,t,t.return),Tf(3,t)}catch(v){Ge(t,t.return,v)}try{Kl(5,t,t.return)}catch(v){Ge(t,t.return,v)}}break;case 1:Bn(e,t),ir(t),r&512&&n!==null&&Fo(n,n.return);break;case 5:if(Bn(e,t),ir(t),r&512&&n!==null&&Fo(n,n.return),t.flags&32){var i=t.stateNode;try{dc(i,"")}catch(v){Ge(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Dk(i,s),og(a,o);var c=og(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Bk(i,d):u==="dangerouslySetInnerHTML"?Vk(i,d):u==="children"?dc(i,d):c0(i,u,d,c)}switch(a){case"input":tg(i,s);break;case"textarea":Ok(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ko(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ko(i,!!s.multiple,s.defaultValue,!0):Ko(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ec]=s}catch(v){Ge(t,t.return,v)}}break;case 6:if(Bn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ge(t,t.return,v)}}break;case 3:if(Bn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gc(e.containerInfo)}catch(v){Ge(t,t.return,v)}break;case 4:Bn(e,t),ir(t);break;case 13:Bn(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(z0=Ze())),r&4&&jw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||u,Bn(e,t),Ft=c):Bn(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(J=t,u=t.child;u!==null;){for(d=J=u;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:Kl(4,f,f.return);break;case 1:Fo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ge(r,n,v)}}break;case 5:Fo(f,f.return);break;case 22:if(f.memoizedState!==null){$w(d);continue}}p!==null?(p.return=f,J=p):$w(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Fk("display",o))}catch(v){Ge(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ge(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bn(e,t),ir(t),r&4&&jw(t);break;case 21:break;default:Bn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h2(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dc(i,""),r.flags&=-33);var s=Uw(t);Lg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Uw(t);Og(t,a,o);break;default:throw Error(K(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kM(t,e,n){J=t,m2(t)}function m2(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=qu;var c=Ft;if(qu=o,(Ft=l)&&!c)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?Hw(i):l!==null?(l.return=o,J=l):Hw(i);for(;s!==null;)J=s,m2(s),s=s.sibling;J=i,qu=a,Ft=c}zw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):zw(t)}}function zw(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Tf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&gc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ft||e.flags&512&&Dg(e)}catch(f){Ge(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function $w(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Hw(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tf(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ge(e,i,l)}}var s=e.return;try{Dg(e)}catch(l){Ge(e,s,l)}break;case 5:var o=e.return;try{Dg(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var SM=Math.ceil,kd=Xr.ReactCurrentDispatcher,U0=Xr.ReactCurrentOwner,Pn=Xr.ReactCurrentBatchConfig,xe=0,bt=null,st=null,Pt=0,dn=0,Bo=os(0),mt=0,Ic=null,eo=0,kf=0,j0=0,ql=null,en=null,z0=0,da=1/0,Cr=null,Sd=!1,Vg=null,Li=null,Gu=!1,Ti=null,Id=0,Gl=0,Fg=null,Mh=-1,Dh=0;function Yt(){return xe&6?Ze():Mh!==-1?Mh:Mh=Ze()}function Vi(t){return t.mode&1?xe&2&&Pt!==0?Pt&-Pt:cM.transition!==null?(Dh===0&&(Dh=Xk()),Dh):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:iS(t.type)),t):1}function Yn(t,e,n,r){if(50<Gl)throw Gl=0,Fg=null,Error(K(185));Zc(t,n,r),(!(xe&2)||t!==bt)&&(t===bt&&(!(xe&2)&&(kf|=n),mt===4&&vi(t,Pt)),ln(t,r),n===1&&xe===0&&!(e.mode&1)&&(da=Ze()+500,Ef&&as()))}function ln(t,e){var n=t.callbackNode;c5(t,e);var r=ud(t,t===bt?Pt:0);if(r===0)n!==null&&Z1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Z1(n),e===1)t.tag===0?lM(Ww.bind(null,t)):bS(Ww.bind(null,t)),iM(function(){!(xe&6)&&as()}),n=null;else{switch(Jk(r)){case 1:n=m0;break;case 4:n=Yk;break;case 16:n=cd;break;case 536870912:n=Qk;break;default:n=cd}n=x2(n,p2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p2(t,e){if(Mh=-1,Dh=0,xe&6)throw Error(K(327));var n=t.callbackNode;if(Xo()&&t.callbackNode!==n)return null;var r=ud(t,t===bt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cd(t,r);else{e=r;var i=xe;xe|=2;var s=y2();(bt!==t||Pt!==e)&&(Cr=null,da=Ze()+500,zs(t,e));do try{AM();break}catch(a){g2(t,a)}while(!0);I0(),kd.current=s,xe=i,st!==null?e=0:(bt=null,Pt=0,e=mt)}if(e!==0){if(e===2&&(i=hg(t),i!==0&&(r=i,e=Bg(t,i))),e===1)throw n=Ic,zs(t,0),vi(t,r),ln(t,Ze()),n;if(e===6)vi(t,r);else{if(i=t.current.alternate,!(r&30)&&!IM(i)&&(e=Cd(t,r),e===2&&(s=hg(t),s!==0&&(r=s,e=Bg(t,s))),e===1))throw n=Ic,zs(t,0),vi(t,r),ln(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:As(t,en,Cr);break;case 3:if(vi(t,r),(r&130023424)===r&&(e=z0+500-Ze(),10<e)){if(ud(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_g(As.bind(null,t,en,Cr),e);break}As(t,en,Cr);break;case 4:if(vi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SM(r/1960))-r,10<r){t.timeoutHandle=_g(As.bind(null,t,en,Cr),r);break}As(t,en,Cr);break;case 5:As(t,en,Cr);break;default:throw Error(K(329))}}}return ln(t,Ze()),t.callbackNode===n?p2.bind(null,t):null}function Bg(t,e){var n=ql;return t.current.memoizedState.isDehydrated&&(zs(t,e).flags|=256),t=Cd(t,e),t!==2&&(e=en,en=n,e!==null&&Ug(e)),t}function Ug(t){en===null?en=t:en.push.apply(en,t)}function IM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~j0,e&=~kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function Ww(t){if(xe&6)throw Error(K(327));Xo();var e=ud(t,0);if(!(e&1))return ln(t,Ze()),null;var n=Cd(t,e);if(t.tag!==0&&n===2){var r=hg(t);r!==0&&(e=r,n=Bg(t,r))}if(n===1)throw n=Ic,zs(t,0),vi(t,e),ln(t,Ze()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,en,Cr),ln(t,Ze()),null}function $0(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(da=Ze()+500,Ef&&as())}}function to(t){Ti!==null&&Ti.tag===0&&!(xe&6)&&Xo();var e=xe;xe|=1;var n=Pn.transition,r=Ce;try{if(Pn.transition=null,Ce=1,t)return t()}finally{Ce=r,Pn.transition=n,xe=e,!(xe&6)&&as()}}function H0(){dn=Bo.current,Fe(Bo)}function zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rM(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(T0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pd();break;case 3:ua(),Fe(on),Fe($t),M0();break;case 5:N0(r);break;case 4:ua();break;case 13:Fe(je);break;case 19:Fe(je);break;case 10:C0(r.type._context);break;case 22:case 23:H0()}n=n.return}if(bt=t,st=t=Fi(t.current,null),Pt=dn=e,mt=0,Ic=null,j0=kf=eo=0,en=ql=null,Os!==null){for(e=0;e<Os.length;e++)if(n=Os[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Os=null}return t}function g2(t,e){do{var n=st;try{if(I0(),Ph.current=Td,bd){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bd=!1}if(Zs=0,xt=dt=$e=null,Wl=!1,Tc=0,U0.current=null,n===null||n.return===null){mt=1,Ic=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Nw(o);if(p!==null){p.flags&=-257,Mw(p,o,a,s,e),p.mode&1&&Rw(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Rw(s,c,e),W0();break e}l=Error(K(426))}}else if(Be&&a.mode&1){var x=Nw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Mw(x,o,a,s,e),k0(ha(l,a));break e}}s=l=ha(l,a),mt!==4&&(mt=2),ql===null?ql=[s]:ql.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=ZS(s,l,e);Tw(s,_);break e;case 1:a=l;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Li===null||!Li.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=e2(s,a,e);Tw(s,I);break e}}s=s.return}while(s!==null)}_2(n)}catch(R){e=R,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function y2(){var t=kd.current;return kd.current=Td,t===null?Td:t}function W0(){(mt===0||mt===3||mt===2)&&(mt=4),bt===null||!(eo&268435455)&&!(kf&268435455)||vi(bt,Pt)}function Cd(t,e){var n=xe;xe|=2;var r=y2();(bt!==t||Pt!==e)&&(Cr=null,zs(t,e));do try{CM();break}catch(i){g2(t,i)}while(!0);if(I0(),xe=n,kd.current=r,st!==null)throw Error(K(261));return bt=null,Pt=0,mt}function CM(){for(;st!==null;)v2(st)}function AM(){for(;st!==null&&!e5();)v2(st)}function v2(t){var e=E2(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?_2(t):st=e,U0.current=null}function _2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xM(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,st=null;return}}else if(n=EM(n,e,dn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);mt===0&&(mt=5)}function As(t,e,n){var r=Ce,i=Pn.transition;try{Pn.transition=null,Ce=1,PM(t,e,n,r)}finally{Pn.transition=i,Ce=r}return null}function PM(t,e,n,r){do Xo();while(Ti!==null);if(xe&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(u5(t,s),t===bt&&(st=bt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,x2(cd,function(){return Xo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=Ce;Ce=1;var a=xe;xe|=4,U0.current=null,TM(t,n),f2(n,t),Q5(yg),hd=!!gg,yg=gg=null,t.current=n,kM(n),t5(),xe=a,Ce=o,Pn.transition=s}else t.current=n;if(Gu&&(Gu=!1,Ti=t,Id=i),s=t.pendingLanes,s===0&&(Li=null),i5(n.stateNode),ln(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sd)throw Sd=!1,t=Vg,Vg=null,t;return Id&1&&t.tag!==0&&Xo(),s=t.pendingLanes,s&1?t===Fg?Gl++:(Gl=0,Fg=t):Gl=0,as(),null}function Xo(){if(Ti!==null){var t=Jk(Id),e=Pn.transition,n=Ce;try{if(Pn.transition=null,Ce=16>t?16:t,Ti===null)var r=!1;else{if(t=Ti,Ti=null,Id=0,xe&6)throw Error(K(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:Kl(8,u,s)}var d=u.child;if(d!==null)d.return=u,J=d;else for(;J!==null;){u=J;var f=u.sibling,p=u.return;if(u2(u),u===c){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,J=_;break e}J=s.return}}var w=t.current;for(J=w;J!==null;){o=J;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,J=T;else e:for(o=w;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tf(9,a)}}catch(R){Ge(a,a.return,R)}if(a===o){J=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,J=I;break e}J=a.return}}if(xe=i,as(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(gf,t)}catch{}r=!0}return r}finally{Ce=n,Pn.transition=e}}return!1}function Kw(t,e,n){e=ha(n,e),e=ZS(t,e,1),t=Oi(t,e,1),e=Yt(),t!==null&&(Zc(t,1,e),ln(t,e))}function Ge(t,e,n){if(t.tag===3)Kw(t,t,n);else for(;e!==null;){if(e.tag===3){Kw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Li===null||!Li.has(r))){t=ha(n,t),t=e2(e,t,1),e=Oi(e,t,1),t=Yt(),e!==null&&(Zc(e,1,t),ln(e,t));break}}e=e.return}}function RM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Pt&n)===n&&(mt===4||mt===3&&(Pt&130023424)===Pt&&500>Ze()-z0?zs(t,0):j0|=n),ln(t,e)}function w2(t,e){e===0&&(t.mode&1?(e=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):e=1);var n=Yt();t=zr(t,e),t!==null&&(Zc(t,e,n),ln(t,n))}function NM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w2(t,n)}function MM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),w2(t,n)}var E2;E2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,wM(t,e,n);rn=!!(t.flags&131072)}else rn=!1,Be&&e.flags&1048576&&TS(e,vd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nh(t,e),t=e.pendingProps;var i=aa(e,$t.current);Qo(e,n),i=O0(null,e,r,t,i,n);var s=L0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,gd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,P0(e),i.updater=xf,e.stateNode=i,i._reactInternals=e,Sg(e,r,t,n),e=Ag(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&b0(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OM(r),t=$n(r,t),i){case 0:e=Cg(null,e,r,t,n);break e;case 1:e=Lw(null,e,r,t,n);break e;case 11:e=Dw(null,e,r,t,n);break e;case 14:e=Ow(null,e,r,$n(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Cg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Lw(t,e,r,i,n);case 3:e:{if(i2(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,CS(t,e),Ed(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ha(Error(K(423)),e),e=Vw(t,e,r,n,i);break e}else if(r!==i){i=ha(Error(K(424)),e),e=Vw(t,e,r,n,i);break e}else for(mn=Di(e.stateNode.containerInfo.firstChild),yn=e,Be=!0,Wn=null,n=NS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(la(),r===i){e=$r(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return MS(e),t===null&&bg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vg(r,i)?o=null:s!==null&&vg(r,s)&&(e.flags|=32),r2(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&bg(e),null;case 13:return s2(t,e,n);case 4:return R0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ca(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Dw(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ne(_d,r._currentValue),r._currentValue=o,s!==null)if(Jn(s.value,o)){if(s.children===i.children&&!on.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Vr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Tg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qo(e,n),i=Dn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),Ow(t,e,r,i,n);case 15:return t2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Nh(t,e),e.tag=1,an(r)?(t=!0,gd(e)):t=!1,Qo(e,n),PS(e,r,i),Sg(e,r,i,n),Ag(null,e,r,!0,t,n);case 19:return o2(t,e,n);case 22:return n2(t,e,n)}throw Error(K(156,e.tag))};function x2(t,e){return Gk(t,e)}function DM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new DM(t,e,n,r)}function K0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OM(t){if(typeof t=="function")return K0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===h0)return 11;if(t===d0)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")K0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ao:return $s(n.children,i,s,e);case u0:o=8,i|=8;break;case Qp:return t=In(12,n,e,i|2),t.elementType=Qp,t.lanes=s,t;case Xp:return t=In(13,n,e,i),t.elementType=Xp,t.lanes=s,t;case Jp:return t=In(19,n,e,i),t.elementType=Jp,t.lanes=s,t;case Rk:return Sf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ak:o=10;break e;case Pk:o=9;break e;case h0:o=11;break e;case d0:o=14;break e;case mi:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $s(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function Sf(t,e,n,r){return t=In(22,t,r,e),t.elementType=Rk,t.lanes=n,t.stateNode={isHidden:!1},t}function tp(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function np(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lm(0),this.expirationTimes=Lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function q0(t,e,n,r,i,s,o,a,l){return t=new LM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},P0(s),t}function VM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b2(t){if(!t)return Gi;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(an(n))return xS(t,n,e)}return e}function T2(t,e,n,r,i,s,o,a,l){return t=q0(n,r,!0,t,i,s,o,a,l),t.context=b2(null),n=t.current,r=Yt(),i=Vi(n),s=Vr(r,i),s.callback=e??null,Oi(n,s,i),t.current.lanes=i,Zc(t,i,r),ln(t,r),t}function If(t,e,n,r){var i=e.current,s=Yt(),o=Vi(i);return n=b2(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(i,e,o),t!==null&&(Yn(t,i,o,s),Ah(t,i,o)),o}function Ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function G0(t,e){qw(t,e),(t=t.alternate)&&qw(t,e)}function FM(){return null}var k2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Y0(t){this._internalRoot=t}Cf.prototype.render=Y0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));If(t,e,null,null)};Cf.prototype.unmount=Y0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){If(null,t,null,null)}),e[jr]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=tS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&rS(t)}};function Q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function BM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ad(o);s.call(c)}}var o=T2(e,r,t,0,null,!1,!1,"",Gw);return t._reactRootContainer=o,t[jr]=o.current,_c(t.nodeType===8?t.parentNode:t),to(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ad(l);a.call(c)}}var l=q0(t,0,!1,null,null,!1,!1,"",Gw);return t._reactRootContainer=l,t[jr]=l.current,_c(t.nodeType===8?t.parentNode:t),to(function(){If(e,l,n,r)}),l}function Pf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ad(o);a.call(l)}}If(e,o,t,i)}else o=BM(n,e,t,i,r);return Ad(o)}Zk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kl(e.pendingLanes);n!==0&&(p0(e,n|1),ln(e,Ze()),!(xe&6)&&(da=Ze()+500,as()))}break;case 13:to(function(){var r=zr(t,1);if(r!==null){var i=Yt();Yn(r,t,1,i)}}),G0(t,1)}};g0=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=Yt();Yn(e,t,134217728,n)}G0(t,134217728)}};eS=function(t){if(t.tag===13){var e=Vi(t),n=zr(t,e);if(n!==null){var r=Yt();Yn(n,t,e,r)}G0(t,e)}};tS=function(){return Ce};nS=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};lg=function(t,e,n){switch(e){case"input":if(tg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wf(r);if(!i)throw Error(K(90));Mk(r),tg(r,i)}}}break;case"textarea":Ok(t,n);break;case"select":e=n.value,e!=null&&Ko(t,!!n.multiple,e,!1)}};zk=$0;$k=to;var UM={usingClientEntryPoint:!1,Events:[tu,Mo,wf,Uk,jk,$0]},gl={findFiberByHostInstance:Ds,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},jM={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kk(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||FM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{gf=Yu.inject(jM),hr=Yu}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UM;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q0(e))throw Error(K(200));return VM(t,e,null,n)};_n.createRoot=function(t,e){if(!Q0(t))throw Error(K(299));var n=!1,r="",i=k2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=q0(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,_c(t.nodeType===8?t.parentNode:t),new Y0(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Kk(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return to(t)};_n.hydrate=function(t,e,n){if(!Af(e))throw Error(K(200));return Pf(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Q0(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=k2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=T2(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,_c(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cf(e)};_n.render=function(t,e,n){if(!Af(e))throw Error(K(200));return Pf(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Af(t))throw Error(K(40));return t._reactRootContainer?(to(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};_n.unstable_batchedUpdates=$0;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Af(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Pf(t,e,n,!1,r)};_n.version="18.2.0-next-9e3b772b8-20220608";function S2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S2)}catch(t){console.error(t)}}S2(),Tk.exports=_n;var zM=Tk.exports,Yw=zM;Gp.createRoot=Yw.createRoot,Gp.hydrateRoot=Yw.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cc.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const Qw="popstate";function $M(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return jg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Pd(i)}return WM(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HM(){return Math.random().toString(36).substr(2,8)}function Xw(t,e){return{usr:t.state,key:t.key,idx:e}}function jg(t,e,n,r){return n===void 0&&(n=null),Cc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Aa(e):e,{state:n,key:e&&e.key||r||HM()})}function Pd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Aa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ki.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Cc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ki.Pop;let x=u(),_=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:_})}function f(x,_){a=ki.Push;let w=jg(v.location,x,_);c=u()+1;let T=Xw(w,c),I=v.createHref(w);try{o.pushState(T,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(I)}s&&l&&l({action:a,location:v.location,delta:1})}function p(x,_){a=ki.Replace;let w=jg(v.location,x,_);c=u();let T=Xw(w,c),I=v.createHref(w);o.replaceState(T,"",I),s&&l&&l({action:a,location:v.location,delta:0})}function y(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:Pd(x);return tt(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let v={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Qw,d),l=x,()=>{i.removeEventListener(Qw,d),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let _=y(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(x){return o.go(x)}};return v}var Jw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jw||(Jw={}));function KM(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Aa(e):e,i=J0(r.pathname||"/",n);if(i==null)return null;let s=I2(t);qM(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=nD(s[a],sD(i));return o}function I2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Bi([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),I2(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:eD(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of C2(s.path))i(s,o,l)}),e}function C2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=C2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GM=/^:\w+$/,YM=3,QM=2,XM=1,JM=10,ZM=-2,Zw=t=>t==="*";function eD(t,e){let n=t.split("/"),r=n.length;return n.some(Zw)&&(r+=ZM),e&&(r+=QM),n.filter(i=>!Zw(i)).reduce((i,s)=>i+(GM.test(s)?YM:s===""?XM:JM),r)}function tD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nD(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=rD({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Bi([i,u.pathname]),pathnameBase:cD(Bi([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Bi([i,u.pathnameBase]))}return s}function rD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let f=a[d]||"";o=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return c[u]=oD(a[d]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),X0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sD(t){try{return decodeURI(t)}catch(e){return X0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function oD(t,e){try{return decodeURIComponent(t)}catch(n){return X0(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function J0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Aa(t):t;return{pathname:n?n.startsWith("/")?n:lD(n,e):e,search:uD(r),hash:hD(i)}}function lD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ev(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Aa(t):(i=Cc({},t),tt(!i.pathname||!i.pathname.includes("?"),rp("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),rp("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),rp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=aD(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Bi=t=>t.join("/").replace(/\/\/+/g,"/"),cD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A2=["post","put","patch","delete"];new Set(A2);const fD=["get",...A2];new Set(fD);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rd.apply(this,arguments)}const tv=C.createContext(null),mD=C.createContext(null),Pa=C.createContext(null),Rf=C.createContext(null),ls=C.createContext({outlet:null,matches:[],isDataRoute:!1}),P2=C.createContext(null);function pD(t,e){let{relative:n}=e===void 0?{}:e;Ra()||tt(!1);let{basename:r,navigator:i}=C.useContext(Pa),{hash:s,pathname:o,search:a}=N2(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Bi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ra(){return C.useContext(Rf)!=null}function cs(){return Ra()||tt(!1),C.useContext(Rf).location}function R2(t){C.useContext(Pa).static||C.useLayoutEffect(t)}function Na(){let{isDataRoute:t}=C.useContext(ls);return t?CD():gD()}function gD(){Ra()||tt(!1);let t=C.useContext(tv),{basename:e,navigator:n}=C.useContext(Pa),{matches:r}=C.useContext(ls),{pathname:i}=cs(),s=JSON.stringify(Z0(r).map(l=>l.pathnameBase)),o=C.useRef(!1);return R2(()=>{o.current=!0}),C.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=ev(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Bi([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}function N2(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=C.useContext(ls),{pathname:i}=cs(),s=JSON.stringify(Z0(r).map(o=>o.pathnameBase));return C.useMemo(()=>ev(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function yD(t,e){return vD(t,e)}function vD(t,e,n){Ra()||tt(!1);let{navigator:r}=C.useContext(Pa),{matches:i}=C.useContext(ls),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=cs(),c;if(e){var u;let v=typeof e=="string"?Aa(e):e;a==="/"||(u=v.pathname)!=null&&u.startsWith(a)||tt(!1),c=v}else c=l;let d=c.pathname||"/",f=a==="/"?d:d.slice(a.length)||"/",p=KM(t,{pathname:f}),y=bD(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Bi([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:Bi([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n);return e&&y?C.createElement(Rf.Provider,{value:{location:Rd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ki.Pop}},y):y}function _D(){let t=ID(),e=dD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,null)}const wD=C.createElement(_D,null);class ED extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?C.createElement(ls.Provider,{value:this.props.routeContext},C.createElement(P2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xD(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(tv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(ls.Provider,{value:e},r)}function bD(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||tt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||wD);let f=e.concat(s.slice(0,c+1)),p=()=>{let y;return u?y=d:l.route.Component?y=C.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,C.createElement(xD,{match:l,routeContext:{outlet:a,matches:f,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?C.createElement(ED,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var zg;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(zg||(zg={}));var Ac;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ac||(Ac={}));function TD(t){let e=C.useContext(tv);return e||tt(!1),e}function kD(t){let e=C.useContext(mD);return e||tt(!1),e}function SD(t){let e=C.useContext(ls);return e||tt(!1),e}function M2(t){let e=SD(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function ID(){var t;let e=C.useContext(P2),n=kD(Ac.UseRouteError),r=M2(Ac.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function CD(){let{router:t}=TD(zg.UseNavigateStable),e=M2(Ac.UseNavigateStable),n=C.useRef(!1);return R2(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Rd({fromRouteId:e},s)))},[t,e])}function D2(t){let{to:e,replace:n,state:r,relative:i}=t;Ra()||tt(!1);let{matches:s}=C.useContext(ls),{pathname:o}=cs(),a=Na(),l=ev(e,Z0(s).map(u=>u.pathnameBase),o,i==="path"),c=JSON.stringify(l);return C.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:i}),[a,c,i,n,r]),null}function kt(t){tt(!1)}function AD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ki.Pop,navigator:s,static:o=!1}=t;Ra()&&tt(!1);let a=e.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Aa(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:p="default"}=r,y=C.useMemo(()=>{let v=J0(c,a);return v==null?null:{location:{pathname:v,search:u,hash:d,state:f,key:p},navigationType:i}},[a,c,u,d,f,p,i]);return y==null?null:C.createElement(Pa.Provider,{value:l},C.createElement(Rf.Provider,{children:n,value:y}))}function PD(t){let{children:e,location:n}=t;return yD($g(e),n)}var eE;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(eE||(eE={}));new Promise(()=>{});function $g(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,$g(r.props.children,s));return}r.type!==kt&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$g(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}function RD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ND(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MD(t,e){return t.button===0&&(!e||e==="_self")&&!ND(t)}const DD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],OD="startTransition",tE=FN[OD];function LD(t){let{basename:e,children:n,future:r,window:i}=t,s=C.useRef();s.current==null&&(s.current=$M({window:i,v5Compat:!0}));let o=s.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=C.useCallback(d=>{c&&tE?tE(()=>l(d)):l(d)},[l,c]);return C.useLayoutEffect(()=>o.listen(u),[o,u]),C.createElement(AD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const VD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=C.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,d=RD(e,DD),{basename:f}=C.useContext(Pa),p,y=!1;if(typeof c=="string"&&FD.test(c)&&(p=c,VD))try{let w=new URL(window.location.href),T=c.startsWith("//")?new URL(w.protocol+c):new URL(c),I=J0(T.pathname,f);T.origin===w.origin&&I!=null?c=I+T.search+T.hash:y=!0}catch{}let v=pD(c,{relative:i}),x=BD(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i});function _(w){r&&r(w),w.defaultPrevented||x(w)}return C.createElement("a",Hg({},d,{href:p||v,onClick:y||s?r:_,ref:n,target:l}))});var nE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(nE||(nE={}));var rE;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rE||(rE={}));function BD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Na(),l=cs(),c=N2(t,{relative:o});return C.useCallback(u=>{if(MD(u,n)){u.preventDefault();let d=r!==void 0?r:Pd(l)===Pd(c);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function O2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=O2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Si(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=O2(t))&&(r&&(r+=" "),r+=e);return r}const Pc=t=>typeof t=="number"&&!isNaN(t),Hs=t=>typeof t=="string",pn=t=>typeof t=="function",Lh=t=>Hs(t)||pn(t)?t:null,Wg=t=>C.isValidElement(t)||Hs(t)||pn(t)||Pc(t);function UD(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Nf(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:f,playToast:p}=o;const y=r?`${e}--${l}`:e,v=r?`${n}--${l}`:n,x=C.useRef(0);return C.useLayoutEffect(()=>{const _=d.current,w=y.split(" "),T=I=>{I.target===d.current&&(p(),_.removeEventListener("animationend",T),_.removeEventListener("animationcancel",T),x.current===0&&I.type!=="animationcancel"&&_.classList.remove(...w))};_.classList.add(...w),_.addEventListener("animationend",T),_.addEventListener("animationcancel",T)},[]),C.useEffect(()=>{const _=d.current,w=()=>{_.removeEventListener("animationend",w),i?UD(_,u,s):u()};f||(c?w():(x.current=1,_.className+=` ${v}`,_.addEventListener("animationend",w)))},[f]),m.createElement(m.Fragment,null,a)}}function iE(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const qt=new Map;let Rc=[];const Kg=new Set,jD=t=>Kg.forEach(e=>e(t)),L2=()=>qt.size>0;function V2(t,e){var n;if(e)return!((n=qt.get(e))==null||!n.isToastActive(t));let r=!1;return qt.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function F2(t,e){Wg(t)&&(L2()||Rc.push({content:t,options:e}),qt.forEach(n=>{n.buildToast(t,e)}))}function sE(t,e){qt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function zD(t){const{subscribe:e,getSnapshot:n,setProps:r}=C.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,d,f){let p=1,y=0,v=[],x=[],_=[],w=d;const T=new Map,I=new Set,R=()=>{_=Array.from(T.values()),I.forEach(b=>b())},O=b=>{x=b==null?[]:x.filter(S=>S!==b),R()},k=b=>{const{toastId:S,onOpen:P,updateId:N,children:D}=b.props,M=N==null;b.staleId&&T.delete(b.staleId),T.set(S,b),x=[...x,b.props.toastId].filter(ie=>ie!==b.staleId),R(),f(iE(b,M?"added":"updated")),M&&pn(P)&&P(C.isValidElement(D)&&D.props)};return{id:u,props:w,observe:b=>(I.add(b),()=>I.delete(b)),toggle:(b,S)=>{T.forEach(P=>{S!=null&&S!==P.props.toastId||pn(P.toggle)&&P.toggle(b)})},removeToast:O,toasts:T,clearQueue:()=>{y-=v.length,v=[]},buildToast:(b,S)=>{if((H=>{let{containerId:se,toastId:de,updateId:Te}=H;const fe=se?se!==u:u!==1,nt=T.has(de)&&Te==null;return fe||nt})(S))return;const{toastId:P,updateId:N,data:D,staleId:M,delay:ie}=S,ee=()=>{O(P)},ce=N==null;ce&&y++;const j={...w,style:w.toastStyle,key:p++,...Object.fromEntries(Object.entries(S).filter(H=>{let[se,de]=H;return de!=null})),toastId:P,updateId:N,data:D,closeToast:ee,isIn:!1,className:Lh(S.className||w.toastClassName),bodyClassName:Lh(S.bodyClassName||w.bodyClassName),progressClassName:Lh(S.progressClassName||w.progressClassName),autoClose:!S.isLoading&&(V=S.autoClose,W=w.autoClose,V===!1||Pc(V)&&V>0?V:W),deleteToast(){const H=T.get(P),{onClose:se,children:de}=H.props;pn(se)&&se(C.isValidElement(de)&&de.props),f(iE(H,"removed")),T.delete(P),y--,y<0&&(y=0),v.length>0?k(v.shift()):R()}};var V,W;j.closeButton=w.closeButton,S.closeButton===!1||Wg(S.closeButton)?j.closeButton=S.closeButton:S.closeButton===!0&&(j.closeButton=!Wg(w.closeButton)||w.closeButton);let G=b;C.isValidElement(b)&&!Hs(b.type)?G=C.cloneElement(b,{closeToast:ee,toastProps:j,data:D}):pn(b)&&(G=b({closeToast:ee,toastProps:j,data:D}));const te={content:G,props:j,staleId:M};w.limit&&w.limit>0&&y>w.limit&&ce?v.push(te):Pc(ie)?setTimeout(()=>{k(te)},ie):k(te)},setProps(b){w=b},setToggle:(b,S)=>{T.get(b).toggle=S},isToastActive:b=>x.some(S=>S===b),getSnapshot:()=>_}}(o,s,jD);qt.set(o,l);const c=l.observe(a);return Rc.forEach(u=>F2(u.content,u.options)),Rc=[],()=>{c(),qt.delete(o)}},setProps(a){var l;(l=qt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=qt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=C.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:V2,count:i==null?void 0:i.length}}function $D(t){const[e,n]=C.useState(!1),[r,i]=C.useState(!1),s=C.useRef(null),o=C.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;var f,p;function y(){n(!0)}function v(){n(!1)}function x(T){const I=s.current;o.canDrag&&I&&(o.didMove=!0,e&&v(),o.delta=t.draggableDirection==="x"?T.clientX-o.start:T.clientY-o.start,o.start!==T.clientX&&(o.canCloseOnClick=!1),I.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,I.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function _(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",_);const T=s.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}(p=qt.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(f.id,f.fn),C.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||v(),window.addEventListener("focus",y),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",v)}},[t.pauseOnFocusLoss]);const w={onPointerDown:function(T){if(t.draggable===!0||t.draggable===T.pointerType){o.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",_);const I=s.current;o.canCloseOnClick=!0,o.canDrag=!0,I.style.transition="none",t.draggableDirection==="x"?(o.start=T.clientX,o.removalDistance=I.offsetWidth*(t.draggablePercent/100)):(o.start=T.clientY,o.removalDistance=I.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(T){const{top:I,bottom:R,left:O,right:k}=s.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&t.pauseOnHover&&T.clientX>=O&&T.clientX<=k&&T.clientY>=I&&T.clientY<=R?v():y()}};return a&&l&&(w.onMouseEnter=v,t.stacked||(w.onMouseLeave=y)),d&&(w.onClick=T=>{u&&u(T),o.canCloseOnClick&&c()}),{playToast:y,pauseToast:v,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function HD(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:f}=t;const p=s||l&&c===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${c})`);const v=Si("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),x=pn(o)?o({rtl:u,type:i,defaultClassName:v}):Si(v,o),_={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return m.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},m.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),m.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:y,..._}))}let WD=1;const B2=()=>""+WD++;function KD(t){return t&&(Hs(t.toastId)||Pc(t.toastId))?t.toastId:B2()}function Yl(t,e){return F2(t,e),e.toastId}function Nd(t,e){return{...e,type:e&&e.type||t,toastId:KD(e)}}function Qu(t){return(e,n)=>Yl(e,Nd(t,n))}function ke(t,e){return Yl(t,Nd("default",e))}ke.loading=(t,e)=>Yl(t,Nd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ke.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Hs(i)?ke.loading(i,n):ke.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null)return void ke.dismiss(r);const p={type:u,...a,...n,data:f},y=Hs(d)?{render:d}:d;return r?ke.update(r,{...p,...y}):ke(y.render,{...p,...y}),f},c=pn(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},ke.success=Qu("success"),ke.info=Qu("info"),ke.error=Qu("error"),ke.warning=Qu("warning"),ke.warn=ke.warning,ke.dark=(t,e)=>Yl(t,Nd("default",{theme:"dark",...e})),ke.dismiss=function(t){(function(e){var n;if(L2()){if(e==null||Hs(n=e)||Pc(n))qt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=qt.get(e.containerId);r?r.removeToast(e.id):qt.forEach(i=>{i.removeToast(e.id)})}}else Rc=Rc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},ke.clearWaitingQueue=function(t){t===void 0&&(t={}),qt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},ke.isActive=V2,ke.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=qt.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:B2()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Yl(o,s)}},ke.done=t=>{ke.update(t,{progress:1})},ke.onChange=function(t){return Kg.add(t),()=>{Kg.delete(t)}},ke.play=t=>sE(!0,t),ke.pause=t=>sE(!1,t);const qD=typeof window<"u"?C.useLayoutEffect:C.useEffect,Xu=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return m.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},ip={info:function(t){return m.createElement(Xu,{...t},m.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return m.createElement(Xu,{...t},m.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return m.createElement(Xu,{...t},m.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return m.createElement(Xu,{...t},m.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return m.createElement("div",{className:"Toastify__spinner"})}},GD=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=$D(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:f,transition:p,position:y,className:v,style:x,bodyClassName:_,bodyStyle:w,progressClassName:T,progressStyle:I,updateId:R,role:O,progress:k,rtl:b,toastId:S,deleteToast:P,isIn:N,isLoading:D,closeOnClick:M,theme:ie}=t,ee=Si("Toastify__toast",`Toastify__toast-theme--${ie}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":b},{"Toastify__toast--close-on-click":M}),ce=pn(v)?v({rtl:b,position:y,type:u,defaultClassName:ee}):Si(ee,v),j=function(te){let{theme:H,type:se,isLoading:de,icon:Te}=te,fe=null;const nt={theme:H,type:se};return Te===!1||(pn(Te)?fe=Te({...nt,isLoading:de}):C.isValidElement(Te)?fe=C.cloneElement(Te,nt):de?fe=ip.spinner():(er=>er in ip)(se)&&(fe=ip[se](nt))),fe}(t),V=!!k||!l,W={closeToast:f,type:u,theme:ie};let G=null;return o===!1||(G=pn(o)?o(W):C.isValidElement(o)?C.cloneElement(o,W):function(te){let{closeToast:H,theme:se,ariaLabel:de="close"}=te;return m.createElement("button",{className:`Toastify__close-button Toastify__close-button--${se}`,type:"button",onClick:Te=>{Te.stopPropagation(),H(Te)},"aria-label":de},m.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},m.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(W)),m.createElement(p,{isIn:N,done:P,position:y,preventExitTransition:n,nodeRef:r,playToast:s},m.createElement("div",{id:S,onClick:c,"data-in":N,className:ce,...i,style:x,ref:r},m.createElement("div",{...N&&{role:O},className:pn(_)?_({type:u}):Si("Toastify__toast-body",_),style:w},j!=null&&m.createElement("div",{className:Si("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!D})},j),m.createElement("div",null,a)),G,m.createElement(HD,{...R&&!V?{key:`pb-${R}`}:{},rtl:b,theme:ie,delay:l,isRunning:e,isIn:N,closeToast:f,hide:d,type:u,style:I,className:T,controlledProgress:V,progress:k||0})))},Mf=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},YD=Nf(Mf("bounce",!0));Nf(Mf("slide",!0));Nf(Mf("zoom"));Nf(Mf("flip"));const QD={position:"top-right",transition:YD,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function XD(t){let e={...QD,...t};const n=t.stacked,[r,i]=C.useState(!0),s=C.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=zD(e),{className:c,style:u,rtl:d,containerId:f}=e;function p(v){const x=Si("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":d});return pn(c)?c({position:v,rtl:d,defaultClassName:x}):Si(x,Lh(c))}function y(){n&&(i(!0),ke.play())}return qD(()=>{if(n){var v;const x=s.current.querySelectorAll('[data-in="true"]'),_=12,w=(v=e.position)==null?void 0:v.includes("top");let T=0,I=0;Array.from(x).reverse().forEach((R,O)=>{const k=R;k.classList.add("Toastify__toast--stacked"),O>0&&(k.dataset.collapsed=`${r}`),k.dataset.pos||(k.dataset.pos=w?"top":"bot");const b=T*(r?.2:1)+(r?0:_*O);k.style.setProperty("--y",`${w?b:-1*b}px`),k.style.setProperty("--g",`${_}`),k.style.setProperty("--s",""+(1-(r?I:0))),T+=k.offsetHeight,I+=.025})}},[r,l,n]),m.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),ke.pause())},onMouseLeave:y},o((v,x)=>{const _=x.length?{...u}:{...u,pointerEvents:"none"};return m.createElement("div",{className:p(v),style:_,key:`container-${v}`},x.map(w=>{let{content:T,props:I}=w;return m.createElement(GD,{...I,stacked:n,collapseAll:y,isIn:a(I.toastId,I.containerId),style:I.style,key:`toast-${I.key}`},T)}))}))}const JD=()=>{};var oE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},j2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new e4;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t4=function(t){const e=U2(t);return j2.encodeByteArray(e,!0)},Md=function(t){return t4(t).replace(/\./g,"")},z2=function(t){try{return j2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=()=>n4().__FIREBASE_DEFAULTS__,i4=()=>{if(typeof process>"u"||typeof oE>"u")return;const t=oE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},s4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z2(t[1]);return e&&JSON.parse(e)},Df=()=>{try{return JD()||r4()||i4()||s4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$2=t=>{var e,n;return(n=(e=Df())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},o4=t=>{const e=$2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},H2=()=>{var t;return(t=Df())==null?void 0:t.config},W2=t=>{var e;return(e=Df())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Md(JSON.stringify(n)),Md(JSON.stringify(o)),""].join(".")}const Ql={};function c4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?t.emulator.push(e):t.prod.push(e);return t}function u4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aE=!1;function q2(t,e){if(typeof window>"u"||typeof document>"u"||!Ma(window.location.host)||Ql[t]===e||Ql[t]||aE)return;Ql[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=c4().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{aE=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=u4(r),p=n("text"),y=document.getElementById(p)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const T=f.element;a(T),u(x,v);const I=c();l(w,_),T.append(w,y,x,I),document.body.appendChild(T)}s?(y.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function d4(){var e;const t=(e=Df())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function p4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g4(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y4(){return!d4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v4(){try{return typeof indexedDB=="object"}catch{return!1}}function _4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="FirebaseError";class Jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w4,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?E4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jr(i,a,r)}}function E4(t,e){return t.replace(x4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const x4=/\{\$([^}]+)}/g;function b4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lE(s)&&lE(o)){if(!Yi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T4(t,e){const n=new k4(t,e);return n.subscribe.bind(n)}class k4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sp),i.error===void 0&&(i.error=sp),i.complete===void 0&&(i.complete=sp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new a4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A4(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C4(t){return t===Ps?void 0:t}function A4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new I4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const R4={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},N4=ye.INFO,M4={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},D4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=M4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nv{constructor(e){this.name=e,this._logLevel=N4,this._logHandler=D4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const O4=(t,e)=>e.some(n=>t instanceof n);let cE,uE;function L4(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V4(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G2=new WeakMap,qg=new WeakMap,Y2=new WeakMap,op=new WeakMap,rv=new WeakMap;function F4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ui(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G2.set(n,t)}).catch(()=>{}),rv.set(e,t),e}function B4(t){if(qg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qg.set(t,e)}let Gg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U4(t){Gg=t(Gg)}function j4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ap(this),e,...n);return Y2.set(r,e.sort?e.sort():[e]),Ui(r)}:V4().includes(t)?function(...e){return t.apply(ap(this),e),Ui(G2.get(this))}:function(...e){return Ui(t.apply(ap(this),e))}}function z4(t){return typeof t=="function"?j4(t):(t instanceof IDBTransaction&&B4(t),O4(t,L4())?new Proxy(t,Gg):t)}function Ui(t){if(t instanceof IDBRequest)return F4(t);if(op.has(t))return op.get(t);const e=z4(t);return e!==t&&(op.set(t,e),rv.set(e,t)),e}const ap=t=>rv.get(t);function $4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ui(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ui(o.result),l.oldVersion,l.newVersion,Ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const H4=["get","getKey","getAll","getAllKeys","count"],W4=["put","add","delete","clear"],lp=new Map;function hE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lp.get(e))return lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=W4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return lp.set(e,s),s}U4(t=>({...t,get:(e,n,r)=>hE(e,n)||t.get(e,n,r),has:(e,n)=>!!hE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yg="@firebase/app",dE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new nv("@firebase/app"),G4="@firebase/app-compat",Y4="@firebase/analytics-compat",Q4="@firebase/analytics",X4="@firebase/app-check-compat",J4="@firebase/app-check",Z4="@firebase/auth",eO="@firebase/auth-compat",tO="@firebase/database",nO="@firebase/data-connect",rO="@firebase/database-compat",iO="@firebase/functions",sO="@firebase/functions-compat",oO="@firebase/installations",aO="@firebase/installations-compat",lO="@firebase/messaging",cO="@firebase/messaging-compat",uO="@firebase/performance",hO="@firebase/performance-compat",dO="@firebase/remote-config",fO="@firebase/remote-config-compat",mO="@firebase/storage",pO="@firebase/storage-compat",gO="@firebase/firestore",yO="@firebase/ai",vO="@firebase/firestore-compat",_O="firebase",wO="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",EO={[Yg]:"fire-core",[G4]:"fire-core-compat",[Q4]:"fire-analytics",[Y4]:"fire-analytics-compat",[J4]:"fire-app-check",[X4]:"fire-app-check-compat",[Z4]:"fire-auth",[eO]:"fire-auth-compat",[tO]:"fire-rtdb",[nO]:"fire-data-connect",[rO]:"fire-rtdb-compat",[iO]:"fire-fn",[sO]:"fire-fn-compat",[oO]:"fire-iid",[aO]:"fire-iid-compat",[lO]:"fire-fcm",[cO]:"fire-fcm-compat",[uO]:"fire-perf",[hO]:"fire-perf-compat",[dO]:"fire-rc",[fO]:"fire-rc-compat",[mO]:"fire-gcs",[pO]:"fire-gcs-compat",[gO]:"fire-fst",[vO]:"fire-fst-compat",[yO]:"fire-vertex","fire-js":"fire-js",[_O]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Map,xO=new Map,Xg=new Map;function fE(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fa(t){const e=t.name;if(Xg.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,t);for(const n of Dd.values())fE(n,t);for(const n of xO.values())fE(n,t);return!0}function iv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new ru("app","Firebase",bO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=wO;function Q2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ji.create("bad-app-name",{appName:String(i)});if(n||(n=H2()),!n)throw ji.create("no-options");const s=Dd.get(i);if(s){if(Yi(n,s.options)&&Yi(r,s.config))return s;throw ji.create("duplicate-app",{appName:i})}const o=new P4(i);for(const l of Xg.values())o.addComponent(l);const a=new TO(n,r,o);return Dd.set(i,a),a}function X2(t=Qg){const e=Dd.get(t);if(!e&&t===Qg&&H2())return Q2();if(!e)throw ji.create("no-app",{appName:t});return e}function zi(t,e,n){let r=EO[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(o.join(" "));return}fa(new no(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="firebase-heartbeat-database",SO=1,Nc="firebase-heartbeat-store";let cp=null;function J2(){return cp||(cp=$4(kO,SO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ji.create("idb-open",{originalErrorMessage:t.message})})),cp}async function IO(t){try{const n=(await J2()).transaction(Nc),r=await n.objectStore(Nc).get(Z2(t));return await n.done,r}catch(e){if(e instanceof Jr)Hr.warn(e.message);else{const n=ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function mE(t,e){try{const r=(await J2()).transaction(Nc,"readwrite");await r.objectStore(Nc).put(e,Z2(t)),await r.done}catch(n){if(n instanceof Jr)Hr.warn(n.message);else{const r=ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function Z2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=1024,AO=30;class PO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>AO){const o=MO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pE(),{heartbeatsToSend:r,unsentEntries:i}=RO(this._heartbeatsCache.heartbeats),s=Md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hr.warn(n),""}}}function pE(){return new Date().toISOString().substring(0,10)}function RO(t,e=CO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v4()?_4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gE(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}function MO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){fa(new no("platform-logger",e=>new K4(e),"PRIVATE")),fa(new no("heartbeat",e=>new PO(e),"PRIVATE")),zi(Yg,dE,t),zi(Yg,dE,"esm2020"),zi("fire-js","")}DO("");var OO="firebase",LO="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(OO,LO,"app");function eI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VO=eI,tI=new ru("auth","Firebase",eI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new nv("@firebase/auth");function FO(t,...e){Od.logLevel<=ye.WARN&&Od.warn(`Auth (${Da}): ${t}`,...e)}function Vh(t,...e){Od.logLevel<=ye.ERROR&&Od.error(`Auth (${Da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw ov(t,...e)}function Qn(t,...e){return ov(t,...e)}function sv(t,e,n){const r={...VO(),[e]:n};return new ru("auth","Firebase",r).create(e,{appName:t.name})}function Fr(t){return sv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ln(t,"argument-error"),sv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ov(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tI.create(t,...e)}function oe(t,e,...n){if(!t)throw ov(e,...n)}function Dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vh(e),new Error(e)}function Wr(t,e){t||Dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function UO(){return yE()==="http:"||yE()==="https:"}function yE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UO()||m4()||"connection"in navigator)?navigator.onLine:!0}function zO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=h4()||p4()}get(){return jO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WO=new su(3e4,6e4);function us(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Zr(t,e,n,r,i={}){return rI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=iu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return f4()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ma(t.emulatorConfig.host)&&(c.credentials="include"),nI.fetch()(await iI(t,t.config.apiHost,n,a),c)})}async function rI(t,e,n){t._canInitEmulator=!1;const r={...$O,...e};try{const i=new qO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ju(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ju(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ju(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sv(t,u,c);Ln(t,u)}}catch(i){if(i instanceof Jr)throw i;Ln(t,"network-request-failed",{message:String(i)})}}async function ou(t,e,n,r,i={}){const s=await Zr(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function iI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?av(t.config,i):`${t.config.apiScheme}://${i}`;return HO.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function KO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),WO.get())})}}function Ju(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qn(t,e,r);return i.customData._tokenResponse=n,i}function vE(t){return t!==void 0&&t.enterprise!==void 0}class GO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YO(t,e){return Zr(t,"GET","/v2/recaptchaConfig",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e){return Zr(t,"POST","/v1/accounts:delete",e)}async function Ld(t,e){return Zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XO(t,e=!1){const n=lt(t),r=await n.getIdToken(e),i=lv(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xl(up(i.auth_time)),issuedAtTime:Xl(up(i.iat)),expirationTime:Xl(up(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function up(t){return Number(t)*1e3}function lv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const i=z2(n);return i?JSON.parse(i):(Vh("Failed to decode base64 JWT payload"),null)}catch(i){return Vh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _E(t){const e=lv(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jr&&JO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t){var d;const e=t.auth,n=await t.getIdToken(),r=await ma(t,Ld(e,{idToken:n}));oe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?sI(i.providerUserInfo):[],o=tL(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Zg(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function eL(t){const e=lt(t);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e){const n=await rI(t,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await iI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ma(t.emulatorConfig.host)&&(l.credentials="include"),nI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rL(t,e){return Zr(t,"POST","/v2/accounts:revokeToken",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=_E(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await nL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Jo;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ZO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ma(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XO(this,e)}reload(){return eL(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await ma(this,QO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:y,stsTokenManager:v}=n;oe(d&&v,e,"internal-error");const x=Jo.fromJSON(this.name,v);oe(typeof d=="string",e,"internal-error"),ui(r,e.name),ui(i,e.name),oe(typeof f=="boolean",e,"internal-error"),oe(typeof p=="boolean",e,"internal-error"),ui(s,e.name),ui(o,e.name),ui(a,e.name),ui(l,e.name),ui(c,e.name),ui(u,e.name);const _=new qn({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(_.providerData=y.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Jo;i.updateFromServerResponse(n);const s=new qn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Jo;a.updateFromIdToken(r);const l=new qn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function Or(t){Wr(t instanceof Function,"Expected a class definition");let e=wE.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oI.type="NONE";const EE=oI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Fh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ld(this.auth,{idToken:e}).catch(()=>{});return n?qn._fromGetAccountInfoResponse(this.auth,n,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zo(Or(EE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Or(EE);const o=Fh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await Ld(e,{idToken:u}).catch(()=>{});if(!f)break;d=await qn._fromGetAccountInfoResponse(e,f,u)}else d=qn._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Zo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Zo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dI(e))return"Blackberry";if(fI(e))return"Webos";if(lI(e))return"Safari";if((e.includes("chrome/")||cI(e))&&!e.includes("edge/"))return"Chrome";if(hI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aI(t=Ht()){return/firefox\//i.test(t)}function lI(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cI(t=Ht()){return/crios\//i.test(t)}function uI(t=Ht()){return/iemobile/i.test(t)}function hI(t=Ht()){return/android/i.test(t)}function dI(t=Ht()){return/blackberry/i.test(t)}function fI(t=Ht()){return/webos/i.test(t)}function cv(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iL(t=Ht()){var e;return cv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sL(){return g4()&&document.documentMode===10}function mI(t=Ht()){return cv(t)||hI(t)||fI(t)||dI(t)||/windows phone/i.test(t)||uI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e=[]){let n;switch(t){case"Browser":n=xE(Ht());break;case"Worker":n=`${xE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e={}){return Zr(t,"GET","/v2/passwordPolicy",us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=6;class cL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bE(this),this.idTokenSubscription=new bE(this),this.beforeStateQueue=new oL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ld(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(Fr(this));const n=e?lt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aL(this),n=new cL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ru("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Or(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&FO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hs(t){return lt(t)}class bE{constructor(e){this.auth=e,this.observer=null,this.addObserver=T4(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hL(t){Of=t}function gI(t){return Of.loadJS(t)}function dL(){return Of.recaptchaEnterpriseScript}function fL(){return Of.gapiScript}function mL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pL{constructor(){this.enterprise=new gL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const yL="recaptcha-enterprise",yI="NO_RECAPTCHA";class vL{constructor(e){this.type=yL,this.auth=hs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{YO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new GO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;vE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(yI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pL().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&vE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dL();l.length!==0&&(l+=a),gI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function TE(t,e,n,r=!1,i=!1){const s=new vL(t);let o;if(i)o=yI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ey(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await TE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e){const n=iv(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yi(s,e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}function wL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EL(t,e,n){const r=hs(t);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=vI(e),{host:o,port:a}=xL(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Yi(c,r.config.emulator)&&Yi(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ma(o)?(K2(`${s}//${o}${l}`),q2("Auth",!0)):bL()}function vI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xL(t){const e=vI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kE(o)}}}function kE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,n){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function TL(t,e){return Zr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){return ou(t,"POST","/v1/accounts:signInWithPassword",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e){return ou(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}async function IL(t,e){return ou(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends uv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Mc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ey(e,n,"signInWithPassword",kL);case"emailLink":return SL(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ey(e,r,"signUpPassword",TL);case"emailLink":return IL(e,{idToken:n,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e){return ou(t,"POST","/v1/accounts:signInWithIdp",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="http://localhost";class ro extends uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ro(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ea(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ea(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ea(e,n)}buildRequest(){const e={requestUri:CL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PL(t){const e=Il(Cl(t)).link,n=e?Il(Cl(e)).deep_link_id:null,r=Il(Cl(t)).deep_link_id;return(r?Il(Cl(r)).link:null)||r||n||e||t}class hv{constructor(e){const n=Il(Cl(e)),r=n.apiKey??null,i=n.oobCode??null,s=AL(n.mode??null);oe(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PL(e);try{return new hv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.providerId=Oa.PROVIDER_ID}static credential(e,n){return Mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=hv.parseLink(n);return oe(r,"argument-error"),Mc._fromEmailAndCode(e,r.code,r.tenantId)}}Oa.PROVIDER_ID="password";Oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends dv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends au{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends au{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends au{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e){return ou(t,"POST","/v1/accounts:signUp",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qn._fromIdTokenResponse(e,r,i),o=SE(r);return new io({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=SE(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function SE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Jr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fd(e,n,r,i)}}function _I(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fd._fromErrorAndOperation(t,s,e,r):s})}async function NL(t,e,n=!1){const r=await ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e,n=!1){const{auth:r}=t;if(fn(r.app))return Promise.reject(Fr(r));const i="reauthenticate";try{const s=await ma(t,_I(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=lv(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(t,e,n=!1){if(fn(t.app))return Promise.reject(Fr(t));const r="signIn",i=await _I(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function DL(t,e){return wI(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OL(t,e,n){if(fn(t.app))return Promise.reject(Fr(t));const r=hs(t),o=await ey(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&EI(t),l}),a=await io._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function LL(t,e,n){return fn(t.app)?Promise.reject(Fr(t)):DL(lt(t),Oa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){return Zr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=lt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ma(r,VL(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function BL(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function UL(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function jL(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function xI(t){return lt(t).signOut()}const Bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bd,"1"),this.storage.removeItem(Bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=1e3,$L=10;class TI extends bI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$L):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const HL=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends bI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kI.type="SESSION";const SI=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await WL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=fv("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function qL(t){fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function GL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function QL(){return II()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebaseLocalStorageDb",XL=1,Ud="firebaseLocalStorage",AI="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vf(t,e){return t.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function JL(){const t=indexedDB.deleteDatabase(CI);return new lu(t).toPromise()}function ty(){const t=indexedDB.open(CI,XL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ud,{keyPath:AI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await JL(),e(await ty()))})})}async function IE(t,e,n){const r=Vf(t,!0).put({[AI]:e,value:n});return new lu(r).toPromise()}async function ZL(t,e){const n=Vf(t,!1).get(e),r=await new lu(n).toPromise();return r===void 0?null:r.value}function CE(t,e){const n=Vf(t,!0).delete(e);return new lu(n).toPromise()}const eV=800,tV=3;class PI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ty(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return II()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(QL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await GL(),!this.activeServiceWorker)return;this.sender=new KL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ty();return await IE(e,Bd,"1"),await CE(e,Bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vf(i,!1).getAll();return new lu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PI.type="LOCAL";const nV=PI;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){return e?Or(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends uv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rV(t){return wI(t.auth,new mv(t),t.bypassAuthState)}function iV(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),ML(n,new mv(t),t.bypassAuthState)}async function sV(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),NL(n,new mv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rV;case"linkViaPopup":case"linkViaRedirect":return sV;case"reauthViaPopup":case"reauthViaRedirect":return iV;default:Ln(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new su(2e3,1e4);async function aV(t,e,n){if(fn(t.app))return Promise.reject(Qn(t,"operation-not-supported-in-this-environment"));const r=hs(t);BO(t,e,dv);const i=RI(r,n);return new Vs(r,"signInViaPopup",e,i).executeNotNull()}class Vs extends NI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oV.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="pendingRedirect",Bh=new Map;class cV extends NI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const r=await uV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uV(t,e){const n=fV(e),r=dV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function hV(t,e){Bh.set(t._key(),e)}function dV(t){return Or(t._redirectPersistence)}function fV(t){return Fh(lV,t.config.apiKey,t.name)}async function mV(t,e,n=!1){if(fn(t.app))return Promise.reject(Fr(t));const r=hs(t),i=RI(r,e),o=await new cV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=10*60*1e3;class gV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MI(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pV&&this.cachedEventUids.clear(),this.cachedEventUids.has(AE(e))}saveEventToCache(e){this.cachedEventUids.add(AE(e)),this.lastProcessedEventTime=Date.now()}}function AE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e={}){return Zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wV=/^https?/;async function EV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vV(t);for(const n of e)try{if(xV(n))return}catch{}Ln(t,"unauthorized-domain")}function xV(t){const e=Jg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wV.test(n))return!1;if(_V.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new su(3e4,6e4);function PE(){const t=fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TV(t){return new Promise((e,n)=>{var i,s,o;function r(){PE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PE(),n(Qn(t,"network-request-failed"))},timeout:bV.get()})}if((s=(i=fr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=fr().gapi)!=null&&o.load)r();else{const a=mL("iframefcb");return fr()[a]=()=>{gapi.load?r():n(Qn(t,"network-request-failed"))},gI(`${fL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function kV(t){return Uh=Uh||TV(t),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new su(5e3,15e3),IV="__/auth/iframe",CV="emulator/auth/iframe",AV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RV(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?av(e,CV):`https://${t.config.authDomain}/${IV}`,r={apiKey:e.apiKey,appName:t.name,v:Da},i=PV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${iu(r).slice(1)}`}async function NV(t){const e=await kV(t),n=fr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:RV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),a=fr().setTimeout(()=>{s(o)},SV.get());function l(){fr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DV=500,OV=600,LV="_blank",VV="http://localhost";class RE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FV(t,e,n,r=DV,i=OV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...MV,width:r.toString(),height:i.toString(),top:s,left:o},c=Ht().toLowerCase();n&&(a=cI(c)?LV:n),aI(c)&&(e=e||VV,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(iL(c)&&a!=="_self")return BV(e||"",a),new RE(null);const d=window.open(e||"",a,u);oe(d,t,"popup-blocked");try{d.focus()}catch{}return new RE(d)}function BV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="__/auth/handler",jV="emulator/auth/handler",zV=encodeURIComponent("fac");async function NE(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Da,eventId:i};if(e instanceof dv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",b4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof au){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${zV}=${encodeURIComponent(l)}`:"";return`${$V(t)}?${iu(a).slice(1)}${c}`}function $V({config:t}){return t.emulator?av(t,jV):`https://${t.authDomain}/${UV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class HV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SI,this._completeRedirectFn=mV,this._overrideRedirectResult=hV}async _openPopup(e,n,r,i){var o;Wr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await NE(e,n,r,Jg(),i);return FV(e,s,fv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await NE(e,n,r,Jg(),i);return qL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NV(e),r=new gV(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hp,{type:hp},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[hp];s!==void 0&&n(!!s),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mI()||lI()||cv()}}const WV=HV;var ME="@firebase/auth",DE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GV(t){fa(new no("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pI(t)},c=new uL(r,i,s,l);return wL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fa(new no("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(r=>new KV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(ME,DE,qV(t)),zi(ME,DE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=5*60,QV=W2("authIdTokenMaxAge")||YV;let OE=null;const XV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QV)return;const i=n==null?void 0:n.token;OE!==i&&(OE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JV(t=X2()){const e=iv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_L(t,{popupRedirectResolver:WV,persistence:[nV,HL,SI]}),r=W2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=XV(s.toString());UL(n,o,()=>o(n.currentUser)),BL(n,a=>o(a))}}const i=$2("auth");return i&&EL(n,`http://${i}`),n}function ZV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Qn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ZV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GV("Browser");var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,DI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,b){function S(){}S.prototype=b.prototype,k.F=b.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(P,N,D){for(var M=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)M[ie-2]=arguments[ie];return b.prototype[N].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,b,S){S||(S=0);const P=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)P[N]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(N=0;N<16;++N)P[N]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=k.g[0],S=k.g[1],N=k.g[2];let D=k.g[3],M;M=b+(D^S&(N^D))+P[0]+3614090360&4294967295,b=S+(M<<7&4294967295|M>>>25),M=D+(N^b&(S^N))+P[1]+3905402710&4294967295,D=b+(M<<12&4294967295|M>>>20),M=N+(S^D&(b^S))+P[2]+606105819&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(b^N&(D^b))+P[3]+3250441966&4294967295,S=N+(M<<22&4294967295|M>>>10),M=b+(D^S&(N^D))+P[4]+4118548399&4294967295,b=S+(M<<7&4294967295|M>>>25),M=D+(N^b&(S^N))+P[5]+1200080426&4294967295,D=b+(M<<12&4294967295|M>>>20),M=N+(S^D&(b^S))+P[6]+2821735955&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(b^N&(D^b))+P[7]+4249261313&4294967295,S=N+(M<<22&4294967295|M>>>10),M=b+(D^S&(N^D))+P[8]+1770035416&4294967295,b=S+(M<<7&4294967295|M>>>25),M=D+(N^b&(S^N))+P[9]+2336552879&4294967295,D=b+(M<<12&4294967295|M>>>20),M=N+(S^D&(b^S))+P[10]+4294925233&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(b^N&(D^b))+P[11]+2304563134&4294967295,S=N+(M<<22&4294967295|M>>>10),M=b+(D^S&(N^D))+P[12]+1804603682&4294967295,b=S+(M<<7&4294967295|M>>>25),M=D+(N^b&(S^N))+P[13]+4254626195&4294967295,D=b+(M<<12&4294967295|M>>>20),M=N+(S^D&(b^S))+P[14]+2792965006&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(b^N&(D^b))+P[15]+1236535329&4294967295,S=N+(M<<22&4294967295|M>>>10),M=b+(N^D&(S^N))+P[1]+4129170786&4294967295,b=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(b^S))+P[6]+3225465664&4294967295,D=b+(M<<9&4294967295|M>>>23),M=N+(b^S&(D^b))+P[11]+643717713&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^b&(N^D))+P[0]+3921069994&4294967295,S=N+(M<<20&4294967295|M>>>12),M=b+(N^D&(S^N))+P[5]+3593408605&4294967295,b=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(b^S))+P[10]+38016083&4294967295,D=b+(M<<9&4294967295|M>>>23),M=N+(b^S&(D^b))+P[15]+3634488961&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^b&(N^D))+P[4]+3889429448&4294967295,S=N+(M<<20&4294967295|M>>>12),M=b+(N^D&(S^N))+P[9]+568446438&4294967295,b=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(b^S))+P[14]+3275163606&4294967295,D=b+(M<<9&4294967295|M>>>23),M=N+(b^S&(D^b))+P[3]+4107603335&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^b&(N^D))+P[8]+1163531501&4294967295,S=N+(M<<20&4294967295|M>>>12),M=b+(N^D&(S^N))+P[13]+2850285829&4294967295,b=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(b^S))+P[2]+4243563512&4294967295,D=b+(M<<9&4294967295|M>>>23),M=N+(b^S&(D^b))+P[7]+1735328473&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^b&(N^D))+P[12]+2368359562&4294967295,S=N+(M<<20&4294967295|M>>>12),M=b+(S^N^D)+P[5]+4294588738&4294967295,b=S+(M<<4&4294967295|M>>>28),M=D+(b^S^N)+P[8]+2272392833&4294967295,D=b+(M<<11&4294967295|M>>>21),M=N+(D^b^S)+P[11]+1839030562&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^b)+P[14]+4259657740&4294967295,S=N+(M<<23&4294967295|M>>>9),M=b+(S^N^D)+P[1]+2763975236&4294967295,b=S+(M<<4&4294967295|M>>>28),M=D+(b^S^N)+P[4]+1272893353&4294967295,D=b+(M<<11&4294967295|M>>>21),M=N+(D^b^S)+P[7]+4139469664&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^b)+P[10]+3200236656&4294967295,S=N+(M<<23&4294967295|M>>>9),M=b+(S^N^D)+P[13]+681279174&4294967295,b=S+(M<<4&4294967295|M>>>28),M=D+(b^S^N)+P[0]+3936430074&4294967295,D=b+(M<<11&4294967295|M>>>21),M=N+(D^b^S)+P[3]+3572445317&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^b)+P[6]+76029189&4294967295,S=N+(M<<23&4294967295|M>>>9),M=b+(S^N^D)+P[9]+3654602809&4294967295,b=S+(M<<4&4294967295|M>>>28),M=D+(b^S^N)+P[12]+3873151461&4294967295,D=b+(M<<11&4294967295|M>>>21),M=N+(D^b^S)+P[15]+530742520&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^b)+P[2]+3299628645&4294967295,S=N+(M<<23&4294967295|M>>>9),M=b+(N^(S|~D))+P[0]+4096336452&4294967295,b=S+(M<<6&4294967295|M>>>26),M=D+(S^(b|~N))+P[7]+1126891415&4294967295,D=b+(M<<10&4294967295|M>>>22),M=N+(b^(D|~S))+P[14]+2878612391&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~b))+P[5]+4237533241&4294967295,S=N+(M<<21&4294967295|M>>>11),M=b+(N^(S|~D))+P[12]+1700485571&4294967295,b=S+(M<<6&4294967295|M>>>26),M=D+(S^(b|~N))+P[3]+2399980690&4294967295,D=b+(M<<10&4294967295|M>>>22),M=N+(b^(D|~S))+P[10]+4293915773&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~b))+P[1]+2240044497&4294967295,S=N+(M<<21&4294967295|M>>>11),M=b+(N^(S|~D))+P[8]+1873313359&4294967295,b=S+(M<<6&4294967295|M>>>26),M=D+(S^(b|~N))+P[15]+4264355552&4294967295,D=b+(M<<10&4294967295|M>>>22),M=N+(b^(D|~S))+P[6]+2734768916&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~b))+P[13]+1309151649&4294967295,S=N+(M<<21&4294967295|M>>>11),M=b+(N^(S|~D))+P[4]+4149444226&4294967295,b=S+(M<<6&4294967295|M>>>26),M=D+(S^(b|~N))+P[11]+3174756917&4294967295,D=b+(M<<10&4294967295|M>>>22),M=N+(b^(D|~S))+P[2]+718787259&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~b))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+b&4294967295,k.g[1]=k.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.v=function(k,b){b===void 0&&(b=k.length);const S=b-this.blockSize,P=this.C;let N=this.h,D=0;for(;D<b;){if(N==0)for(;D<=S;)i(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<b;)if(P[N++]=k.charCodeAt(D++),N==this.blockSize){i(this,P),N=0;break}}else for(;D<b;)if(P[N++]=k[D++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=b},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var b=1;b<k.length-8;++b)k[b]=0;b=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=b&255,b/=256;for(this.v(k),k=Array(16),b=0,S=0;S<4;++S)for(let P=0;P<32;P+=8)k[b++]=this.g[S]>>>P&255;return k};function s(k,b){var S=a;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=b(k)}function o(k,b){this.h=b;const S=[];let P=!0;for(let N=k.length-1;N>=0;N--){const D=k[N]|0;P&&D==b||(S[N]=D,P=!1)}this.g=S}var a={};function l(k){return-128<=k&&k<128?s(k,function(b){return new o([b|0],b<0?-1:0)}):new o([k|0],k<0?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return d;if(k<0)return x(c(-k));const b=[];let S=1;for(let P=0;k>=S;P++)b[P]=k/S|0,S*=4294967296;return new o(b,0)}function u(k,b){if(k.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(k.charAt(0)=="-")return x(u(k.substring(1),b));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(b,8));let P=d;for(let D=0;D<k.length;D+=8){var N=Math.min(8,k.length-D);const M=parseInt(k.substring(D,D+N),b);N<8?(N=c(Math.pow(b,N)),P=P.j(N).add(c(M))):(P=P.j(S),P=P.add(c(M)))}return P}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();let k=0,b=1;for(let S=0;S<this.g.length;S++){const P=this.i(S);k+=(P>=0?P:4294967296+P)*b,b*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(y(this))return"0";if(v(this))return"-"+x(this).toString(k);const b=c(Math.pow(k,6));var S=this;let P="";for(;;){const N=I(S,b).g;S=_(S,N.j(b));let D=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=N,y(S))return D+P;for(;D.length<6;)D="0"+D;P=D+P}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function y(k){if(k.h!=0)return!1;for(let b=0;b<k.g.length;b++)if(k.g[b]!=0)return!1;return!0}function v(k){return k.h==-1}t.l=function(k){return k=_(this,k),v(k)?-1:y(k)?0:1};function x(k){const b=k.g.length,S=[];for(let P=0;P<b;P++)S[P]=~k.g[P];return new o(S,~k.h).add(f)}t.abs=function(){return v(this)?x(this):this},t.add=function(k){const b=Math.max(this.g.length,k.g.length),S=[];let P=0;for(let N=0;N<=b;N++){let D=P+(this.i(N)&65535)+(k.i(N)&65535),M=(D>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);P=M>>>16,D&=65535,M&=65535,S[N]=M<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(k,b){return k.add(x(b))}t.j=function(k){if(y(this)||y(k))return d;if(v(this))return v(k)?x(this).j(x(k)):x(x(this).j(k));if(v(k))return x(this.j(x(k)));if(this.l(p)<0&&k.l(p)<0)return c(this.m()*k.m());const b=this.g.length+k.g.length,S=[];for(var P=0;P<2*b;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<k.g.length;N++){const D=this.i(P)>>>16,M=this.i(P)&65535,ie=k.i(N)>>>16,ee=k.i(N)&65535;S[2*P+2*N]+=M*ee,w(S,2*P+2*N),S[2*P+2*N+1]+=D*ee,w(S,2*P+2*N+1),S[2*P+2*N+1]+=M*ie,w(S,2*P+2*N+1),S[2*P+2*N+2]+=D*ie,w(S,2*P+2*N+2)}for(k=0;k<b;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=b;k<2*b;k++)S[k]=0;return new o(S,0)};function w(k,b){for(;(k[b]&65535)!=k[b];)k[b+1]+=k[b]>>>16,k[b]&=65535,b++}function T(k,b){this.g=k,this.h=b}function I(k,b){if(y(b))throw Error("division by zero");if(y(k))return new T(d,d);if(v(k))return b=I(x(k),b),new T(x(b.g),x(b.h));if(v(b))return b=I(k,x(b)),new T(x(b.g),b.h);if(k.g.length>30){if(v(k)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var S=f,P=b;P.l(k)<=0;)S=R(S),P=R(P);var N=O(S,1),D=O(P,1);for(P=O(P,2),S=O(S,2);!y(P);){var M=D.add(P);M.l(k)<=0&&(N=N.add(S),D=M),P=O(P,1),S=O(S,1)}return b=_(k,N.j(b)),new T(N,b)}for(N=d;k.l(b)>=0;){for(S=Math.max(1,Math.floor(k.m()/b.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),D=c(S),M=D.j(b);v(M)||M.l(k)>0;)S-=P,D=c(S),M=D.j(b);y(D)&&(D=f),N=N.add(D),k=_(k,M)}return new T(N,k)}t.B=function(k){return I(this,k).h},t.and=function(k){const b=Math.max(this.g.length,k.g.length),S=[];for(let P=0;P<b;P++)S[P]=this.i(P)&k.i(P);return new o(S,this.h&k.h)},t.or=function(k){const b=Math.max(this.g.length,k.g.length),S=[];for(let P=0;P<b;P++)S[P]=this.i(P)|k.i(P);return new o(S,this.h|k.h)},t.xor=function(k){const b=Math.max(this.g.length,k.g.length),S=[];for(let P=0;P<b;P++)S[P]=this.i(P)^k.i(P);return new o(S,this.h^k.h)};function R(k){const b=k.g.length+1,S=[];for(let P=0;P<b;P++)S[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(S,k.h)}function O(k,b){const S=b>>5;b%=32;const P=k.g.length-S,N=[];for(let D=0;D<P;D++)N[D]=b>0?k.i(D+S)>>>b|k.i(D+S+1)<<32-b:k.i(D+S);return new o(N,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,DI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,$i=o}).apply(typeof LE<"u"?LE:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OI,Al,LI,jh,ny,VI,FI,BI;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<h.length;++g){var E=h[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var L=h[A];if(!(L in E))break e;E=E[L]}h=h[h.length-1],A=E[h],g=g(A),g!=A&&g!=null&&e(E,h,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(g){var E=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&E.push([A,g[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function l(h,g,E){return h.call.apply(h.bind,arguments)}function c(h,g,E){return c=l,c.apply(null,arguments)}function u(h,g){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function d(h,g){function E(){}E.prototype=g.prototype,h.Z=g.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,L,F){for(var q=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)q[pe-2]=arguments[pe];return g.prototype[L].apply(A,q)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const g=h.length;if(g>0){const E=Array(g);for(let A=0;A<g;A++)E[A]=h[A];return E}return[]}function y(h,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var E=typeof L;if(E=E!="object"?E:L?Array.isArray(L)?"array":E:"null",E=="array"||E=="object"&&typeof L.length=="number"){E=h.length||0;const F=L.length||0;h.length=E+F;for(let q=0;q<F;q++)h[E+q]=L[q]}else h.push(L)}}class v{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(h){o.setTimeout(()=>{throw h},0)}function _(){var h=k;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class w{constructor(){this.h=this.g=null}add(g,E){const A=T.get();A.set(g,E),this.h?this.h.next=A:this.g=A,this.h=A}}var T=new v(()=>new I,h=>h.reset());class I{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let R,O=!1,k=new w,b=()=>{const h=Promise.resolve(void 0);R=()=>{h.then(S)}};function S(){for(var h;h=_();){try{h.h.call(h.g)}catch(E){x(E)}var g=T;g.j(h),g.h<100&&(g.h++,h.next=g.g,g.g=h)}O=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};o.addEventListener("test",E,g),o.removeEventListener("test",E,g)}catch{}return h}();function M(h){return/^[\s\xa0]*$/.test(h)}function ie(h,g){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,g)}d(ie,N),ie.prototype.init=function(h,g){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget,g||(E=="mouseover"?g=h.fromElement:E=="mouseout"&&(g=h.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),ce=0;function j(h,g,E,A,L){this.listener=h,this.proxy=null,this.src=g,this.type=E,this.capture=!!A,this.ha=L,this.key=++ce,this.da=this.fa=!1}function V(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function W(h,g,E){for(const A in h)g.call(E,h[A],A,h)}function G(h,g){for(const E in h)g.call(void 0,h[E],E,h)}function te(h){const g={};for(const E in h)g[E]=h[E];return g}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(h,g){let E,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(E in A)h[E]=A[E];for(let F=0;F<H.length;F++)E=H[F],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,g,E,A,L){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const q=fe(h,g,A,L);return q>-1?(g=h[q],E||(g.fa=!1)):(g=new j(g,this.src,F,!!A,L),g.fa=E,h.push(g)),g};function Te(h,g){const E=g.type;if(E in h.g){var A=h.g[E],L=Array.prototype.indexOf.call(A,g,void 0),F;(F=L>=0)&&Array.prototype.splice.call(A,L,1),F&&(V(g),h.g[E].length==0&&(delete h.g[E],h.h--))}}function fe(h,g,E,A){for(let L=0;L<h.length;++L){const F=h[L];if(!F.da&&F.listener==g&&F.capture==!!E&&F.ha==A)return L}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),er={};function xr(h,g,E,A,L){if(Array.isArray(g)){for(let F=0;F<g.length;F++)xr(h,g[F],E,A,L);return null}return E=wu(E),h&&h[ee]?h.J(g,E,a(A)?!!A.capture:!1,L):me(h,g,E,!1,A,L)}function me(h,g,E,A,L,F){if(!g)throw Error("Invalid event type");const q=a(L)?!!L.capture:!!L;let pe=Wa(h);if(pe||(h[nt]=pe=new de(h)),E=pe.add(g,E,A,q,F),E.proxy)return E;if(A=vt(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)D||(L=q),L===void 0&&(L=!1),h.addEventListener(g.toString(),A,L);else if(h.attachEvent)h.attachEvent(gs(g.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function vt(){function h(E){return g.call(h.src,h.listener,E)}const g=ni;return h}function br(h,g,E,A,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)br(h,g[F],E,A,L);else A=a(A)?!!A.capture:!!A,E=wu(E),h&&h[ee]?(h=h.i,F=String(g).toString(),F in h.g&&(g=h.g[F],E=fe(g,E,A,L),E>-1&&(V(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete h.g[F],h.h--)))):h&&(h=Wa(h))&&(g=h.g[g.toString()],h=-1,g&&(h=fe(g,E,A,L)),(E=h>-1?g[h]:null)&&ti(E))}function ti(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[ee])Te(g.i,h);else{var E=h.type,A=h.proxy;g.removeEventListener?g.removeEventListener(E,A,h.capture):g.detachEvent?g.detachEvent(gs(E),A):g.addListener&&g.removeListener&&g.removeListener(A),(E=Wa(g))?(Te(E,h),E.h==0&&(E.src=null,g[nt]=null)):V(h)}}}function gs(h){return h in er?er[h]:er[h]="on"+h}function ni(h,g){if(h.da)h=!0;else{g=new ie(g,this);const E=h.listener,A=h.ha||h.src;h.fa&&ti(h),h=E.call(A,g)}return h}function Wa(h){return h=h[nt],h instanceof de?h:null}var Ka="__closure_events_fn_"+(Math.random()*1e9>>>0);function wu(h){return typeof h=="function"?h:(h[Ka]||(h[Ka]=function(g){return h.handleEvent(g)}),h[Ka])}function ct(){P.call(this),this.i=new de(this),this.M=this,this.G=null}d(ct,P),ct.prototype[ee]=!0,ct.prototype.removeEventListener=function(h,g,E,A){br(this,h,g,E,A)};function _t(h,g){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=g.type||g,typeof g=="string")g=new N(g,h);else if(g instanceof N)g.target=g.target||h;else{var L=g;g=new N(A,h),se(g,L)}L=!0;let F,q;if(E)for(q=E.length-1;q>=0;q--)F=g.g=E[q],L=$(F,A,!0,g)&&L;if(F=g.g=h,L=$(F,A,!0,g)&&L,L=$(F,A,!1,g)&&L,E)for(q=0;q<E.length;q++)F=g.g=E[q],L=$(F,A,!1,g)&&L}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var h=this.i;for(const g in h.g){const E=h.g[g];for(let A=0;A<E.length;A++)V(E[A]);delete h.g[g],h.h--}}this.G=null},ct.prototype.J=function(h,g,E,A){return this.i.add(String(h),g,!1,E,A)},ct.prototype.K=function(h,g,E,A){return this.i.add(String(h),g,!0,E,A)};function $(h,g,E,A){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let F=0;F<g.length;++F){const q=g[F];if(q&&!q.da&&q.capture==E){const pe=q.listener,ut=q.ha||q.src;q.fa&&Te(h.i,q),L=pe.call(ut,A)!==!1&&L}}return L&&!A.defaultPrevented}function Q(h,g){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=c(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(h,g||0)}function re(h){h.g=Q(()=>{h.g=null,h.i&&(h.i=!1,re(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class Ae extends P{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tt(h){P.call(this),this.h=h,this.g={}}d(Tt,P);var tr=[];function Eu(h){W(h.g,function(g,E){this.g.hasOwnProperty(E)&&ti(g)},h),h.g={}}Tt.prototype.N=function(){Tt.Z.N.call(this),Eu(this)},Tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qa=o.JSON.stringify,YR=o.JSON.parse,QR=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Q_(){}function X_(){}var Ga={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pm(){N.call(this,"d")}d(pm,N);function gm(){N.call(this,"c")}d(gm,N);var ys={},J_=null;function xu(){return J_=J_||new ct}ys.Ia="serverreachability";function Z_(h){N.call(this,ys.Ia,h)}d(Z_,N);function Ya(h){const g=xu();_t(g,new Z_(g))}ys.STAT_EVENT="statevent";function e1(h,g){N.call(this,ys.STAT_EVENT,h),this.stat=g}d(e1,N);function Wt(h){const g=xu();_t(g,new e1(g,h))}ys.Ja="timingevent";function t1(h,g){N.call(this,ys.Ja,h),this.size=g}d(t1,N);function Qa(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},g)}function Xa(){this.g=!0}Xa.prototype.ua=function(){this.g=!1};function XR(h,g,E,A,L,F){h.info(function(){if(h.g)if(F){var q="",pe=F.split("&");for(let Pe=0;Pe<pe.length;Pe++){var ut=pe[Pe].split("=");if(ut.length>1){const wt=ut[0];ut=ut[1];const rr=wt.split("_");q=rr.length>=2&&rr[1]=="type"?q+(wt+"="+ut+"&"):q+(wt+"=redacted&")}}}else q=null;else q=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+E+`
`+q})}function JR(h,g,E,A,L,F,q){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+E+`
`+F+" "+q})}function yo(h,g,E,A){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+eN(h,E)+(A?" "+A:"")})}function ZR(h,g){h.info(function(){return"TIMEOUT: "+g})}Xa.prototype.info=function(){};function eN(h,g){if(!h.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var E=F[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let q=1;q<A.length;q++)A[q]=""}}}}return qa(F)}catch{return g}}var bu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},n1={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},r1;function ym(){}d(ym,Q_),ym.prototype.g=function(){return new XMLHttpRequest},r1=new ym;function Ja(h){return encodeURIComponent(String(h))}function tN(h){var g=1;h=h.split(":");const E=[];for(;g>0&&h.length;)E.push(h.shift()),g--;return h.length&&E.push(h.join(":")),E}function ri(h,g,E,A){this.j=h,this.i=g,this.l=E,this.S=A||1,this.V=new Tt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new i1}function i1(){this.i=null,this.g="",this.h=!1}var s1={},vm={};function _m(h,g,E){h.M=1,h.A=ku(nr(g)),h.u=E,h.R=!0,o1(h,null)}function o1(h,g){h.F=Date.now(),Tu(h),h.B=nr(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),_1(E.i,"t",A),h.C=0,E=h.j.L,h.h=new i1,h.g=V1(h.j,E?g:null,!h.u),h.P>0&&(h.O=new Ae(c(h.Y,h,h.g),h.P)),g=h.V,E=h.g,A=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(tr[0]=L.toString()),L=tr);for(let F=0;F<L.length;F++){const q=xr(E,L[F],A||g.handleEvent,!1,g.h||g);if(!q)break;g.g[q.key]=q}g=h.J?te(h.J):{},h.u?(h.v||(h.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,g)):(h.v="GET",h.g.ea(h.B,h.v,null,g)),Ya(),XR(h.i,h.v,h.B,h.l,h.S,h.u)}ri.prototype.ba=function(h){h=h.target;const g=this.O;g&&oi(h)==3?g.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)e:{const pe=oi(this.g),ut=this.g.ya(),Pe=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||S1(this.g)))){this.K||pe!=4||ut==7||(ut==8||Pe<=0?Ya(3):Ya(2)),wm(this);var g=this.g.ca();this.X=g;var E=nN(this);if(this.o=g==200,JR(this.i,this.v,this.B,this.l,this.S,pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var F=A;break t}}F=null}if(h=F)yo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Em(this,h);else{this.o=!1,this.m=3,Wt(12),vs(this),Za(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=rN(this,E),wt==vm){pe==4&&(this.m=4,Wt(14),h=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==s1){this.m=4,Wt(15),yo(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else yo(this.i,this.l,wt,null),Em(this,wt);if(a1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||E.length!=0||this.h.h||(this.m=1,Wt(16),h=!1),this.o=this.o&&h,!h)yo(this.i,this.l,E,"[Invalid Chunked Response]"),vs(this),Za(this);else if(E.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Am(q),q.P=!0,Wt(11))}}else yo(this.i,this.l,E,null),Em(this,E);pe==4&&vs(this),this.o&&!this.K&&(pe==4?M1(this.j,this):(this.o=!1,Tu(this)))}else yN(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),vs(this),Za(this)}}}catch{}finally{}};function nN(h){if(!a1(h))return h.g.la();const g=S1(h.g);if(g==="")return"";let E="";const A=g.length,L=oi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return vs(h),Za(h),"";h.h.i=new o.TextDecoder}for(let F=0;F<A;F++)h.h.h=!0,E+=h.h.i.decode(g[F],{stream:!(L&&F==A-1)});return g.length=0,h.h.g+=E,h.C=0,h.h.g}function a1(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function rN(h,g){var E=h.C,A=g.indexOf(`
`,E);return A==-1?vm:(E=Number(g.substring(E,A)),isNaN(E)?s1:(A+=1,A+E>g.length?vm:(g=g.slice(A,A+E),h.C=A+E,g)))}ri.prototype.cancel=function(){this.K=!0,vs(this)};function Tu(h){h.T=Date.now()+h.H,l1(h,h.H)}function l1(h,g){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Qa(c(h.aa,h),g)}function wm(h){h.D&&(o.clearTimeout(h.D),h.D=null)}ri.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ZR(this.i,this.B),this.M!=2&&(Ya(),Wt(17)),vs(this),this.m=2,Za(this)):l1(this,this.T-h)};function Za(h){h.j.I==0||h.K||M1(h.j,h)}function vs(h){wm(h);var g=h.O;g&&typeof g.dispose=="function"&&g.dispose(),h.O=null,Eu(h.V),h.g&&(g=h.g,h.g=null,g.abort(),g.dispose())}function Em(h,g){try{var E=h.j;if(E.I!=0&&(E.g==h||xm(E.h,h))){if(!h.L&&xm(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Pu(E),Cu(E);else break e;Cm(E),Wt(18)}}else E.xa=L[1],0<E.xa-E.K&&L[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Qa(c(E.Va,E),6e3));h1(E.h)<=1&&E.ta&&(E.ta=void 0)}else ws(E,11)}else if((h.L||E.g==h)&&Pu(E),!M(g))for(L=E.Ba.g.parse(g),g=0;g<L.length;g++){let Pe=L[g];const wt=Pe[0];if(!(wt<=E.K))if(E.K=wt,Pe=Pe[1],E.I==2)if(Pe[0]=="c"){E.M=Pe[1],E.ba=Pe[2];const rr=Pe[3];rr!=null&&(E.ka=rr,E.j.info("VER="+E.ka));const Es=Pe[4];Es!=null&&(E.za=Es,E.j.info("SVER="+E.za));const ai=Pe[5];ai!=null&&typeof ai=="number"&&ai>0&&(A=1.5*ai,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const li=h.g;if(li){const Nu=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nu){var F=A.h;F.g||Nu.indexOf("spdy")==-1&&Nu.indexOf("quic")==-1&&Nu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(bm(F,F.h),F.h=null))}if(A.G){const Pm=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;Pm&&(A.wa=Pm,De(A.J,A.G,Pm))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var q=h;if(A.na=L1(A,A.L?A.ba:null,A.W),q.L){d1(A.h,q);var pe=q,ut=A.O;ut&&(pe.H=ut),pe.D&&(wm(pe),Tu(pe)),A.g=q}else R1(A);E.i.length>0&&Au(E)}else Pe[0]!="stop"&&Pe[0]!="close"||ws(E,7);else E.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?ws(E,7):Im(E):Pe[0]!="noop"&&E.l&&E.l.qa(Pe),E.A=0)}}Ya(4)}catch{}}var iN=class{constructor(h,g){this.g=h,this.map=g}};function c1(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function u1(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function h1(h){return h.h?1:h.g?h.g.size:0}function xm(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function bm(h,g){h.g?h.g.add(g):h.h=g}function d1(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}c1.prototype.cancel=function(){if(this.i=f1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function f1(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const E of h.g.values())g=g.concat(E.G);return g}return p(h.i)}var m1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sN(h,g){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let L,F=null;A>=0?(L=h[E].substring(0,A),F=h[E].substring(A+1)):L=h[E],g(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ii(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;h instanceof ii?(this.l=h.l,el(this,h.j),this.o=h.o,this.g=h.g,tl(this,h.u),this.h=h.h,Tm(this,w1(h.i)),this.m=h.m):h&&(g=String(h).match(m1))?(this.l=!1,el(this,g[1]||"",!0),this.o=nl(g[2]||""),this.g=nl(g[3]||"",!0),tl(this,g[4]),this.h=nl(g[5]||"",!0),Tm(this,g[6]||"",!0),this.m=nl(g[7]||"")):(this.l=!1,this.i=new il(null,this.l))}ii.prototype.toString=function(){const h=[];var g=this.j;g&&h.push(rl(g,p1,!0),":");var E=this.g;return(E||g=="file")&&(h.push("//"),(g=this.o)&&h.push(rl(g,p1,!0),"@"),h.push(Ja(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(rl(E,E.charAt(0)=="/"?lN:aN,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",rl(E,uN)),h.join("")},ii.prototype.resolve=function(h){const g=nr(this);let E=!!h.j;E?el(g,h.j):E=!!h.o,E?g.o=h.o:E=!!h.g,E?g.g=h.g:E=h.u!=null;var A=h.h;if(E)tl(g,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let q=0;q<L.length;){const pe=L[q++];pe=="."?A&&q==L.length&&F.push(""):pe==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&q==L.length&&F.push("")):(F.push(pe),A=!0)}A=F.join("/")}else A=L}return E?g.h=A:E=h.i.toString()!=="",E?Tm(g,w1(h.i)):E=!!h.m,E&&(g.m=h.m),g};function nr(h){return new ii(h)}function el(h,g,E){h.j=E?nl(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function tl(h,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);h.u=g}else h.u=null}function Tm(h,g,E){g instanceof il?(h.i=g,hN(h.i,h.l)):(E||(g=rl(g,cN)),h.i=new il(g,h.l))}function De(h,g,E){h.i.set(g,E)}function ku(h){return De(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function nl(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function rl(h,g,E){return typeof h=="string"?(h=encodeURI(h).replace(g,oN),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function oN(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var p1=/[#\/\?@]/g,aN=/[#\?:]/g,lN=/[#\?]/g,cN=/[#\?@]/g,uN=/#/g;function il(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function _s(h){h.g||(h.g=new Map,h.h=0,h.i&&sN(h.i,function(g,E){h.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=il.prototype,t.add=function(h,g){_s(this),this.i=null,h=vo(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(g),this.h+=1,this};function g1(h,g){_s(h),g=vo(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function y1(h,g){return _s(h),g=vo(h,g),h.g.has(g)}t.forEach=function(h,g){_s(this),this.g.forEach(function(E,A){E.forEach(function(L){h.call(g,L,A,this)},this)},this)};function v1(h,g){_s(h);let E=[];if(typeof g=="string")y1(h,g)&&(E=E.concat(h.g.get(vo(h,g))));else for(h=Array.from(h.g.values()),g=0;g<h.length;g++)E=E.concat(h[g]);return E}t.set=function(h,g){return _s(this),this.i=null,h=vo(this,h),y1(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=v1(this,h),h.length>0?String(h[0]):g):g};function _1(h,g,E){g1(h,g),E.length>0&&(h.i=null,h.g.set(vo(h,g),p(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var E=g[A];const L=Ja(E);E=v1(this,E);for(let F=0;F<E.length;F++){let q=L;E[F]!==""&&(q+="="+Ja(E[F])),h.push(q)}}return this.i=h.join("&")};function w1(h){const g=new il;return g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),g}function vo(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function hN(h,g){g&&!h.j&&(_s(h),h.i=null,h.g.forEach(function(E,A){const L=A.toLowerCase();A!=L&&(g1(this,A),_1(this,L,E))},h)),h.j=g}function dN(h,g){const E=new Xa;if(o.Image){const A=new Image;A.onload=u(si,E,"TestLoadImage: loaded",!0,g,A),A.onerror=u(si,E,"TestLoadImage: error",!1,g,A),A.onabort=u(si,E,"TestLoadImage: abort",!1,g,A),A.ontimeout=u(si,E,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else g(!1)}function fN(h,g){const E=new Xa,A=new AbortController,L=setTimeout(()=>{A.abort(),si(E,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?si(E,"TestPingServer: ok",!0,g):si(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),si(E,"TestPingServer: error",!1,g)})}function si(h,g,E,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(E)}catch{}}function mN(){this.g=new QR}function km(h){this.i=h.Sb||null,this.h=h.ab||!1}d(km,Q_),km.prototype.g=function(){return new Su(this.i,this.h)};function Su(h,g){ct.call(this),this.H=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Su,ct),t=Su.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=g,this.readyState=1,ol(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(g.body=h),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;E1(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function E1(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?sl(this):ol(this),this.readyState==3&&E1(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,sl(this))},t.Na=function(h){this.g&&(this.response=h,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ol(h)}t.setRequestHeader=function(h,g){this.A.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=g.next();return h.join(`\r
`)};function ol(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function x1(h){let g="";return W(h,function(E,A){g+=A,g+=":",g+=E,g+=`\r
`}),g}function Sm(h,g,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=x1(E),typeof h=="string"?E!=null&&Ja(E):De(h,g,E))}function Ke(h){ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ke,ct);var pN=/^https?$/i,gN=["POST","PUT"];t=Ke.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,g,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():r1.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){b1(this,F);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)E.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())E.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(F=>F.toLowerCase()=="content-type"),L=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(gN,g,void 0)>=0)||A||L||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of E)this.g.setRequestHeader(F,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){b1(this,F)}};function b1(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.o=5,T1(h),Iu(h)}function T1(h){h.A||(h.A=!0,_t(h,"complete"),_t(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,_t(this,"complete"),_t(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?k1(this):this.Xa())},t.Xa=function(){k1(this)};function k1(h){if(h.h&&typeof s<"u"){if(h.v&&oi(h)==4)setTimeout(h.Ca.bind(h),0);else if(_t(h,"readystatechange"),oi(h)==4){h.h=!1;try{const F=h.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var A;if(A=F===0){let q=String(h.D).match(m1)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),A=!pN.test(q?q.toLowerCase():"")}E=A}if(E)_t(h,"complete"),_t(h,"success");else{h.o=6;try{var L=oi(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",T1(h)}}finally{Iu(h)}}}}function Iu(h,g){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,g||_t(h,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function oi(h){return h.g?h.g.readyState:0}t.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),YR(g)}};function S1(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function yN(h){const g={};h=(h.g&&oi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(M(h[A]))continue;var E=tN(h[A]);const L=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const F=g[L]||[];g[L]=F,F.push(E)}G(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(h,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||g}function I1(h){this.za=0,this.i=[],this.j=new Xa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=al("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=al("baseRetryDelayMs",5e3,h),this.Za=al("retryDelaySeedMs",1e4,h),this.Ta=al("forwardChannelMaxRetries",2,h),this.va=al("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new c1(h&&h.concurrentRequestLimit),this.Ba=new mN,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=I1.prototype,t.ka=8,t.I=1,t.connect=function(h,g,E,A){Wt(0),this.W=h,this.H=g||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=L1(this,null,this.W),Au(this)};function Im(h){if(C1(h),h.I==3){var g=h.V++,E=nr(h.J);if(De(E,"SID",h.M),De(E,"RID",g),De(E,"TYPE","terminate"),ll(h,E),g=new ri(h,h.j,g),g.M=2,g.A=ku(nr(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=g.A,E=!0),E||(g.g=V1(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Tu(g)}O1(h)}function Cu(h){h.g&&(Am(h),h.g.cancel(),h.g=null)}function C1(h){Cu(h),h.v&&(o.clearTimeout(h.v),h.v=null),Pu(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Au(h){if(!u1(h.h)&&!h.m){h.m=!0;var g=h.Ea;R||b(),O||(R(),O=!0),k.add(g,h),h.D=0}}function vN(h,g){return h1(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=g.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Qa(c(h.Ea,h,g),D1(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new ri(this,this.j,h);let F=this.o;if(this.U&&(F?(F=te(F),se(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=P1(this,L,g),E=nr(this.J),De(E,"RID",h),De(E,"CVER",22),this.G&&De(E,"X-HTTP-Session-Id",this.G),ll(this,E),F&&(this.R?g="headers="+Ja(x1(F))+"&"+g:this.u&&Sm(E,this.u,F)),bm(this.h,L),this.Ra&&De(E,"TYPE","init"),this.S?(De(E,"$req",g),De(E,"SID","null"),L.U=!0,_m(L,E,null)):_m(L,E,g),this.I=2}}else this.I==3&&(h?A1(this,h):this.i.length==0||u1(this.h)||A1(this))};function A1(h,g){var E;g?E=g.l:E=h.V++;const A=nr(h.J);De(A,"SID",h.M),De(A,"RID",E),De(A,"AID",h.K),ll(h,A),h.u&&h.o&&Sm(A,h.u,h.o),E=new ri(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),g&&(h.i=g.G.concat(h.i)),g=P1(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),bm(h.h,E),_m(E,A,g)}function ll(h,g){h.H&&W(h.H,function(E,A){De(g,A,E)}),h.l&&W({},function(E,A){De(g,A,E)})}function P1(h,g,E){E=Math.min(h.i.length,E);const A=h.l?c(h.l.Ka,h.l,h):null;e:{var L=h.i;let pe=-1;for(;;){const ut=["count="+E];pe==-1?E>0?(pe=L[0].g,ut.push("ofs="+pe)):pe=0:ut.push("ofs="+pe);let Pe=!0;for(let wt=0;wt<E;wt++){var F=L[wt].g;const rr=L[wt].map;if(F-=pe,F<0)pe=Math.max(0,L[wt].g-100),Pe=!1;else try{F="req"+F+"_"||"";try{var q=rr instanceof Map?rr:Object.entries(rr);for(const[Es,ai]of q){let li=ai;a(ai)&&(li=qa(ai)),ut.push(F+Es+"="+encodeURIComponent(li))}}catch(Es){throw ut.push(F+"type="+encodeURIComponent("_badmap")),Es}}catch{A&&A(rr)}}if(Pe){q=ut.join("&");break e}}q=void 0}return h=h.i.splice(0,E),g.G=h,q}function R1(h){if(!h.g&&!h.v){h.Y=1;var g=h.Da;R||b(),O||(R(),O=!0),k.add(g,h),h.A=0}}function Cm(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Qa(c(h.Da,h),D1(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,N1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Qa(c(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),Cu(this),N1(this))};function Am(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function N1(h){h.g=new ri(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var g=nr(h.na);De(g,"RID","rpc"),De(g,"SID",h.M),De(g,"AID",h.K),De(g,"CI",h.F?"0":"1"),!h.F&&h.ia&&De(g,"TO",h.ia),De(g,"TYPE","xmlhttp"),ll(h,g),h.u&&h.o&&Sm(g,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=ku(nr(g)),E.u=null,E.R=!0,o1(E,h)}t.Va=function(){this.C!=null&&(this.C=null,Cu(this),Cm(this),Wt(19))};function Pu(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function M1(h,g){var E=null;if(h.g==g){Pu(h),Am(h),h.g=null;var A=2}else if(xm(h.h,g))E=g.G,d1(h.h,g),A=1;else return;if(h.I!=0){if(g.o)if(A==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var L=h.D;A=xu(),_t(A,new t1(A,E)),Au(h)}else R1(h);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&vN(h,g)||A==2&&Cm(h)))switch(E&&E.length>0&&(g=h.h,g.i=g.i.concat(E)),L){case 1:ws(h,5);break;case 4:ws(h,10);break;case 3:ws(h,6);break;default:ws(h,2)}}}function D1(h,g){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*g}function ws(h,g){if(h.j.info("Error code "+g),g==2){var E=c(h.bb,h),A=h.Ua;const L=!A;A=new ii(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||el(A,"https"),ku(A),L?dN(A.toString(),E):fN(A.toString(),E)}else Wt(2);h.I=0,h.l&&h.l.pa(g),O1(h),C1(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function O1(h){if(h.I=0,h.ja=[],h.l){const g=f1(h.h);(g.length!=0||h.i.length!=0)&&(y(h.ja,g),y(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function L1(h,g,E){var A=E instanceof ii?nr(E):new ii(E);if(A.g!="")g&&(A.g=g+"."+A.g),tl(A,A.u);else{var L=o.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const F=new ii(null);A&&el(F,A),g&&(F.g=g),L&&tl(F,L),E&&(F.h=E),A=F}return E=h.G,g=h.wa,E&&g&&De(A,E,g),De(A,"VER",h.ka),ll(h,A),A}function V1(h,g,E){if(g&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Aa&&!h.ma?new Ke(new km({ab:E})):new Ke(h.ma),g.Fa(h.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F1(){}t=F1.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ru(){}Ru.prototype.g=function(h,g){return new un(h,g)};function un(h,g){ct.call(this),this.g=new I1(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(h?h["X-WebChannel-Client-Profile"]=g.sa:h={"X-WebChannel-Client-Profile":g.sa}),this.g.U=h,(h=g&&g.Qb)&&!M(h)&&(this.g.u=h),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!M(g)&&(this.g.G=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new _o(this)}d(un,ct),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Im(this.g)},un.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=qa(h),h=E);g.i.push(new iN(g.Ya++,h)),g.I==3&&Au(g)},un.prototype.N=function(){this.g.l=null,delete this.j,Im(this.g),delete this.g,un.Z.N.call(this)};function B1(h){pm.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const E in g){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}d(B1,pm);function U1(){gm.call(this),this.status=1}d(U1,gm);function _o(h){this.g=h}d(_o,F1),_o.prototype.ra=function(){_t(this.g,"a")},_o.prototype.qa=function(h){_t(this.g,new B1(h))},_o.prototype.pa=function(h){_t(this.g,new U1)},_o.prototype.oa=function(){_t(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,BI=function(){return new Ru},FI=function(){return xu()},VI=ys,ny={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bu.NO_ERROR=0,bu.TIMEOUT=8,bu.HTTP_ERROR=6,jh=bu,n1.COMPLETE="complete",LI=n1,X_.EventType=Ga,Ga.OPEN="a",Ga.CLOSE="b",Ga.ERROR="c",Ga.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Al=X_,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,OI=Ke}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const VE="@firebase/firestore",FE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new nv("@firebase/firestore");function To(){return so.logLevel}function X(t,...e){if(so.logLevel<=ye.DEBUG){const n=e.map(pv);so.debug(`Firestore (${La}): ${t}`,...n)}}function Kr(t,...e){if(so.logLevel<=ye.ERROR){const n=e.map(pv);so.error(`Firestore (${La}): ${t}`,...n)}}function pa(t,...e){if(so.logLevel<=ye.WARN){const n=e.map(pv);so.warn(`Firestore (${La}): ${t}`,...n)}}function pv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UI(t,r,n)}function UI(t,e,n){let r=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Kr(r),new Error(r)}function Se(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||UI(e,i,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class t3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class n3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Br,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new jI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class r3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new BE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new BE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=o3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function ry(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return dp(i)===dp(s)?ve(i,s):dp(i)?1:-1}return ve(t.length,e.length)}const a3=55296,l3=57343;function dp(t){const e=t.charCodeAt(0);return e>=a3&&e<=l3}function ga(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="__name__";class cr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=cr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ve(e.length,n.length)}static compareSegments(e,n){const r=cr.isNumericId(e),i=cr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?cr.extractNumericId(e).compare(cr.extractNumericId(n)):ry(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}}class Re extends cr{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const c3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends cr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return c3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UE}static keyField(){return new At([UE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Re.fromString(e))}static fromName(e){return new ne(Re.fromString(e).popFirst(5))}static empty(){return new ne(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function u3(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jE(t){if(!ne.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zE(t){if(ne.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $I(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ff(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function cu(t,e){if(!$I(t))throw new Y(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=-62135596800,HE=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*HE);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$E)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HE}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$E;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:at("string",Ve._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ve(0,0))}static max(){return new ue(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function h3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Qi(i,ne.empty(),e)}function d3(t){return new Qi(t.readTime,t.key,Dc)}class Qi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qi(ue.min(),ne.empty(),Dc)}static max(){return new Qi(ue.max(),ne.empty(),Dc)}}function f3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==m3)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function g3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-1;function Uf(t){return t==null}function jd(t){return t===0&&1/t==-1/0}function y3(t){return typeof t=="number"&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="";function v3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WE(e)),e=_3(t.get(n),e);return WE(e)}function _3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case HI:n+="";break;default:n+=s}}return n}function WE(t){return t+HI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=i??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qE(this.data.getIterator())}getIteratorFrom(e){return new qE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class qE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new gn([])}unionWith(e){let n=new gt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KI("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const w3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=w3.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ji(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="server_timestamp",GI="__type__",YI="__previous_value__",QI="__local_write_time__";function vv(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[GI])==null?void 0:r.stringValue)===qI}function jf(t){const e=t.mapValue.fields[YI];return vv(e)?jf(e):e}function Oc(t){const e=Xi(t.mapValue.fields[QI].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const zd="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||zd}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="__type__",x3="__max__",th={mapValue:{}},JI="__vector__",$d="value";function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vv(t)?4:T3(t)?9007199254740991:b3(t)?10:11:ae(28295,{value:t})}function Er(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xi(i.timestampValue),a=Xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ji(i.bytesValue).isEqual(Ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?jd(o)===jd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(KE(o)!==KE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Er(o[l],a[l])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function Vc(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function ya(t,e){if(t===e)return 0;const n=Zi(t),r=Zi(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GE(t.timestampValue,e.timestampValue);case 4:return GE(Oc(t),Oc(e));case 5:return ry(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ji(s),l=Ji(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ve(a[c],l[c]);if(u!==0)return u}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ve(Je(s.latitude),Je(o.latitude));return a!==0?a:ve(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,y,v;const a=s.fields||{},l=o.fields||{},c=(f=a[$d])==null?void 0:f.arrayValue,u=(p=l[$d])==null?void 0:p.arrayValue,d=ve(((y=c==null?void 0:c.values)==null?void 0:y.length)||0,((v=u==null?void 0:u.values)==null?void 0:v.length)||0);return d!==0?d:YE(c,u)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===th.mapValue&&o===th.mapValue)return 0;if(s===th.mapValue)return 1;if(o===th.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ry(l[d],u[d]);if(f!==0)return f;const p=ya(a[l[d]],c[u[d]]);if(p!==0)return p}return ve(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{he:n})}}function GE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Xi(t),r=Xi(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function YE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ya(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function va(t){return iy(t)}function iy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=iy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${iy(n.fields[o])}`;return i+"}"}(t.mapValue):ae(61005,{value:t})}function zh(t){switch(Zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(t);return e?16+zh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ji(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+zh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ds(r.fields,(s,o)=>{i+=s.length+zh(o)}),i}(t.mapValue);default:throw ae(13486,{value:t})}}function QE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sy(t){return!!t&&"integerValue"in t}function _v(t){return!!t&&"arrayValue"in t}function XE(t){return!!t&&"nullValue"in t}function JE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}function b3(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[XI])==null?void 0:r.stringValue)===JI}function Jl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(t.arrayValue.values[n]);return e}return{...t}}function T3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===x3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Jl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new tn(Jl(this.value))}}function ZI(t){const e=[];return ds(t.fields,(n,r)=>{const i=new At([n]);if($h(r)){const s=ZI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,ue.min(),ue.min(),ue.min(),tn.empty(),0)}static newFoundDocument(e,n,r,i){return new Bt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Bt(e,2,n,ue.min(),ue.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,ue.min(),ue.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.position=e,this.inclusive=n}}function ZE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ya(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ex(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n="asc"){this.field=e,this.dir=n}}function k3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{}class ot extends eC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new I3(e,n,r):n==="array-contains"?new P3(e,r):n==="in"?new R3(e,r):n==="not-in"?new N3(e,r):n==="array-contains-any"?new M3(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C3(e,r):new A3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ya(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends eC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zn(e,n)}matches(e){return tC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tC(t){return t.op==="and"}function nC(t){return S3(t)&&tC(t)}function S3(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function oy(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+va(t.value);if(nC(t))return t.filters.map(e=>oy(e)).join(",");{const e=t.filters.map(n=>oy(n)).join(",");return`${t.op}(${e})`}}function rC(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof Zn?function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&rC(o,i.filters[a]),!0):!1}(t,e):void ae(19439)}function iC(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(iC).join(" ,")+"}"}(t):"Filter"}class I3 extends ot{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class C3 extends ot{constructor(e,n){super(e,"in",n),this.keys=sC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A3 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=sC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class P3 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _v(n)&&Vc(n.arrayValue,this.value)}}class R3 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class N3 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vc(this.value.arrayValue,n)}}class M3 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_v(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function tx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D3(t,e,n,r,i,s,o)}function wv(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>va(r)).join(",")),e.Te=n}return e.Te}function Ev(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ex(t.startAt,e.startAt)&&ex(t.endAt,e.endAt)}function ay(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O3(t,e,n,r,i,s,o,a){return new uu(t,e,n,r,i,s,o,a)}function zf(t){return new uu(t)}function nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oC(t){return t.collectionGroup!==null}function Zl(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new gt(At.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Wd(s,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new Wd(At.keyField(),r))}return e.Ie}function mr(t){const e=he(t);return e.Ee||(e.Ee=L3(e,Zl(t))),e.Ee}function L3(t,e){if(t.limitType==="F")return tx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wd(i.field,s)});const n=t.endAt?new Hd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hd(t.startAt.position,t.startAt.inclusive):null;return tx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ly(t,e){const n=t.filters.concat([e]);return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cy(t,e,n){return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return Ev(mr(t),mr(e))&&t.limitType===e.limitType}function aC(t){return`${wv(mr(t))}|lt:${t.limitType}`}function ko(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iC(i)).join(", ")}]`),Uf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>va(i)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function Hf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Zl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ZE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Zl(r),i)||r.endAt&&!function(o,a,l){const c=ZE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Zl(r),i))}(t,e)}function V3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lC(t){return(e,n)=>{let r=!1;for(const i of Zl(t)){const s=F3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function F3(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ya(l,c):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new We(ne.comparator);function qr(){return B3}const cC=new We(ne.comparator);function Pl(...t){let e=cC;for(const n of t)e=e.insert(n.key,n);return e}function uC(t){let e=cC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return ec()}function hC(){return ec()}function ec(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const U3=new We(ne.comparator),j3=new gt(ne.comparator);function _e(...t){let e=j3;for(const n of t)e=e.add(n);return e}const z3=new gt(ve);function $3(){return z3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function dC(t){return{integerValue:""+t}}function H3(t,e){return y3(e)?dC(e):xv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function W3(t,e,n){return t instanceof Kd?function(i,s){const o={fields:{[GI]:{stringValue:qI},[QI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vv(s)&&(s=jf(s)),s&&(o.fields[YI]=s),{mapValue:o}}(n,e):t instanceof _a?mC(t,e):t instanceof Fc?pC(t,e):function(i,s){const o=fC(i,s),a=rx(o)+rx(i.Ae);return sy(o)&&sy(i.Ae)?dC(a):xv(i.serializer,a)}(t,e)}function K3(t,e,n){return t instanceof _a?mC(t,e):t instanceof Fc?pC(t,e):n}function fC(t,e){return t instanceof qd?function(r){return sy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kd extends Wf{}class _a extends Wf{constructor(e){super(),this.elements=e}}function mC(t,e){const n=gC(e);for(const r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fc extends Wf{constructor(e){super(),this.elements=e}}function pC(t,e){let n=gC(e);for(const r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}class qd extends Wf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rx(t){return Je(t.integerValue||t.doubleValue)}function gC(t){return _v(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.field=e,this.transform=n}}function G3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _a&&i instanceof _a||r instanceof Fc&&i instanceof Fc?ga(r.elements,i.elements,Er):r instanceof qd&&i instanceof qd?Er(r.Ae,i.Ae):r instanceof Kd&&i instanceof Kd}(t.transform,e.transform)}class Y3{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kf{}function yC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bv(t.key,Rn.none()):new hu(t.key,t.data,Rn.none());{const n=t.data,r=tn.empty();let i=new gt(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fs(t.key,r,new gn(i.toArray()),Rn.none())}}function Q3(t,e,n){t instanceof hu?function(i,s,o){const a=i.value.clone(),l=sx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fs?function(i,s,o){if(!Hh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(vC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tc(t,e,n,r){return t instanceof hu?function(s,o,a,l){if(!Hh(s.precondition,o))return a;const c=s.value.clone(),u=ox(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof fs?function(s,o,a,l){if(!Hh(s.precondition,o))return a;const c=ox(s.fieldTransforms,l,o),u=o.data;return u.setAll(vC(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Hh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function X3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=fC(r.transform,i||null);s!=null&&(n===null&&(n=tn.empty()),n.set(r.field,s))}return n||null}function ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ga(r,i,(s,o)=>G3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends Kf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fs extends Kf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sx(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K3(o,a,n[i]))}return r}function ox(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,W3(s,o,e))}return r}class bv extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J3 extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Q3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=yC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,r)=>ix(n,r))&&ga(this.baseMutations,e.baseMutations,(n,r)=>ix(n,r))}}class Tv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return U3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Tv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,Ee;function n6(t){switch(t){case U.OK:return ae(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function _C(t){if(t===void 0)return Kr("GRPC error has no .code"),U.UNKNOWN;switch(t){case rt.OK:return U.OK;case rt.CANCELLED:return U.CANCELLED;case rt.UNKNOWN:return U.UNKNOWN;case rt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case rt.INTERNAL:return U.INTERNAL;case rt.UNAVAILABLE:return U.UNAVAILABLE;case rt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case rt.NOT_FOUND:return U.NOT_FOUND;case rt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case rt.ABORTED:return U.ABORTED;case rt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case rt.DATA_LOSS:return U.DATA_LOSS;default:return ae(39323,{code:t})}}(Ee=rt||(rt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new $i([4294967295,4294967295],0);function ax(t){const e=r6().encode(t),n=new DI;return n.update(e),new Uint8Array(n.digest())}function lx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $i([n,r],0),new $i([i,s],0)]}class kv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$i.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply($i.fromNumber(r)));return i.compare(i6)===1&&(i=new $i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ax(e),[r,i]=lx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new kv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=ax(e),[r,i]=lx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qf(ue.min(),i,new We(ve),qr(),_e())}}class du{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class wC{constructor(e,n){this.targetId=e,this.Ce=n}}class EC{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cx{constructor(){this.ve=0,this.Fe=ux(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:s})}}),new du(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ux()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class s6{constructor(e){this.Ge=e,this.ze=new Map,this.je=qr(),this.Je=nh(),this.He=nh(),this.Ye=new We(ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(ay(s))if(r===0){const o=new ne(s.path);this.et(n,o,Bt.newNoDocument(o,ue.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ji(r).toUint8Array()}catch(l){if(l instanceof KI)return pa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kv(o,i,s)}catch(l){return pa(l instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&ay(a.target)){const l=new ne(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Bt.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new qf(e,n,this.Ye,this.je,r);return this.je=qr(),this.Je=nh(),this.He=nh(),this.Ye=new We(ve),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nh(){return new We(ne.comparator)}function ux(){return new We(ne.comparator)}const o6={asc:"ASCENDING",desc:"DESCENDING"},a6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l6={and:"AND",or:"OR"};class c6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uy(t,e){return t.useProto3Json||Uf(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u6(t,e){return Gd(t,e.toTimestamp())}function pr(t){return Se(!!t,49232),ue.fromTimestamp(function(n){const r=Xi(n);return new Ve(r.seconds,r.nanos)}(t))}function Sv(t,e){return hy(t,e).canonicalString()}function hy(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bC(t){const e=Re.fromString(t);return Se(CC(e),10190,{key:e.toString()}),e}function dy(t,e){return Sv(t.databaseId,e.path)}function fp(t,e){const n=bC(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(kC(n))}function TC(t,e){return Sv(t.databaseId,e)}function h6(t){const e=bC(t);return e.length===4?Re.emptyPath():kC(e)}function fy(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hx(t,e,n){return{name:dy(t,e),fields:n.value.mapValue.fields}}function d6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Se(u===void 0||typeof u=="string",58123),Nt.fromBase64String(u||"")):(Se(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Nt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?U.UNKNOWN:_C(c.code);return new Y(u,c.message||"")}(o);n=new EC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fp(t,r.document.name),s=pr(r.document.updateTime),o=r.document.createTime?pr(r.document.createTime):ue.min(),a=new tn({mapValue:{fields:r.document.fields}}),l=Bt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Wh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fp(t,r.document),s=r.readTime?pr(r.readTime):ue.min(),o=Bt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fp(t,r.document),s=r.removedTargetIds||[];n=new Wh([],s,i,null)}else{if(!("filter"in e))return ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new t6(i,s),a=r.targetId;n=new wC(a,o)}}return n}function f6(t,e){let n;if(e instanceof hu)n={update:hx(t,e.key,e.value)};else if(e instanceof bv)n={delete:dy(t,e.key)};else if(e instanceof fs)n={update:hx(t,e.key,e.data),updateMask:x6(e.fieldMask)};else{if(!(e instanceof J3))return ae(16599,{Vt:e.type});n={verify:dy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ae(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae(27497)}(t,e.precondition)),n}function m6(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?pr(i.updateTime):pr(s);return o.isEqual(ue.min())&&(o=pr(s)),new Y3(o,i.transformResults||[])}(n,e))):[]}function p6(t,e){return{documents:[TC(t,e.path)]}}function g6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TC(t,i);const s=function(c){if(c.length!==0)return IC(Zn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:So(f.field),direction:_6(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function y6(t){let e=h6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=SC(d);return f instanceof Zn&&nC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Wd(Io(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Uf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Hd(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Hd(p,f)}(n.endAt)),O3(e,i,o,s,a,"F",l,c)}function v6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Io(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Io(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Io(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Io(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>SC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function _6(t){return o6[t]}function w6(t){return a6[t]}function E6(t){return l6[t]}function So(t){return{fieldPath:t.canonicalString()}}function Io(t){return At.fromServerFormat(t.fieldPath)}function IC(t){return t instanceof ot?function(n){if(n.op==="=="){if(JE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(XE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(XE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:w6(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(i=>IC(i));return r.length===1?r[0]:{compositeFilter:{op:E6(n.op),filters:r}}}(t):ae(54877,{filter:t})}function x6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.yt=e}}function T6(t){const e=y6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.Cn=new S6}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Qi.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class S6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AC=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(AC,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wa(0)}static cr(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="LruGarbageCollector",I6=1048576;function mx([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class C6{constructor(e){this.Ir=e,this.buffer=new gt(mx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fa(n)?X(fx,"Ignoring IndexedDB error during garbage collection: ",n):await Va(n)}await this.Vr(3e5)})}}class P6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Bf.ce);const r=new C6(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(dx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),To()<=ye.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function R6(t,e){return new P6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&tc(r.mutation,i,gn.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qr();const o=ec(),a=function(){return ec()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof fs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tc(u.mutation,c,u.mutation.getFieldMask(),Ve.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>a.set(c,new M6(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ec();let i=new We((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||gn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=hC();u.forEach(f=>{if(!s.has(f)){const p=yC(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Fs());let a=Dc,l=s;return o.next(c=>z.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?z.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,_e())).next(u=>({batchId:a,changes:uC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Pl();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(d,f){return new uu(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Bt.newInvalidDocument(u)))});let a=Pl();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&tc(u.mutation,c,gn.empty(),Ve.now()),Hf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:T6(i.bundledQuery),readTime:pr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.overlays=new We(ne.comparator),this.qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Fs(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Fs(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Fs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return z.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new e6(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.Qr=new gt(Et.$r),this.Ur=new gt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ne(new Re([])),r=new Et(n,e),i=new Et(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ne(new Re([])),r=new Et(n,e),i=new Et(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ne.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(Et.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Z3(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?yv:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(ve);return n.forEach(i=>{const s=new Et(i,0),o=new Et(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new Et(new ne(s),0);let a=new gt(ve);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),z.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(n.mutations,i=>{const s=new Et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),i=this.Zr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.ri=e,this.docs=function(){return new We(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qr();const o=n.path,a=new ne(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||f3(d3(u),r)<=0||(i.has(u.key)||Hf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae(9500)}ii(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U6(this)}getSize(e){return z.resolve(this.size)}}class U6 extends N6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.persistence=e,this.si=new ho(n=>wv(n),Ev),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Iv,this.targetCount=0,this.ai=wa.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new wa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Pr(n),z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new V6,this.referenceDelegate=e(this),this.Pi=new j6(this),this.indexManager=new k6,this.remoteDocumentCache=function(i){return new B6(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new b6(n),this.Ii=new O6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new F6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new z6(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class z6 extends p3{constructor(e){super(),this.currentSequenceNumber=e}}class Cv{constructor(e){this.persistence=e,this.Ri=new Iv,this.Vi=null}static mi(e){return new Cv(e)}get fi(){if(this.Vi)return this.Vi;throw ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{const i=ne.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yd{constructor(e,n){this.persistence=e,this.pi=new ho(r=>v3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=R6(this,n)}static mi(e,n){return new Yd(e,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ue.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zh(e.data.value)),n}br(e,n,r){return z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Av(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return y4()?8:g3(Ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $6;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(To()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(To()<=ye.DEBUG&&X("QueryEngine","Query:",ko(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(To()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):z.resolve())}ys(e,n){if(nx(n))return z.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cy(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,cy(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,i){return nx(n)||i.isEqual(ue.min())?z.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?z.resolve(null):(To()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ko(n)),this.vs(e,o,n,h3(i,Dc)).next(a=>a))})}Ds(e,n){let r=new gt(lC(e));return n.forEach((i,s)=>{Hf(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return To()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ko(n)),this.ps.getDocumentsMatchingQuery(e,n,Qi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="LocalStore",W6=3e8;class K6{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new We(ve),this.xs=new ho(s=>wv(s),Ev),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function q6(t,e,n,r){return new K6(t,e,n,r)}async function RC(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function G6(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=z.resolve();return f.forEach(y=>{p=p.next(()=>u.getEntry(l,y)).next(v=>{const x=c.docVersions.get(y);Se(x!==null,48541),v.version.compareTo(x)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NC(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Y6(t,e){const n=he(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Nt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,x,_){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=W6?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,u)&&a.push(n.Pi.updateTargetData(s,p))});let l=qr(),c=_e();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Q6(s,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(ue.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Q6(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X(Pv,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function X6(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J6(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function my(t,e,n){const r=he(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fa(o))throw o;X(Pv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function px(t,e,n){const r=he(t);let i=ue.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=he(l),f=d.xs.get(u);return f!==void 0?z.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,u)}(r,o,mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:_e())).next(a=>(Z6(r,V3(e),a),{documents:a,Qs:s})))}function Z6(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class gx{constructor(){this.activeTargetIds=$3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eF{constructor(){this.Mo=new gx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="ConnectivityMonitor";class vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(yx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(yx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function py(){return rh===null?rh=function(){return 268435456+Math.round(2147483648*Math.random())}():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="RestConnection",nF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=py(),a=this.zo(e,n.toUriEncodedString());X(mp,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=Ma(c);return this.Jo(e,a,l,r,u).then(d=>(X(mp,`Received RPC '${e}' ${o}: `,d),d),d=>{throw pa(mp,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+La}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=nF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class sF extends rF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=py();return new Promise((a,l)=>{const c=new OI;c.setWithCredentials(!0),c.listenOnce(LI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jh.NO_ERROR:const d=c.getResponseJson();X(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case jh.TIMEOUT:X(Ot,`RPC '${e}' ${o} timed out`),l(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const f=c.getStatus();if(X(Ot,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const v=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(y.status);l(new Y(v,y.message))}else l(new Y(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{X(Ot,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);X(Ot,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}T_(e,n,r){const i=py(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BI(),a=FI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");X(Ot,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let f=!1,p=!1;const y=new iF({Yo:x=>{p?X(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(X(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),X(Ot,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Zo:()=>d.close()}),v=(x,_,w)=>{x.listen(_,T=>{try{w(T)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,Al.EventType.OPEN,()=>{p||(X(Ot,`RPC '${e}' stream ${i} transport opened.`),y.o_())}),v(d,Al.EventType.CLOSE,()=>{p||(p=!0,X(Ot,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(d))}),v(d,Al.EventType.ERROR,x=>{p||(p=!0,pa(Ot,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),y.a_(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),v(d,Al.EventType.MESSAGE,x=>{var _;if(!p){const w=x.data[0];Se(!!w,16349);const T=w,I=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(I){X(Ot,`RPC '${e}' stream ${i} received error:`,I);const R=I.status;let O=function(S){const P=rt[S];if(P!==void 0)return _C(P)}(R),k=I.message;O===void 0&&(O=U.INTERNAL,k="Unknown error status: "+R+" with message "+I.message),p=!0,y.a_(new Y(O,k)),d.close()}else X(Ot,`RPC '${e}' stream ${i} received:`,w),y.u_(w)}}),v(a,VI.STAT_EVENT,x=>{x.stat===ny.PROXY?X(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===ny.NOPROXY&&X(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return new c6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="PersistentStream";class DC{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(_x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(_x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oF extends DC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=d6(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?pr(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ay(l)?{documents:p6(s,l)}:{query:g6(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xC(s,o.resumeToken);const c=uy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Gd(s,o.snapshotVersion.toTimestamp());const c=uy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=v6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fy(this.serializer),n.removeTarget=e,this.q_(n)}}class aF extends DC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=m6(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f6(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{}class cF extends lF{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,hy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(U.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,hy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kr(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class hF{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{fo(this)&&(X(oo,"Restarting streams for network reachability change."),await async function(l){const c=he(l);c.Ea.add(4),await fu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Yf(c)}(this))})}),this.Ra=new uF(r,i)}}async function Yf(t){if(fo(t))for(const e of t.da)await e(!0)}async function fu(t){for(const e of t.da)await e(!1)}function OC(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dv(n)?Mv(n):Ba(n).O_()&&Nv(n,e))}function Rv(t,e){const n=he(t),r=Ba(n);n.Ia.delete(e),r.O_()&&LC(n,e),n.Ia.size===0&&(r.O_()?r.L_():fo(n)&&n.Ra.set("Unknown"))}function Nv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ba(t).Y_(e)}function LC(t,e){t.Va.Ue(e),Ba(t).Z_(e)}function Mv(t){t.Va=new s6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ba(t).start(),t.Ra.ua()}function Dv(t){return fo(t)&&!Ba(t).x_()&&t.Ia.size>0}function fo(t){return he(t).Ea.size===0}function VC(t){t.Va=void 0}async function dF(t){t.Ra.set("Online")}async function fF(t){t.Ia.forEach((e,n)=>{Nv(t,e)})}async function mF(t,e){VC(t),Dv(t)?(t.Ra.ha(e),Mv(t)):t.Ra.set("Unknown")}async function pF(t,e,n){if(t.Ra.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){X(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qd(t,r)}else if(e instanceof Wh?t.Va.Ze(e):e instanceof wC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await NC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Nt.EMPTY_BYTE_STRING,u.snapshotVersion)),LC(s,l);const d=new Ii(u.target,l,c,u.sequenceNumber);Nv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X(oo,"Failed to raise snapshot:",r),await Qd(t,r)}}async function Qd(t,e,n){if(!Fa(e))throw e;t.Ea.add(1),await fu(t),t.Ra.set("Offline"),n||(n=()=>NC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(oo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yf(t)})}function FC(t,e){return e().catch(n=>Qd(t,n,e))}async function Qf(t){const e=he(t),n=es(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yv;for(;gF(e);)try{const i=await X6(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,yF(e,i)}catch(i){await Qd(e,i)}BC(e)&&UC(e)}function gF(t){return fo(t)&&t.Ta.length<10}function yF(t,e){t.Ta.push(e);const n=es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function BC(t){return fo(t)&&!es(t).x_()&&t.Ta.length>0}function UC(t){es(t).start()}async function vF(t){es(t).ra()}async function _F(t){const e=es(t);for(const n of t.Ta)e.ea(n.mutations)}async function wF(t,e,n){const r=t.Ta.shift(),i=Tv.from(r,e,n);await FC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qf(t)}async function EF(t,e){e&&es(t).X_&&await async function(r,i){if(function(o){return n6(o)&&o!==U.ABORTED}(i.code)){const s=r.Ta.shift();es(r).B_(),await FC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qf(r)}}(t,e),BC(t)&&UC(t)}async function wx(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(oo,"RemoteStore received new credentials");const r=fo(n);n.Ea.add(3),await fu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yf(n)}async function xF(t,e){const n=he(t);e?(n.Ea.delete(2),await Yf(n)):e||(n.Ea.add(2),await fu(n),n.Ra.set("Unknown"))}function Ba(t){return t.ma||(t.ma=function(n,r,i){const s=he(n);return s.sa(),new oF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:dF.bind(null,t),t_:fF.bind(null,t),r_:mF.bind(null,t),H_:pF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Dv(t)?Mv(t):t.Ra.set("Unknown")):(await t.ma.stop(),VC(t))})),t.ma}function es(t){return t.fa||(t.fa=function(n,r,i){const s=he(n);return s.sa(),new aF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:vF.bind(null,t),r_:EF.bind(null,t),ta:_F.bind(null,t),na:wF.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qf(t)):(await t.fa.stop(),t.Ta.length>0&&(X(oo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ov(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lv(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),Fa(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(e){return new ta(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.ga=new We(ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ea{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ea(e,n,ta.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TF{constructor(){this.queries=xx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=xx(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function xx(){return new ho(t=>aC(t),$f)}async function Vv(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new bF,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Lv(o,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Bv(n)}async function Fv(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kF(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Bv(n)}function SF(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Bv(t){t.Ca.forEach(e=>{e.next()})}var gy,bx;(bx=gy||(gy={})).Ma="default",bx.Cache="cache";class Uv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class IF{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=lC(e),this.tu=new ta(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ex,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=Hf(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),x=!0):this.su(f,p)||(r.track({type:2,doc:p}),x=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),x=!0):f&&!p&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(p?(o=o.add(p),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(p,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Rt:x})}};return v(p)-v(y)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Ea(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new zC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new jC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jv="SyncEngine";class CF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AF{constructor(e){this.key=e,this.hu=!1}}class PF{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ho(a=>aC(a),$f),this.Iu=new Map,this.Eu=new Set,this.du=new We(ne.comparator),this.Au=new Map,this.Ru=new Iv,this.Vu={},this.mu=new Map,this.fu=wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RF(t,e,n=!0){const r=GC(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await $C(r,e,n,!0),i}async function NF(t,e){const n=GC(t);await $C(n,e,!0,!1)}async function $C(t,e,n,r){const i=await J6(t.localStore,mr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await MF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&OC(t.remoteStore,i),a}async function MF(t,e,n,r,i){t.pu=(d,f,p)=>async function(v,x,_,w){let T=x.view.ru(_);T.Cs&&(T=await px(v.localStore,x.query,!1).then(({documents:k})=>x.view.ru(k,T)));const I=w&&w.targetChanges.get(x.targetId),R=w&&w.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(T,v.isPrimaryClient,I,R);return kx(v,x.targetId,O.au),O.snapshot}(t,d,f,p);const s=await px(t.localStore,e,!0),o=new IF(e,s.Qs),a=o.ru(s.documents),l=du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);kx(t,n,c.au);const u=new CF(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function DF(t,e,n){const r=he(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!$f(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await my(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rv(r.remoteStore,i.targetId),yy(r,i.targetId)}).catch(Va)):(yy(r,i.targetId),await my(r.localStore,i.targetId,!0))}async function OF(t,e){const n=he(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rv(n.remoteStore,r.targetId))}async function LF(t,e,n){const r=$F(t);try{const i=await function(o,a){const l=he(o),c=Ve.now(),u=a.reduce((p,y)=>p.add(y.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=qr(),v=_e();return l.Ns.getEntries(p,u).next(x=>{y=x,y.forEach((_,w)=>{w.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(x=>{d=x;const _=[];for(const w of a){const T=X3(w,d.get(w.key).overlayedDocument);T!=null&&_.push(new fs(w.key,T,ZI(T.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(x=>{f=x;const _=x.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,x.batchId,_)})}).then(()=>({batchId:f.batchId,changes:uC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new We(ve)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await mu(r,i.changes),await Qf(r.remoteStore)}catch(i){const s=Lv(i,"Failed to persist write");n.reject(s)}}async function HC(t,e){const n=he(t);try{const r=await Y6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Se(o.hu,14607):i.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))}),await mu(n,r,e)}catch(r){await Va(r)}}function Tx(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)}),c&&Bv(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VF(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new We(ne.comparator);o=o.insert(s,Bt.newNoDocument(s,ue.min()));const a=_e().add(s),l=new qf(ue.min(),new Map,new We(ve),o,a);await HC(r,l),r.du=r.du.remove(s),r.Au.delete(e),zv(r)}else await my(r.localStore,e,!1).then(()=>yy(r,e,n)).catch(Va)}async function FF(t,e){const n=he(t),r=e.batch.batchId;try{const i=await G6(n.localStore,e);KC(n,r,null),WC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mu(n,i)}catch(i){await Va(i)}}async function BF(t,e,n){const r=he(t);try{const i=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Se(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);KC(r,e,n),WC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mu(r,i)}catch(i){await Va(i)}}function WC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KC(t,e,n){const r=he(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function yy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||qC(t,r)})}function qC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zv(t))}function kx(t,e,n){for(const r of n)r instanceof jC?(t.Ru.addReference(r.key,e),UF(t,r)):r instanceof zC?(X(jv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||qC(t,r.key)):ae(19791,{wu:r})}function UF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(jv,"New document in limbo: "+n),t.Eu.add(r),zv(t))}function zv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne(Re.fromString(e)),r=t.fu.next();t.Au.set(r,new AF(n)),t.du=t.du.insert(n,r),OC(t.remoteStore,new Ii(mr(zf(n.path)),r,"TargetPurposeLimboResolution",Bf.ce))}}async function mu(t,e,n){const r=he(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Av.As(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,c){const u=he(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(c,f=>z.forEach(f.Es,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>z.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Fa(d))throw d;X(Pv,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.Ms.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(f,v)}}}(r.localStore,s))}async function jF(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(jv,"User change. New user:",e.toKey());const r=await RC(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new Y(U.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(n,r.Ls)}}function zF(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function GC(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VF.bind(null,e),e.Pu.H_=kF.bind(null,e.eventManager),e.Pu.yu=SF.bind(null,e.eventManager),e}function $F(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BF.bind(null,e),e}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return q6(this.persistence,new H6,e.initialUser,this.serializer)}Cu(e){return new PC(Cv.mi,this.serializer)}Du(e){return new eF}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class HF extends Xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Yd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new PC(r=>Yd.mi(r,n),this.serializer)}}class vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jF.bind(null,this.syncEngine),await xF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TF}()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),r=function(s){return new sF(s)}(e.databaseInfo);return function(s,o,a,l){return new cF(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new hF(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Tx(this.syncEngine,n,0),function(){return vx.v()?new vx:new tF}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new PF(i,s,o,a,l,c);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);X(oo,"RemoteStore shutting down."),s.Ea.add(5),await fu(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vy.provider={build:()=>new vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class WF{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X(ts,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(ts,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gp(t,e){t.asyncQueue.verifyOperationInProgress(),X(ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await RC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KF(t);X(ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>wx(e.remoteStore,i)),t._onlineComponents=e}async function KF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(ts,"Using user provided OfflineComponentProvider");try{await gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await gp(t,new Xd)}}else X(ts,"Using default OfflineComponentProvider"),await gp(t,new HF(void 0));return t._offlineComponents}async function YC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(ts,"Using user provided OnlineComponentProvider"),await Sx(t,t._uninitializedComponentsProvider._online)):(X(ts,"Using default OnlineComponentProvider"),await Sx(t,new vy))),t._onlineComponents}function qF(t){return YC(t).then(e=>e.syncEngine)}async function Jd(t){const e=await YC(t),n=e.eventManager;return n.onListen=RF.bind(null,e.syncEngine),n.onUnlisten=DF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OF.bind(null,e.syncEngine),n}function GF(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new $v({next:f=>{u.Nu(),o.enqueueAndForget(()=>Fv(s,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Uv(zf(a.path),u,{includeMetadataChanges:!0,qa:!0});return Vv(s,d)}(await Jd(t),t.asyncQueue,e,n,r)),r.promise}function YF(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new $v({next:f=>{u.Nu(),o.enqueueAndForget(()=>Fv(s,d)),f.fromCache&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Uv(a,u,{includeMetadataChanges:!0,qa:!0});return Vv(s,d)}(await Jd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firestore.googleapis.com",Cx=!0;class Ax{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XC,this.ssl=Cx}else this.host=e.host,this.ssl=e.ssl??Cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I6)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ax({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ax(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new e3;switch(r.type){case"firstParty":return new i3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ix.get(n);r&&(X("ComponentProvider","Removing Datastore"),Ix.delete(n),r.terminate())}(this),Promise.resolve()}}function QF(t,e,n,r={}){var c;t=cn(t,Xf);const i=Ma(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(K2(`https://${a}`),q2("Firestore",!0)),s.host!==XC&&s.host!==a&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Yi(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Vt.MOCK_USER;else{u=l4(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Vt(f)}t._authCredentials=new t3(new jI(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cu(n,Ye._jsonSchema))return new Ye(e,r||null,new ne(Re.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:at("string",Ye._jsonSchemaVersion),referencePath:at("string")};class Hi extends mo{constructor(e,n,r){super(e,n,zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new ne(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function Kh(t,e,...n){if(t=lt(t),zI("collection","path",e),t instanceof Xf){const r=Re.fromString(e,...n);return zE(r),new Hi(t,null,r)}{if(!(t instanceof Ye||t instanceof Hi))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return zE(r),new Hi(t.firestore,null,r)}}function Wi(t,e,...n){if(t=lt(t),arguments.length===1&&(e=gv.newId()),zI("doc","path",e),t instanceof Xf){const r=Re.fromString(e,...n);return jE(r),new Ye(t,null,new ne(r))}{if(!(t instanceof Ye||t instanceof Hi))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return jE(r),new Ye(t.firestore,t instanceof Hi?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="AsyncQueue";class Rx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MC(this,"async_queue_retry"),this._c=()=>{const r=pp();r&&X(Px,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=pp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Br;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;X(Px,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Kr("INTERNAL UNHANDLED ERROR: ",Nx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Ov.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ae(47125,{Pc:Nx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Gr extends Xf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Rx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rx(e),this._firestoreClient=void 0,await e}}}function XF(t,e){const n=typeof t=="object"?t:X2(),r=typeof t=="string"?t:zd,i=iv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=o4("firestore");s&&QF(i,...s)}return i}function Jf(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JF(t),t._firestoreClient}function JF(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,c,u){return new E3(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,QC(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new WF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Nt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:at("string",Sn._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(cu(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:at("string",gr._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yr(e.vectorValues);throw new Y(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:at("string",yr._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=/^__.*__$/;class e9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class JC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ac:t})}}class tm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZC(this.Ac)&&ZF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gf(e)}Cc(e,n,r,i=!1){return new tm({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nm(t){const e=t._freezeSettings(),n=Gf(t._databaseId);return new t9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eA(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Wv("Data must be an object, but it was:",o,r);const a=tA(r,o);let l,c;if(s.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=_y(e,d,n);if(!o.contains(f))throw new Y(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);rA(u,f)||u.push(f)}l=new gn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new e9(new tn(a),l,c)}class rm extends em{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rm}}function n9(t,e,n){return new tm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hv extends em{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=n9(this,e,!0),r=this.vc.map(s=>Ua(s,n)),i=new _a(r);return new q3(e.path,i)}isEqual(e){return e instanceof Hv&&Yi(this.vc,e.vc)}}function r9(t,e,n,r){const i=t.Cc(1,e,n);Wv("Data must be an object, but it was:",i,r);const s=[],o=tn.empty();ds(r,(l,c)=>{const u=Kv(e,l,n);c=lt(c);const d=i.yc(u);if(c instanceof rm)s.push(u);else{const f=Ua(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new gn(s);return new JC(o,a,i.fieldTransforms)}function i9(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[_y(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(_y(e,s[f])),l.push(s[f+1]);const c=[],u=tn.empty();for(let f=a.length-1;f>=0;--f)if(!rA(c,a[f])){const p=a[f];let y=l[f];y=lt(y);const v=o.yc(p);if(y instanceof rm)c.push(p);else{const x=Ua(y,v);x!=null&&(c.push(p),u.set(p,x))}}const d=new gn(c);return new JC(u,d,o.fieldTransforms)}function s9(t,e,n,r=!1){return Ua(n,t.Cc(r?4:3,e))}function Ua(t,e){if(nA(t=lt(t)))return Wv("Unsupported field value:",e,t),tA(t,e);if(t instanceof em)return function(r,i){if(!ZC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ua(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:Gd(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,s)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sn)return{bytesValue:xC(i.serializer,r._byteString)};if(r instanceof Ye){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yr)return function(o,a){return{mapValue:{fields:{[XI]:{stringValue:JI},[$d]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return xv(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ff(r)}`)}(t,e)}function tA(t,e){const n={};return WI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,i)=>{const s=Ua(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function nA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof gr||t instanceof Sn||t instanceof Ye||t instanceof em||t instanceof yr)}function Wv(t,e,n){if(!nA(n)||!$I(n)){const r=Ff(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _y(t,e,n){if((e=lt(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return Kv(t,e);throw Zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const o9=new RegExp("[~\\*/\\[\\]]");function Kv(t,e,n){if(e.search(o9)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zf(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(U.INVALID_ARGUMENT,a+t+l)}function rA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a9 extends iA{data(){return super.data()}}function qv(t,e){return typeof e=="string"?Kv(t,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gv{}class l9 extends Gv{}function oA(t,e,...n){let r=[];e instanceof Gv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Yv).length,a=s.filter(l=>l instanceof im).length;if(o>1||o>0&&a>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class im extends l9{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new im(e,n,r)}_apply(e){const n=this._parse(e);return lA(e._query,n),new mo(e.firestore,e.converter,ly(e._query,n))}_parse(e){const n=nm(e.firestore);return function(s,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Ox(d,u);const y=[];for(const v of d)y.push(Dx(l,s,v));f={arrayValue:{values:y}}}else f=Dx(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Ox(d,u),f=s9(a,o,d,u==="in"||u==="not-in");return ot.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function aA(t,e,n){const r=e,i=qv("where",t);return im._create(i,r,n)}class Yv extends Gv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)lA(o,l),o=ly(o,l)}(e._query,n),new mo(e.firestore,e.converter,ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dx(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oC(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!ne.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QE(t,new ne(r))}if(n instanceof Ye)return QE(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ff(n)}.`)}function Ox(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c9{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[$d].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Je(o.doubleValue));return new yr(n)}convertGeoPoint(e){return new gr(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Se(CC(r),9688,{name:e});const i=new Lc(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends iA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:at("string",Ws._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class qh extends Ws{data(e={}){return super.data(e)}}class Ks{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qh(this._firestore,this._userDataWriter,r.key,r,new Nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:u9(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){t=cn(t,Ye);const e=cn(t.firestore,Gr);return GF(Jf(e),t._key).then(n=>fA(e,t,n))}Ks._jsonSchemaVersion="firestore/querySnapshot/1.0",Ks._jsonSchema={type:at("string",Ks._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class Qv extends c9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function h9(t){t=cn(t,mo);const e=cn(t.firestore,Gr),n=Jf(e),r=new Qv(e);return sA(t._query),YF(n,t._query).then(i=>new Ks(e,r,t,i))}function hA(t,e,n){t=cn(t,Ye);const r=cn(t.firestore,Gr),i=cA(t.converter,e);return sm(r,[eA(nm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rn.none())])}function xi(t,e,n,...r){t=cn(t,Ye);const i=cn(t.firestore,Gr),s=nm(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof Zf?i9(s,"updateDoc",t._key,e,n,r):r9(s,"updateDoc",t._key,e),sm(i,[o.toMutation(t._key,Rn.exists(!0))])}function d9(t){return sm(cn(t.firestore,Gr),[new bv(t._key,Rn.none())])}function f9(t,e){const n=cn(t.firestore,Gr),r=Wi(t),i=cA(t.converter,e);return sm(n,[eA(nm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function dA(t,...e){var l,c,u;t=lt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Mx(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Mx(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(c=d.error)==null?void 0:c.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof Ye)o=cn(t.firestore,Gr),a=zf(t._key.path),s={next:d=>{e[r]&&e[r](fA(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=cn(t,mo);o=cn(d.firestore,Gr),a=d._query;const f=new Qv(o);s={next:p=>{e[r]&&e[r](new Ks(o,f,d,p))},error:e[r+1],complete:e[r+2]},sA(t._query)}return function(f,p,y,v){const x=new $v(v),_=new Uv(p,x,y);return f.asyncQueue.enqueueAndForget(async()=>Vv(await Jd(f),_)),()=>{x.Nu(),f.asyncQueue.enqueueAndForget(async()=>Fv(await Jd(f),_))}}(Jf(o),a,i,s)}function sm(t,e){return function(r,i){const s=new Br;return r.asyncQueue.enqueueAndForget(async()=>LF(await qF(r),i,s)),s.promise}(Jf(t),e)}function fA(t,e,n){const r=n.docs.get(e._key),i=new Qv(t);return new Ws(t,i,e._key,r,new Nl(n.hasPendingWrites,n.fromCache),e.converter)}function m9(...t){return new Hv("arrayUnion",t)}(function(e,n=!0){(function(i){La=i})(Da),fa(new no("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Gr(new n3(r.getProvider("auth-internal")),new s3(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(c.options.projectId,u)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zi(VE,FE,e),zi(VE,FE,"esm2020")})();const p9={apiKey:"AIzaSyDYDzh-EBSrzHXDHv1IWrIxrRD6HMNsrV8",authDomain:"student-productivity-6923e.firebaseapp.com",projectId:"student-productivity-6923e",storageBucket:"student-productivity-6923e.firebasestorage.app",messagingSenderId:"561944741556",appId:"1:561944741556:web:57c692a6ac31123ee639e1",measurementId:"G-22L5Y519SX"},mA=Q2(p9),na=JV(mA),Kn=XF(mA),pA=C.createContext({user:null});function g9({children:t}){const[e,n]=C.useState(null),[r,i]=C.useState(!0);return C.useEffect(()=>{const s=jL(na,o=>{n(o),i(!1)});return()=>s()},[]),m.createElement(pA.Provider,{value:{user:e,initializing:r}},t)}function ms(){return C.useContext(pA)}var gA={exports:{}},om={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9=C,v9=Symbol.for("react.element"),_9=Symbol.for("react.fragment"),w9=Object.prototype.hasOwnProperty,E9=y9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x9={key:!0,ref:!0,__self:!0,__source:!0};function yA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)w9.call(e,r)&&!x9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:v9,type:t,key:s,ref:o,props:i,_owner:E9.current}}om.Fragment=_9;om.jsx=yA;om.jsxs=yA;gA.exports=om;var Xn=gA.exports;const Xv=C.createContext({});function Jv(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const Zv=typeof window<"u",vA=Zv?C.useLayoutEffect:C.useEffect,am=C.createContext(null);function e_(t,e){t.indexOf(e)===-1&&t.push(e)}function t_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Yr=(t,e,n)=>n>e?e:n<t?t:n;let n_=()=>{};const Qr={},_A=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function wA(t){return typeof t=="object"&&t!==null}const EA=t=>/^0[^.\s]+$/u.test(t);function r_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Nn=t=>t,b9=(t,e)=>n=>e(t(n)),pu=(...t)=>t.reduce(b9),Bc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class i_{constructor(){this.subscriptions=[]}add(e){return e_(this.subscriptions,e),()=>t_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=t=>t*1e3,Cn=t=>t/1e3;function xA(t,e){return e?t*(1e3/e):0}const bA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,T9=1e-7,k9=12;function S9(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=bA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>T9&&++a<k9);return o}function gu(t,e,n,r){if(t===e&&n===r)return Nn;const i=s=>S9(s,0,1,t,n);return s=>s===0||s===1?s:bA(i(s),e,r)}const TA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kA=t=>e=>1-t(1-e),SA=gu(.33,1.53,.69,.99),s_=kA(SA),IA=TA(s_),CA=t=>(t*=2)<1?.5*s_(t):.5*(2-Math.pow(2,-10*(t-1))),o_=t=>1-Math.sin(Math.acos(t)),AA=kA(o_),PA=TA(o_),I9=gu(.42,0,1,1),C9=gu(0,0,.58,1),RA=gu(.42,0,.58,1),A9=t=>Array.isArray(t)&&typeof t[0]!="number",NA=t=>Array.isArray(t)&&typeof t[0]=="number",P9={linear:Nn,easeIn:I9,easeInOut:RA,easeOut:C9,circIn:o_,circInOut:PA,circOut:AA,backIn:s_,backInOut:IA,backOut:SA,anticipate:CA},R9=t=>typeof t=="string",Lx=t=>{if(NA(t)){n_(t.length===4);const[e,n,r,i]=t;return gu(e,n,r,i)}else if(R9(t))return P9[t];return t},ih=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function N9(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,d=!1,f=!1)=>{const y=f&&i?n:r;return d&&o.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const M9=40;function MA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=ih.reduce((T,I)=>(T[I]=N9(s),T),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:p,postRender:y}=o,v=()=>{const T=Qr.useManualTiming?i.timestamp:performance.now();n=!1,Qr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,M9),1)),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),p.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},x=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:ih.reduce((T,I)=>{const R=o[I];return T[I]=(O,k=!1,b=!1)=>(n||x(),R.schedule(O,k,b)),T},{}),cancel:T=>{for(let I=0;I<ih.length;I++)o[ih[I]].cancel(T)},state:i,steps:o}}const{schedule:Ue,cancel:ns,state:It,steps:yp}=MA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0);let Gh;function D9(){Gh=void 0}const sn={now:()=>(Gh===void 0&&sn.set(It.isProcessing||Qr.useManualTiming?It.timestamp:performance.now()),Gh),set:t=>{Gh=t,queueMicrotask(D9)}},DA=t=>e=>typeof e=="string"&&e.startsWith(t),OA=DA("--"),O9=DA("var(--"),a_=t=>O9(t)?L9.test(t.split("/*")[0].trim()):!1,L9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ja={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uc={...ja,transform:t=>Yr(0,1,t)},sh={...ja,default:1},nc=t=>Math.round(t*1e5)/1e5,l_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function V9(t){return t==null}const F9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c_=(t,e)=>n=>!!(typeof n=="string"&&F9.test(n)&&n.startsWith(t)||e&&!V9(n)&&Object.prototype.hasOwnProperty.call(n,e)),LA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(l_);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},B9=t=>Yr(0,255,t),vp={...ja,transform:t=>Math.round(B9(t))},Bs={test:c_("rgb","red"),parse:LA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+vp.transform(t)+", "+vp.transform(e)+", "+vp.transform(n)+", "+nc(Uc.transform(r))+")"};function U9(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const wy={test:c_("#"),parse:U9,transform:Bs.transform},yu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),di=yu("deg"),_r=yu("%"),le=yu("px"),j9=yu("vh"),z9=yu("vw"),Vx={..._r,parse:t=>_r.parse(t)/100,transform:t=>_r.transform(t*100)},Uo={test:c_("hsl","hue"),parse:LA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_r.transform(nc(e))+", "+_r.transform(nc(n))+", "+nc(Uc.transform(r))+")"},it={test:t=>Bs.test(t)||wy.test(t)||Uo.test(t),parse:t=>Bs.test(t)?Bs.parse(t):Uo.test(t)?Uo.parse(t):wy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bs.transform(t):Uo.transform(t),getAnimatableNone:t=>{const e=it.parse(t);return e.alpha=0,it.transform(e)}},$9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function H9(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(l_))==null?void 0:e.length)||0)+(((n=t.match($9))==null?void 0:n.length)||0)>0}const VA="number",FA="color",W9="var",K9="var(",Fx="${}",q9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(q9,l=>(it.test(l)?(r.color.push(s),i.push(FA),n.push(it.parse(l))):l.startsWith(K9)?(r.var.push(s),i.push(W9),n.push(l)):(r.number.push(s),i.push(VA),n.push(parseFloat(l))),++s,Fx)).split(Fx);return{values:n,split:a,indexes:r,types:i}}function BA(t){return jc(t).values}function UA(t){const{split:e,types:n}=jc(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===VA?s+=nc(i[o]):a===FA?s+=it.transform(i[o]):s+=i[o]}return s}}const G9=t=>typeof t=="number"?0:it.test(t)?it.getAnimatableNone(t):t;function Y9(t){const e=BA(t);return UA(t)(e.map(G9))}const rs={test:H9,parse:BA,createTransformer:UA,getAnimatableNone:Y9};function _p(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Q9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=_p(l,a,t+1/3),s=_p(l,a,t),o=_p(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function ef(t,e){return n=>n>0?e:t}const ze=(t,e,n)=>t+(e-t)*n,wp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},X9=[wy,Bs,Uo],J9=t=>X9.find(e=>e.test(t));function Bx(t){const e=J9(t);if(!e)return!1;let n=e.parse(t);return e===Uo&&(n=Q9(n)),n}const Ux=(t,e)=>{const n=Bx(t),r=Bx(e);if(!n||!r)return ef(t,e);const i={...n};return s=>(i.red=wp(n.red,r.red,s),i.green=wp(n.green,r.green,s),i.blue=wp(n.blue,r.blue,s),i.alpha=ze(n.alpha,r.alpha,s),Bs.transform(i))},Ey=new Set(["none","hidden"]);function Z9(t,e){return Ey.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function e7(t,e){return n=>ze(t,e,n)}function u_(t){return typeof t=="number"?e7:typeof t=="string"?a_(t)?ef:it.test(t)?Ux:r7:Array.isArray(t)?jA:typeof t=="object"?it.test(t)?Ux:t7:ef}function jA(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>u_(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function t7(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=u_(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function n7(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const r7=(t,e)=>{const n=rs.createTransformer(e),r=jc(t),i=jc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ey.has(t)&&!i.values.length||Ey.has(e)&&!r.values.length?Z9(t,e):pu(jA(n7(r,i),i.values),n):ef(t,e)};function zA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ze(t,e,n):u_(t)(t,e)}const i7=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ue.update(e,n),stop:()=>ns(e),now:()=>It.isProcessing?It.timestamp:sn.now()}},$A=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},tf=2e4;function h_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tf;)e+=n,r=t.next(e);return e>=tf?1/0:e}function s7(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(h_(r),tf);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Cn(i)}}const o7=5;function HA(t,e,n){const r=Math.max(e-o7,0);return xA(n-t(r),e-r)}const qe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ep=.001;function a7({duration:t=qe.duration,bounce:e=qe.bounce,velocity:n=qe.velocity,mass:r=qe.mass}){let i,s,o=1-e;o=Yr(qe.minDamping,qe.maxDamping,o),t=Yr(qe.minDuration,qe.maxDuration,Cn(t)),o<1?(i=c=>{const u=c*o,d=u*t,f=u-n,p=xy(c,o),y=Math.exp(-d);return Ep-f/p*y},s=c=>{const d=c*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),v=xy(Math.pow(c,2),o);return(-i(c)+Ep>0?-1:1)*((f-p)*y)/v}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Ep+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=c7(i,s,a);if(t=vr(t),isNaN(l))return{stiffness:qe.stiffness,damping:qe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const l7=12;function c7(t,e,n){let r=n;for(let i=1;i<l7;i++)r=r-t(r)/e(r);return r}function xy(t,e){return t*Math.sqrt(1-e*e)}const u7=["duration","bounce"],h7=["stiffness","damping","mass"];function jx(t,e){return e.some(n=>t[n]!==void 0)}function d7(t){let e={velocity:qe.velocity,stiffness:qe.stiffness,damping:qe.damping,mass:qe.mass,isResolvedFromDuration:!1,...t};if(!jx(t,h7)&&jx(t,u7))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Yr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:qe.mass,stiffness:i,damping:s}}else{const n=a7(t);e={...e,...n,mass:qe.mass},e.isResolvedFromDuration=!0}return e}function nf(t=qe.visualDuration,e=qe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=d7({...n,velocity:-Cn(n.velocity||0)}),y=f||0,v=c/(2*Math.sqrt(l*u)),x=o-s,_=Cn(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?qe.restSpeed.granular:qe.restSpeed.default),i||(i=w?qe.restDelta.granular:qe.restDelta.default);let T;if(v<1){const R=xy(_,v);T=O=>{const k=Math.exp(-v*_*O);return o-k*((y+v*_*x)/R*Math.sin(R*O)+x*Math.cos(R*O))}}else if(v===1)T=R=>o-Math.exp(-_*R)*(x+(y+_*x)*R);else{const R=_*Math.sqrt(v*v-1);T=O=>{const k=Math.exp(-v*_*O),b=Math.min(R*O,300);return o-k*((y+v*_*x)*Math.sinh(b)+R*x*Math.cosh(b))/R}}const I={calculatedDuration:p&&d||null,next:R=>{const O=T(R);if(p)a.done=R>=d;else{let k=R===0?y:0;v<1&&(k=R===0?vr(y):HA(T,R,O));const b=Math.abs(k)<=r,S=Math.abs(o-O)<=i;a.done=b&&S}return a.value=a.done?o:O,a},toString:()=>{const R=Math.min(h_(I),tf),O=$A(k=>I.next(R*k).value,R,30);return R+"ms "+O},toTransition:()=>{}};return I}nf.applyToOptions=t=>{const e=s7(t,100,nf);return t.ease=e.ease,t.duration=vr(e.duration),t.type="keyframes",t};function by({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=b=>a!==void 0&&b<a||l!==void 0&&b>l,y=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let v=n*e;const x=d+v,_=o===void 0?x:o(x);_!==x&&(v=_-d);const w=b=>-v*Math.exp(-b/r),T=b=>_+w(b),I=b=>{const S=w(b),P=T(b);f.done=Math.abs(S)<=c,f.value=f.done?_:P};let R,O;const k=b=>{p(f.value)&&(R=b,O=nf({keyframes:[f.value,y(f.value)],velocity:HA(T,b,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:b=>{let S=!1;return!O&&R===void 0&&(S=!0,I(b),k(b)),R!==void 0&&b>=R?O.next(b-R):(!S&&I(b),f)}}}function f7(t,e,n){const r=[],i=n||Qr.mix||zA,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Nn:e;a=pu(l,a)}r.push(a)}return r}function m7(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(n_(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=f7(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=Bc(t[d],t[d+1],u);return a[d](f)};return n?u=>c(Yr(t[0],t[s-1],u)):c}function p7(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Bc(0,e,r);t.push(ze(n,1,i))}}function g7(t){const e=[0];return p7(e,t.length-1),e}function y7(t,e){return t.map(n=>n*e)}function v7(t,e){return t.map(()=>e||RA).splice(0,t.length-1)}function rc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=A9(r)?r.map(Lx):Lx(r),s={done:!1,value:e[0]},o=y7(n&&n.length===e.length?n:g7(e),t),a=m7(o,e,{ease:Array.isArray(i)?i:v7(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const _7=t=>t!==null;function d_(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(_7),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const w7={decay:by,inertia:by,tween:rc,keyframes:rc,spring:nf};function WA(t){typeof t.type=="string"&&(t.type=w7[t.type])}class f_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const E7=t=>t/100;class m_ extends f_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==sn.now()&&this.tick(sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WA(e);const{type:n=rc,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||rc;l!==rc&&typeof a[0]!="number"&&(this.mixKeyframes=pu(E7,zA(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=h_(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:p,type:y,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,I=r;if(d){const b=Math.min(this.currentTime,i)/a;let S=Math.floor(b),P=b%1;!P&&b>=1&&(P=1),P===1&&S--,S=Math.min(S,d+1),!!(S%2)&&(f==="reverse"?(P=1-P,p&&(P-=p/a)):f==="mirror"&&(I=o)),T=Yr(0,1,P)*a}const R=w?{done:!1,value:u[0]}:I.next(T);s&&(R.value=s(R.value));let{done:O}=R;!w&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&y!==by&&(R.value=d_(u,this.options,x,this.speed)),v&&v(R.value),k&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Cn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cn(e)}get time(){return Cn(this.currentTime)}set time(e){var n;e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(sn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=i7,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function x7(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Us=t=>t*180/Math.PI,Ty=t=>{const e=Us(Math.atan2(t[1],t[0]));return ky(e)},b7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ty,rotateZ:Ty,skewX:t=>Us(Math.atan(t[1])),skewY:t=>Us(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ky=t=>(t=t%360,t<0&&(t+=360),t),zx=Ty,$x=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Hx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),T7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$x,scaleY:Hx,scale:t=>($x(t)+Hx(t))/2,rotateX:t=>ky(Us(Math.atan2(t[6],t[5]))),rotateY:t=>ky(Us(Math.atan2(-t[2],t[0]))),rotateZ:zx,rotate:zx,skewX:t=>Us(Math.atan(t[4])),skewY:t=>Us(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Sy(t){return t.includes("scale")?1:0}function Iy(t,e){if(!t||t==="none")return Sy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=T7,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=b7,i=a}if(!i)return Sy(e);const s=r[e],o=i[1].split(",").map(S7);return typeof s=="function"?s(o):o[s]}const k7=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Iy(n,e)};function S7(t){return parseFloat(t.trim())}const za=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$a=new Set(za),Wx=t=>t===ja||t===le,I7=new Set(["x","y","z"]),C7=za.filter(t=>!I7.has(t));function A7(t){const e=[];return C7.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const qs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Iy(e,"x"),y:(t,{transform:e})=>Iy(e,"y")};qs.translateX=qs.x;qs.translateY=qs.y;const Gs=new Set;let Cy=!1,Ay=!1,Py=!1;function KA(){if(Ay){const t=Array.from(Gs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=A7(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ay=!1,Cy=!1,Gs.forEach(t=>t.complete(Py)),Gs.clear()}function qA(){Gs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ay=!0)})}function P7(){Py=!0,qA(),KA(),Py=!1}class p_{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Gs.add(this),Cy||(Cy=!0,Ue.read(qA),Ue.resolveKeyframes(KA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}x7(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Gs.delete(this)}cancel(){this.state==="scheduled"&&(Gs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const R7=t=>t.startsWith("--");function N7(t,e,n){R7(e)?t.style.setProperty(e,n):t.style[e]=n}const M7=r_(()=>window.ScrollTimeline!==void 0),D7={};function O7(t,e){const n=r_(t);return()=>D7[e]??n()}const GA=O7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ml=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Kx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ml([0,.65,.55,1]),circOut:Ml([.55,0,1,.45]),backIn:Ml([.31,.01,.66,-.59]),backOut:Ml([.33,1.53,.69,.99])};function YA(t,e){if(t)return typeof t=="function"?GA()?$A(t,e):"ease-out":NA(t)?Ml(t):Array.isArray(t)?t.map(n=>YA(n,e)||Kx.easeOut):Kx[t]}function L7(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=YA(a,i);Array.isArray(d)&&(u.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),t.animate(u,f)}function QA(t){return typeof t=="function"&&"applyToOptions"in t}function V7({type:t,...e}){return QA(t)&&GA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class F7 extends f_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,n_(typeof e.type!="string");const c=V7(e);this.animation=L7(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=d_(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):N7(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Cn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cn(e)}get time(){return Cn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&M7()?(this.animation.timeline=e,Nn):n(this)}}const XA={anticipate:CA,backInOut:IA,circInOut:PA};function B7(t){return t in XA}function U7(t){typeof t.ease=="string"&&B7(t.ease)&&(t.ease=XA[t.ease])}const qx=10;class j7 extends F7{constructor(e){U7(e),WA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new m_({...o,autoplay:!1}),l=vr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-qx).value,a.sample(l).value,qx),a.stop()}}const Gx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rs.test(t)||t==="0")&&!t.startsWith("url("));function z7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function $7(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Gx(i,e),a=Gx(s,e);return!o||!a?!1:z7(t)||(n==="spring"||QA(n))&&r}function Ry(t){t.duration=0,t.type="keyframes"}const H7=new Set(["opacity","clipPath","filter","transform"]),W7=r_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function K7(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return W7()&&n&&H7.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const q7=40;class G7 extends f_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...d}){var y;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=sn.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...d},p=(u==null?void 0:u.KeyframeResolver)||p_;this.keyframeResolver=new p(a,(v,x,_)=>this.onKeyframesResolved(v,x,f,!_),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=sn.now(),$7(e,s,o,a)||((Qr.instantAnimations||!l)&&(u==null||u(d_(e,r,n))),e[0]=e[e.length-1],Ry(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>q7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!c&&K7(f)?new j7({...f,element:f.motionValue.owner.current}):new m_(f);p.finished.then(()=>this.notifyFinished()).catch(Nn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),P7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Y7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Q7(t){const e=Y7.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function JA(t,e,n=1){const[r,i]=Q7(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return _A(o)?parseFloat(o):o}return a_(i)?JA(i,e,n+1):i}function g_(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const ZA=new Set(["width","height","top","left","right","bottom",...za]),X7={test:t=>t==="auto",parse:t=>t},eP=t=>e=>e.test(t),tP=[ja,le,_r,di,z9,j9,X7],Yx=t=>tP.find(eP(t));function J7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||EA(t):!0}const Z7=new Set(["brightness","contrast","saturate","opacity"]);function e8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(l_)||[];if(!r)return t;const i=n.replace(r,"");let s=Z7.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const t8=/\b([a-z-]*)\(.*?\)/gu,Ny={...rs,getAnimatableNone:t=>{const e=t.match(t8);return e?e.map(e8).join(" "):t}},Qx={...ja,transform:Math.round},n8={rotate:di,rotateX:di,rotateY:di,rotateZ:di,scale:sh,scaleX:sh,scaleY:sh,scaleZ:sh,skew:di,skewX:di,skewY:di,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Uc,originX:Vx,originY:Vx,originZ:le},y_={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...n8,zIndex:Qx,fillOpacity:Uc,strokeOpacity:Uc,numOctaves:Qx},r8={...y_,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:Ny,WebkitFilter:Ny},nP=t=>r8[t];function rP(t,e){let n=nP(t);return n!==Ny&&(n=rs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const i8=new Set(["auto","none","0"]);function s8(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!i8.has(s)&&jc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=rP(n,i)}class o8 extends p_{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),a_(c))){const u=JA(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!ZA.has(r)||e.length!==2)return;const[i,s]=e,o=Yx(i),a=Yx(s);if(o!==a)if(Wx(o)&&Wx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else qs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||J7(e[i]))&&r.push(i);r.length&&s8(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=qs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function a8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const iP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function sP(t){return wA(t)&&"offsetHeight"in t}const Xx=30,l8=t=>!isNaN(parseFloat(t));class c8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=sn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=l8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new i_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xx);return xA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xa(t,e){return new c8(t,e)}const{schedule:v_}=MA(queueMicrotask,!1),zn={x:!1,y:!1};function oP(){return zn.x||zn.y}function u8(t){return t==="x"||t==="y"?zn[t]?null:(zn[t]=!0,()=>{zn[t]=!1}):zn.x||zn.y?null:(zn.x=zn.y=!0,()=>{zn.x=zn.y=!1})}function aP(t,e){const n=a8(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Jx(t){return!(t.pointerType==="touch"||oP())}function h8(t,e,n={}){const[r,i,s]=aP(t,n),o=a=>{if(!Jx(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=d=>{Jx(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const lP=(t,e)=>e?t===e?!0:lP(t,e.parentElement):!1,__=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,d8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function f8(t){return d8.has(t.tagName)||t.tabIndex!==-1}const Yh=new WeakSet;function Zx(t){return e=>{e.key==="Enter"&&t(e)}}function xp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const m8=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zx(()=>{if(Yh.has(n))return;xp(n,"down");const i=Zx(()=>{xp(n,"up")}),s=()=>xp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function eb(t){return __(t)&&!oP()}function p8(t,e,n={}){const[r,i,s]=aP(t,n),o=a=>{const l=a.currentTarget;if(!eb(a))return;Yh.add(l);const c=e(l,a),u=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Yh.has(l)&&Yh.delete(l),eb(p)&&typeof c=="function"&&c(p,{success:y})},d=p=>{u(p,l===window||l===document||n.useGlobalTarget||lP(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),sP(a)&&(a.addEventListener("focus",c=>m8(c,i)),!f8(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function cP(t){return wA(t)&&"ownerSVGElement"in t}function g8(t){return cP(t)&&t.tagName==="svg"}const Ut=t=>!!(t&&t.getVelocity),y8=[...tP,it,rs],v8=t=>y8.find(eP(t)),w_=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function tb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _8(...t){return e=>{let n=!1;const r=t.map(i=>{const s=tb(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():tb(t[i],null)}}}}function w8(...t){return C.useCallback(_8(...t),t)}class E8 extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=sP(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x8({children:t,isPresent:e,anchorX:n,root:r}){const i=C.useId(),s=C.useRef(null),o=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=C.useContext(w_),l=w8(s,t==null?void 0:t.ref);return C.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:p}=o.current;if(e||!s.current||!c||!u)return;const y=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");a&&(v.nonce=a);const x=r??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[e]),Xn.jsx(E8,{isPresent:e,childRef:s,sizeRef:o,children:C.cloneElement(t,{ref:l})})}const b8=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=Jv(T8),u=C.useId();let d=!0,f=C.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const y of c.values())if(!y)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return s&&d&&(f={...f}),C.useMemo(()=>{c.forEach((p,y)=>c.set(y,!1))},[n]),C.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=Xn.jsx(x8,{isPresent:n,anchorX:a,root:l,children:t})),Xn.jsx(am.Provider,{value:f,children:t})};function T8(){return new Map}function uP(t=!0){const e=C.useContext(am);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=C.useId();C.useEffect(()=>{if(t)return i(s)},[t]);const o=C.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const oh=t=>t.key||"";function nb(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const hP=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=uP(o),d=C.useMemo(()=>nb(t),[t]),f=o&&!c?[]:d.map(oh),p=C.useRef(!0),y=C.useRef(d),v=Jv(()=>new Map),[x,_]=C.useState(d),[w,T]=C.useState(d);vA(()=>{p.current=!1,y.current=d;for(let O=0;O<w.length;O++){const k=oh(w[O]);f.includes(k)?v.delete(k):v.get(k)!==!0&&v.set(k,!1)}},[w,f.length,f.join("-")]);const I=[];if(d!==x){let O=[...d];for(let k=0;k<w.length;k++){const b=w[k],S=oh(b);f.includes(S)||(O.splice(k,0,b),I.push(b))}return s==="wait"&&I.length&&(O=I),T(nb(O)),_(d),null}const{forceRender:R}=C.useContext(Xv);return Xn.jsx(Xn.Fragment,{children:w.map(O=>{const k=oh(O),b=o&&!c?!1:d===w||f.includes(k),S=()=>{if(v.has(k))v.set(k,!0);else return;let P=!0;v.forEach(N=>{N||(P=!1)}),P&&(R==null||R(),T(y.current),o&&(u==null||u()),r&&r())};return Xn.jsx(b8,{isPresent:b,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:b?void 0:S,anchorX:a,children:O},k)})})},dP=C.createContext({strict:!1}),rb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ba={};for(const t in rb)ba[t]={isEnabled:e=>rb[t].some(n=>!!e[n])};function k8(t){for(const e in t)ba[e]={...ba[e],...t[e]}}const S8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||S8.has(t)}let fP=t=>!rf(t);function I8(t){typeof t=="function"&&(fP=e=>e.startsWith("on")?!rf(e):t(e))}try{I8(require("@emotion/is-prop-valid").default)}catch{}function C8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(fP(i)||n===!0&&rf(i)||!e&&!rf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const lm=C.createContext({});function cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zc(t){return typeof t=="string"||Array.isArray(t)}const E_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x_=["initial",...E_];function um(t){return cm(t.animate)||x_.some(e=>zc(t[e]))}function mP(t){return!!(um(t)||t.variants)}function A8(t,e){if(um(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zc(n)?n:void 0,animate:zc(r)?r:void 0}}return t.inherit!==!1?e:{}}function P8(t){const{initial:e,animate:n}=A8(t,C.useContext(lm));return C.useMemo(()=>({initial:e,animate:n}),[ib(e),ib(n)])}function ib(t){return Array.isArray(t)?t.join(" "):t}function sb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=sb(t,e.target.x),r=sb(t,e.target.y);return`${n}% ${r}%`}},R8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=rs.parse(t);if(i.length>5)return r;const s=rs.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ze(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},My={borderRadius:{...yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yl,borderTopRightRadius:yl,borderBottomLeftRadius:yl,borderBottomRightRadius:yl,boxShadow:R8};function pP(t,{layout:e,layoutId:n}){return $a.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!My[t]||t==="opacity")}const N8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M8=za.length;function D8(t,e,n){let r="",i=!0;for(let s=0;s<M8;s++){const o=za[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=iP(a,y_[o]);if(!l){i=!1;const u=N8[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function b_(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if($a.has(l)){o=!0;continue}else if(OA(l)){i[l]=c;continue}else{const u=iP(c,y_[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=D8(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const T_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gP(t,e,n){for(const r in e)!Ut(e[r])&&!pP(r,n)&&(t[r]=e[r])}function O8({transformTemplate:t},e){return C.useMemo(()=>{const n=T_();return b_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function L8(t,e){const n=t.style||{},r={};return gP(r,n,t),Object.assign(r,O8(t,e)),r}function V8(t,e){const n={},r=L8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const F8={offset:"stroke-dashoffset",array:"stroke-dasharray"},B8={offset:"strokeDashoffset",array:"strokeDasharray"};function U8(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?F8:B8;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function yP(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(b_(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&U8(d,i,s,o,!1)}const vP=()=>({...T_(),attrs:{}}),_P=t=>typeof t=="string"&&t.toLowerCase()==="svg";function j8(t,e,n,r){const i=C.useMemo(()=>{const s=vP();return yP(s,e,_P(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};gP(s,t.style,t),i.style={...s,...i.style}}return i}const z8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k_(t){return typeof t!="string"||t.includes("-")?!1:!!(z8.indexOf(t)>-1||/[A-Z]/u.test(t))}function $8(t,e,n,{latestValues:r},i,s=!1){const a=(k_(t)?j8:V8)(e,r,i,t),l=C8(e,typeof t=="string",s),c=t!==C.Fragment?{...l,...a,ref:n}:{},{children:u}=e,d=C.useMemo(()=>Ut(u)?u.get():u,[u]);return C.createElement(t,{...c,children:d})}function ob(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function S_(t,e,n,r){if(typeof e=="function"){const[i,s]=ob(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ob(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Qh(t){return Ut(t)?t.get():t}function H8({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:W8(n,r,i,t),renderState:e()}}function W8(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Qh(s[f]);let{initial:o,animate:a}=t;const l=um(t),c=mP(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!cm(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const y=S_(t,f[p]);if(y){const{transitionEnd:v,transition:x,..._}=y;for(const w in _){let T=_[w];if(Array.isArray(T)){const I=u?T.length-1:0;T=T[I]}T!==null&&(i[w]=T)}for(const w in v)i[w]=v[w]}}}return i}const wP=t=>(e,n)=>{const r=C.useContext(lm),i=C.useContext(am),s=()=>H8(t,e,r,i);return n?s():Jv(s)};function I_(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Ut(r[o])||e.style&&Ut(e.style[o])||pP(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const K8=wP({scrapeMotionValuesFromProps:I_,createRenderState:T_});function EP(t,e,n){const r=I_(t,e,n);for(const i in t)if(Ut(t[i])||Ut(e[i])){const s=za.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const q8=wP({scrapeMotionValuesFromProps:EP,createRenderState:vP}),G8=Symbol.for("motionComponentSymbol");function jo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Y8(t,e,n){return C.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):jo(n)&&(n.current=r))},[e])}const C_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Q8="framerAppearId",xP="data-"+C_(Q8),bP=C.createContext({});function X8(t,e,n,r,i){var v,x;const{visualElement:s}=C.useContext(lm),o=C.useContext(dP),a=C.useContext(am),l=C.useContext(w_).reducedMotion,c=C.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=C.useContext(bP);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&J8(c.current,n,i,d);const f=C.useRef(!1);C.useInsertionEffect(()=>{u&&f.current&&u.update(n,a)});const p=n[xP],y=C.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return vA(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),C.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,p)}),y.current=!1),u.enteringChildren=void 0)}),u}function J8(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:TP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&jo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function TP(t){if(t)return t.options.allowProjection!==!1?t.projection:TP(t.parent)}function bp(t,{forwardMotionProps:e=!1}={},n,r){n&&k8(n);const i=k_(t)?q8:K8;function s(a,l){let c;const u={...C.useContext(w_),...a,layoutId:Z8(a)},{isStatic:d}=u,f=P8(a),p=i(a,d);if(!d&&Zv){eB();const y=tB(u);c=y.MeasureLayout,f.visualElement=X8(t,p,u,r,y.ProjectionNode)}return Xn.jsxs(lm.Provider,{value:f,children:[c&&f.visualElement?Xn.jsx(c,{visualElement:f.visualElement,...u}):null,$8(t,a,Y8(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=C.forwardRef(s);return o[G8]=t,o}function Z8({layoutId:t}){const e=C.useContext(Xv).id;return e&&t!==void 0?e+"-"+t:t}function eB(t,e){C.useContext(dP).strict}function tB(t){const{drag:e,layout:n}=ba;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function nB(t,e){if(typeof Proxy>"u")return bp;const n=new Map,r=(s,o)=>bp(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,bp(o,void 0,t,e)),n.get(o))})}function kP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function rB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Tp(t){return t===void 0||t===1}function Dy({scale:t,scaleX:e,scaleY:n}){return!Tp(t)||!Tp(e)||!Tp(n)}function Rs(t){return Dy(t)||SP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SP(t){return ab(t.x)||ab(t.y)}function ab(t){return t&&t!=="0%"}function sf(t,e,n){const r=t-n,i=e*r;return n+i}function lb(t,e,n,r,i){return i!==void 0&&(t=sf(t,i,r)),sf(t,n,r)+e}function Oy(t,e=0,n=1,r,i){t.min=lb(t.min,e,n,r,i),t.max=lb(t.max,e,n,r,i)}function IP(t,{x:e,y:n}){Oy(t.x,e.translate,e.scale,e.originPoint),Oy(t.y,n.translate,n.scale,n.originPoint)}const cb=.999999999999,ub=1.0000000000001;function sB(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&$o(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,IP(t,o)),r&&Rs(s.latestValues)&&$o(t,s.latestValues))}e.x<ub&&e.x>cb&&(e.x=1),e.y<ub&&e.y>cb&&(e.y=1)}function zo(t,e){t.min=t.min+e,t.max=t.max+e}function hb(t,e,n,r,i=.5){const s=ze(t.min,t.max,i);Oy(t,e,n,s,r)}function $o(t,e){hb(t.x,e.x,e.scaleX,e.scale,e.originX),hb(t.y,e.y,e.scaleY,e.scale,e.originY)}function CP(t,e){return kP(iB(t.getBoundingClientRect(),e))}function oB(t,e,n){const r=CP(t,n),{scroll:i}=e;return i&&(zo(r.x,i.offset.x),zo(r.y,i.offset.y)),r}const db=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ho=()=>({x:db(),y:db()}),fb=()=>({min:0,max:0}),ht=()=>({x:fb(),y:fb()}),Ly={current:null},AP={current:!1};function aB(){if(AP.current=!0,!!Zv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ly.current=t.matches;t.addEventListener("change",e),e()}else Ly.current=!1}const lB=new WeakMap;function cB(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ut(i))t.addValue(r,i);else if(Ut(s))t.addValue(r,xa(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,xa(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const mb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=p_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=sn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ue.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=um(n),this.isVariantNode=mP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Ut(p)&&p.set(l[f])}}mount(e){var n;this.current=e,lB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),AP.current||aB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ly.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ns(this.notifyUpdate),ns(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=$a.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ba){const n=ba[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<mb.length;r++){const i=mb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=cB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=xa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(_A(r)||EA(r))?r=parseFloat(r):!v8(r)&&rs.test(n)&&(r=rP(e,n)),this.setBaseTarget(e,Ut(r)?r.get():r)),Ut(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=S_(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ut(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new i_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){v_.render(this.render)}}class PP extends uB{constructor(){super(...arguments),this.KeyframeResolver=o8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function RP(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function hB(t){return window.getComputedStyle(t)}class dB extends PP{constructor(){super(...arguments),this.type="html",this.renderInstance=RP}readValueFromInstance(e,n){var r;if($a.has(n))return(r=this.projection)!=null&&r.isProjecting?Sy(n):k7(e,n);{const i=hB(e),s=(OA(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CP(e,n)}build(e,n,r){b_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return I_(e,n,r)}}const NP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fB(t,e,n,r){RP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(NP.has(i)?i:C_(i),e.attrs[i])}class mB extends PP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if($a.has(n)){const r=nP(n);return r&&r.default||0}return n=NP.has(n)?n:C_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return EP(e,n,r)}build(e,n,r){yP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){fB(e,n,r,i)}mount(e){this.isSVGTag=_P(e.tagName),super.mount(e)}}const pB=(t,e)=>k_(t)?new mB(e):new dB(e,{allowProjection:t!==C.Fragment});function ra(t,e,n){const r=t.getProps();return S_(r,e,n!==void 0?n:r.custom,t)}const Vy=t=>Array.isArray(t);function gB(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,xa(n))}function yB(t){return Vy(t)?t[t.length-1]||0:t}function vB(t,e){const n=ra(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=yB(s[o]);gB(t,o,a)}}function _B(t){return!!(Ut(t)&&t.add)}function Fy(t,e){const n=t.getValue("willChange");if(_B(n))return n.add(e);if(!n&&Qr.WillChange){const r=new Qr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function MP(t){return t.props[xP]}const wB=t=>t!==null;function EB(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(wB),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const xB={type:"spring",stiffness:500,damping:25,restSpeed:10},bB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TB={type:"keyframes",duration:.8},kB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SB=(t,{keyframes:e})=>e.length>2?TB:$a.has(t)?t.startsWith("scale")?bB(e[1]):xB:kB;function IB({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const A_=(t,e,n,r={},i,s)=>o=>{const a=g_(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-vr(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};IB(a)||Object.assign(u,SB(t,u)),u.duration&&(u.duration=vr(u.duration)),u.repeatDelay&&(u.repeatDelay=vr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Ry(u),u.delay===0&&(d=!0)),(Qr.instantAnimations||Qr.skipAnimations)&&(d=!0,Ry(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=EB(u.keyframes,a);if(f!==void 0){Ue.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new m_(u):new G7(u)};function CB({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function DP(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const d=t.getValue(u,t.latestValues[u]??null),f=a[u];if(f===void 0||c&&CB(c,u))continue;const p={delay:n,...g_(s||{},u)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===y&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const _=MP(t);if(_){const w=window.MotionHandoffAnimation(_,u,Ue);w!==null&&(p.startTime=w,v=!0)}}Fy(t,u),d.start(A_(u,d,f,t.shouldReduceMotion&&ZA.has(u)?{type:!1}:p,t,v));const x=d.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{Ue.update(()=>{o&&vB(t,o)})}),l}function OP(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function By(t,e,n={}){var l;const r=ra(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(DP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=i;return AB(t,e,c,u,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function AB(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(By(l,e,{...o,delay:n+(typeof r=="function"?0:r)+OP(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function PB(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>By(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=By(t,e,n);else{const i=typeof e=="function"?ra(t,e,n.custom):e;r=Promise.all(DP(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function LP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const RB=x_.length;function VP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?VP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<RB;n++){const r=x_[n],i=t.props[r];(zc(i)||i===!1)&&(e[r]=i)}return e}const NB=[...E_].reverse(),MB=E_.length;function DB(t){return e=>Promise.all(e.map(({animation:n,options:r})=>PB(t,n,r)))}function OB(t){let e=DB(t),n=pb(),r=!0;const i=l=>(c,u)=>{var f;const d=ra(t,u,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:y,...v}=d;c={...c,...v,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=VP(t.parent)||{},d=[],f=new Set;let p={},y=1/0;for(let x=0;x<MB;x++){const _=NB[x],w=n[_],T=c[_]!==void 0?c[_]:u[_],I=zc(T),R=_===l?w.isActive:null;R===!1&&(y=x);let O=T===u[_]&&T!==c[_]&&I;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),w.protectedKeys={...p},!w.isActive&&R===null||!T&&!w.prevProp||cm(T)||typeof T=="boolean")continue;const k=LB(w.prevProp,T);let b=k||_===l&&w.isActive&&!O&&I||x>y&&I,S=!1;const P=Array.isArray(T)?T:[T];let N=P.reduce(i(_),{});R===!1&&(N={});const{prevResolvedValues:D={}}=w,M={...D,...N},ie=j=>{b=!0,f.has(j)&&(S=!0,f.delete(j)),w.needsAnimating[j]=!0;const V=t.getValue(j);V&&(V.liveStyle=!1)};for(const j in M){const V=N[j],W=D[j];if(p.hasOwnProperty(j))continue;let G=!1;Vy(V)&&Vy(W)?G=!LP(V,W):G=V!==W,G?V!=null?ie(j):f.add(j):V!==void 0&&f.has(j)?ie(j):w.protectedKeys[j]=!0}w.prevProp=T,w.prevResolvedValues=N,w.isActive&&(p={...p,...N}),r&&t.blockInitialAnimation&&(b=!1);const ee=O&&k;b&&(!ee||S)&&d.push(...P.map(j=>{const V={type:_};if(typeof j=="string"&&r&&!ee&&t.manuallyAnimateOnMount&&t.parent){const{parent:W}=t,G=ra(W,j);if(W.enteringChildren&&G){const{delayChildren:te}=G.transition||{};V.delay=OP(W.enteringChildren,t,te)}}return{animation:j,options:V}}))}if(f.size){const x={};if(typeof c.initial!="boolean"){const _=ra(t,Array.isArray(c.initial)?c.initial[0]:c.initial);_&&_.transition&&(x.transition=_.transition)}f.forEach(_=>{const w=t.getBaseTarget(_),T=t.getValue(_);T&&(T.liveStyle=!0),x[_]=w??null}),d.push({animation:x})}let v=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=pb()}}}function LB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LP(e,t):!1}function xs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pb(){return{animate:xs(!0),whileInView:xs(),whileHover:xs(),whileTap:xs(),whileDrag:xs(),whileFocus:xs(),exit:xs()}}class ps{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VB extends ps{constructor(e){super(e),e.animationState||(e.animationState=OB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let FB=0;class BB extends ps{constructor(){super(...arguments),this.id=FB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UB={animation:{Feature:VB},exit:{Feature:BB}};function $c(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vu(t){return{point:{x:t.pageX,y:t.pageY}}}const jB=t=>e=>__(e)&&t(e,vu(e));function ic(t,e,n,r){return $c(t,e,jB(n),r)}const FP=1e-4,zB=1-FP,$B=1+FP,BP=.01,HB=0-BP,WB=0+BP;function Gt(t){return t.max-t.min}function KB(t,e,n){return Math.abs(t-e)<=n}function gb(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=Gt(n)/Gt(e),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zB&&t.scale<=$B||isNaN(t.scale))&&(t.scale=1),(t.translate>=HB&&t.translate<=WB||isNaN(t.translate))&&(t.translate=0)}function sc(t,e,n,r){gb(t.x,e.x,n.x,r?r.originX:void 0),gb(t.y,e.y,n.y,r?r.originY:void 0)}function yb(t,e,n){t.min=n.min+e.min,t.max=t.min+Gt(e)}function qB(t,e,n){yb(t.x,e.x,n.x),yb(t.y,e.y,n.y)}function vb(t,e,n){t.min=e.min-n.min,t.max=t.min+Gt(e)}function of(t,e,n){vb(t.x,e.x,n.x),vb(t.y,e.y,n.y)}function xn(t){return[t("x"),t("y")]}const UP=({current:t})=>t?t.ownerDocument.defaultView:null,_b=(t,e)=>Math.abs(t-e);function GB(t,e){const n=_b(t.x,e.x),r=_b(t.y,e.y);return Math.sqrt(n**2+r**2)}class jP{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Sp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=GB(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:v}=f,{timestamp:x}=It;this.history.push({...v,timestamp:x});const{onStart:_,onMove:w}=this.handlers;p||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=kp(p,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Sp(f.type==="pointercancel"?this.lastMoveEventInfo:kp(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,_),v&&v(f,_)},!__(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=vu(e),l=kp(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=It;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Sp(l,this.history)),this.removeListeners=pu(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ns(this.updatePoint)}}function kp(t,e){return e?{point:e(t.point)}:t}function wb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sp({point:t},e){return{point:t,delta:wb(t,zP(e)),offset:wb(t,YB(e)),velocity:QB(e,.1)}}function YB(t){return t[0]}function zP(t){return t[t.length-1]}function QB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=zP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vr(e)));)n--;if(!r)return{x:0,y:0};const s=Cn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function XB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function Eb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function JB(t,{top:e,left:n,bottom:r,right:i}){return{x:Eb(t.x,n,i),y:Eb(t.y,e,r)}}function xb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ZB(t,e){return{x:xb(t.x,e.x),y:xb(t.y,e.y)}}function eU(t,e){let n=.5;const r=Gt(t),i=Gt(e);return i>r?n=Bc(e.min,e.max-r,t.min):r>i&&(n=Bc(t.min,t.max-i,e.min)),Yr(0,1,n)}function tU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Uy=.35;function nU(t=Uy){return t===!1?t=0:t===!0&&(t=Uy),{x:bb(t,"left","right"),y:bb(t,"top","bottom")}}function bb(t,e,n){return{min:Tb(t,e),max:Tb(t,n)}}function Tb(t,e){return typeof t=="number"?t:t[e]||0}const rU=new WeakMap;class iU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vu(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=u8(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(_=>{let w=this.getAxisMotionValue(_).get()||0;if(_r.test(w)){const{projection:T}=this.visualElement;if(T&&T.layout){const I=T.layout.layoutBox[_];I&&(w=Gt(I)*(parseFloat(w)/100))}}this.originPoint[_]=w}),v&&Ue.postRender(()=>v(d,f)),Fy(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:_}=f;if(y&&this.currentDirection===null){this.currentDirection=sU(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),x&&x(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>xn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new jP(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:UP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ue.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ah(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=XB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&jo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=JB(r.layoutBox,e):this.constraints=!1,this.elastic=nU(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=tU(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!jo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=oB(r,i.root,this.visualElement.getTransformPagePoint());let o=ZB(i.layout.layoutBox,s);if(n){const a=n(rB(o));this.hasMutatedConstraints=!!a,a&&(o=kP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=xn(u=>{if(!ah(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Fy(this.visualElement,e),r.start(A_(e,r,0,n,this.visualElement,!1))}stopAnimation(){xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xn(n=>{const{drag:r}=this.getProps();if(!ah(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ze(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};xn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=eU({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xn(o=>{if(!ah(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ze(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;rU.set(this.visualElement,this);const e=this.visualElement.current,n=ic(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();jo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ue.read(r);const o=$c(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(xn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Uy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ah(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oU extends ps{constructor(e){super(e),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new iU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const kb=t=>(e,n)=>{t&&Ue.postRender(()=>t(e,n))};class aU extends ps{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(e){this.session=new jP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:kb(e),onStart:kb(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ue.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ip=!1;class lU extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Ip&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Ip=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ue.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),v_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Ip=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $P(t){const[e,n]=uP(),r=C.useContext(Xv);return Xn.jsx(lU,{...t,layoutGroup:r,switchLayoutGroup:C.useContext(bP),isPresent:e,safeToRemove:n})}function cU(t,e,n){const r=Ut(t)?t:xa(t);return r.start(A_("",r,e,n)),r.animation}const uU=(t,e)=>t.depth-e.depth;class hU{constructor(){this.children=[],this.isDirty=!1}add(e){e_(this.children,e),this.isDirty=!0}remove(e){t_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uU),this.isDirty=!1,this.children.forEach(e)}}function dU(t,e){const n=sn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ns(r),t(s-e))};return Ue.setup(r,!0),()=>ns(r)}const HP=["TopLeft","TopRight","BottomLeft","BottomRight"],fU=HP.length,Sb=t=>typeof t=="string"?parseFloat(t):t,Ib=t=>typeof t=="number"||le.test(t);function mU(t,e,n,r,i,s){i?(t.opacity=ze(0,n.opacity??1,pU(r)),t.opacityExit=ze(e.opacity??1,0,gU(r))):s&&(t.opacity=ze(e.opacity??1,n.opacity??1,r));for(let o=0;o<fU;o++){const a=`border${HP[o]}Radius`;let l=Cb(e,a),c=Cb(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Ib(l)===Ib(c)?(t[a]=Math.max(ze(Sb(l),Sb(c),r),0),(_r.test(c)||_r.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function Cb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pU=WP(0,.5,AA),gU=WP(.5,.95,Nn);function WP(t,e,n){return r=>r<t?0:r>e?1:n(Bc(t,e,r))}function Ab(t,e){t.min=e.min,t.max=e.max}function Un(t,e){Ab(t.x,e.x),Ab(t.y,e.y)}function Pb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Rb(t,e,n,r,i){return t-=e,t=sf(t,1/n,r),i!==void 0&&(t=sf(t,1/i,r)),t}function yU(t,e=0,n=1,r=.5,i,s=t,o=t){if(_r.test(e)&&(e=parseFloat(e),e=ze(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ze(s.min,s.max,r);t===s&&(a-=e),t.min=Rb(t.min,e,n,a,i),t.max=Rb(t.max,e,n,a,i)}function Nb(t,e,[n,r,i],s,o){yU(t,e[n],e[r],e[i],e.scale,s,o)}const vU=["x","scaleX","originX"],_U=["y","scaleY","originY"];function Mb(t,e,n,r){Nb(t.x,e,vU,n?n.x:void 0,r?r.x:void 0),Nb(t.y,e,_U,n?n.y:void 0,r?r.y:void 0)}function Db(t){return t.translate===0&&t.scale===1}function KP(t){return Db(t.x)&&Db(t.y)}function Ob(t,e){return t.min===e.min&&t.max===e.max}function wU(t,e){return Ob(t.x,e.x)&&Ob(t.y,e.y)}function Lb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function qP(t,e){return Lb(t.x,e.x)&&Lb(t.y,e.y)}function Vb(t){return Gt(t.x)/Gt(t.y)}function Fb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class EU{constructor(){this.members=[]}add(e){e_(this.members,e),e.scheduleRender()}remove(e){if(t_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xU(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Cp=["","X","Y","Z"],bU=1e3;let TU=0;function Ap(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=MP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GP(r)}function YP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=TU++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IU),this.nodes.forEach(RU),this.nodes.forEach(NU),this.nodes.forEach(CU)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new hU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new i_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=cP(o)&&!g8(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,u&&u(),u=dU(f,250),Xh.hasAnimatedSinceResize&&(Xh.hasAnimatedSinceResize=!1,this.nodes.forEach(jb)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||VU,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=c.getProps(),_=!this.targetLayout||!qP(this.targetLayout,p),w=!d&&f;if(this.options.layoutRoot||this.resumeFrom||w||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...g_(y,"layout"),onPlay:v,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(u,w)}else d||jb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ub);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(PU),this.nodes.forEach(kU),this.nodes.forEach(SU)):this.nodes.forEach(Ub),this.clearAllSnapshots();const a=sn.now();It.delta=Yr(0,1e3/60,a-It.timestamp),It.timestamp=a,It.isProcessing=!0,yp.update.process(It),yp.preRender.process(It),yp.render.process(It),It.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,v_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AU),this.sharedNodes.forEach(DU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gt(this.snapshot.measuredBox.x)&&!Gt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!KP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Rs(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),FU(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return ht();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(BU))){const{scroll:u}=this.root;u&&(zo(a.x,u.offset.x),zo(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=ht();if(Un(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Un(a,o),zo(a.x,d.offset.x),zo(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=ht();Un(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&$o(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Rs(u.latestValues)&&$o(l,u.latestValues)}return Rs(this.latestValues)&&$o(l,this.latestValues),l}removeTransform(o){const a=ht();Un(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Rs(c.latestValues))continue;Dy(c.latestValues)&&c.updateSnapshot();const u=ht(),d=c.measurePageBox();Un(u,d),Mb(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Rs(this.latestValues)&&Mb(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==It.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=It.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Un(this.target,this.layout.layoutBox),IP(this.target,this.targetDelta)):Un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Dy(this.parent.latestValues)||SP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),of(this.relativeTargetOrigin,a,l),Un(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===It.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Un(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;sB(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ht());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Pb(this.prevProjectionDelta.x,this.projectionDelta.x),Pb(this.prevProjectionDelta.y,this.projectionDelta.y)),sc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Fb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ho(),this.projectionDelta=Ho(),this.projectionDeltaWithTransform=Ho()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Ho();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ht(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=p!==y,x=this.getStack(),_=!x||x.members.length<=1,w=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(LU));this.animationProgress=0;let T;this.mixTargetDelta=I=>{const R=I/1e3;zb(d.x,o.x,R),zb(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(of(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OU(this.relativeTarget,this.relativeTargetOrigin,f,R),T&&wU(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ht()),Un(T,this.relativeTarget)),v&&(this.animationValues=u,mU(u,c,this.latestValues,R,w,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{Xh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xa(0)),this.currentAnimation=cU(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&QP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ht();const d=Gt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Gt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Un(a,l),$o(a,u),sc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new EU),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Ap("z",o,c,this.animationValues);for(let u=0;u<Cp.length;u++)Ap(`rotate${Cp[u]}`,o,c,this.animationValues),Ap(`skew${Cp[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Qh(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Qh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Rs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=xU(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in My){if(u[y]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:_}=My[y],w=d==="none"?u[y]:v(u[y],c);if(x){const T=x.length;for(let I=0;I<T;I++)o[x[I]]=w}else _?this.options.visualElement.renderState.vars[y]=w:o[y]=w}this.options.layoutId&&(o.pointerEvents=c===this?Qh(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Bb),this.root.sharedNodes.clear()}}}function kU(t){t.updateLayout()}function SU(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?xn(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=Gt(f);f.min=r[d].min,f.max=f.min+p}):QP(s,e.layoutBox,r)&&xn(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=Gt(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Ho();sc(a,r,e.layoutBox);const l=Ho();o?sc(l,t.applyTransform(i,!0),e.measuredBox):sc(l,r,e.layoutBox);const c=!KP(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const y=ht();of(y,e.layoutBox,f.layoutBox);const v=ht();of(v,r,p.layoutBox),qP(y,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function IU(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AU(t){t.clearSnapshot()}function Bb(t){t.clearMeasurements()}function Ub(t){t.isLayoutDirty=!1}function PU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function jb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function RU(t){t.resolveTargetDelta()}function NU(t){t.calcProjection()}function MU(t){t.resetSkewAndRotation()}function DU(t){t.removeLeadSnapshot()}function zb(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $b(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function OU(t,e,n,r){$b(t.x,e.x,n.x,r),$b(t.y,e.y,n.y,r)}function LU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const VU={duration:.45,ease:[.4,0,.1,1]},Hb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Wb=Hb("applewebkit/")&&!Hb("chrome/")?Math.round:Nn;function Kb(t){t.min=Wb(t.min),t.max=Wb(t.max)}function FU(t){Kb(t.x),Kb(t.y)}function QP(t,e,n){return t==="position"||t==="preserve-aspect"&&!KB(Vb(e),Vb(n),.2)}function BU(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const UU=YP({attachResizeListener:(t,e)=>$c(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pp={current:void 0},XP=YP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pp.current){const t=new UU({});t.mount(window),t.setOptions({layoutScroll:!0}),Pp.current=t}return Pp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jU={pan:{Feature:aU},drag:{Feature:oU,ProjectionNode:XP,MeasureLayout:$P}};function qb(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ue.postRender(()=>s(e,vu(e)))}class zU extends ps{mount(){const{current:e}=this.node;e&&(this.unmount=h8(e,(n,r)=>(qb(this.node,r,"Start"),i=>qb(this.node,i,"End"))))}unmount(){}}class $U extends ps{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pu($c(this.node.current,"focus",()=>this.onFocus()),$c(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gb(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ue.postRender(()=>s(e,vu(e)))}class HU extends ps{mount(){const{current:e}=this.node;e&&(this.unmount=p8(e,(n,r)=>(Gb(this.node,r,"Start"),(i,{success:s})=>Gb(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jy=new WeakMap,Rp=new WeakMap,WU=t=>{const e=jy.get(t.target);e&&e(t)},KU=t=>{t.forEach(WU)};function qU({root:t,...e}){const n=t||document;Rp.has(n)||Rp.set(n,{});const r=Rp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(KU,{root:t,...e})),r[i]}function GU(t,e,n){const r=qU(e);return jy.set(t,n),r.observe(t),()=>{jy.delete(t),r.unobserve(t)}}const YU={some:0,all:1};class QU extends ps{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:YU[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return GU(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(XU(e,n))&&this.startObserver()}unmount(){}}function XU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const JU={inView:{Feature:QU},tap:{Feature:HU},focus:{Feature:$U},hover:{Feature:zU}},ZU={layout:{ProjectionNode:XP,MeasureLayout:$P}},ej={...UB,...JU,...jU,...ZU},B=nB(ej,pB);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Yb=t=>{const e=nj(t);return e.charAt(0).toUpperCase()+e.slice(1)},JP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),rj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ij={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>C.createElement("svg",{ref:l,...ij,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:JP("lucide",i),...!s&&!rj(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>C.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(sj,{ref:s,iconNode:e,className:JP(`lucide-${tj(Yb(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Yb(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],aj=yt("award",oj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cj=yt("calendar",lj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zy=yt("circle-check",uj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],dj=yt("circle-user",hj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],af=yt("clock",fj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pj=yt("file-text",mj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],$y=yt("flame",gj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],vj=yt("moon",yj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],wj=yt("pause",_j);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xj=yt("pen",Ej);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Tj=yt("play",bj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sj=yt("rotate-ccw",kj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cj=yt("save",Ij);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pj=yt("settings",Aj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Nj=yt("sparkles",Rj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Dj=yt("sun",Mj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Lj=yt("trending-up",Oj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Hy=yt("trophy",Vj);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bj=yt("x",Fj);function ZP(){const[t,e]=C.useState(()=>{const r=localStorage.getItem("prodhub-theme");return r||"dark"});return C.useEffect(()=>{const r=document.documentElement;t==="dark"?r.classList.add("dark"):r.classList.remove("dark"),localStorage.setItem("prodhub-theme",t)},[t]),{theme:t,toggleTheme:()=>{e(r=>r==="light"?"dark":"light")}}}function Qb(){const{theme:t,toggleTheme:e}=ZP();return m.createElement(B.button,{onClick:e,className:"relative p-2.5 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 hover:from-primary-100 hover:to-purple-100 dark:hover:from-primary-900 dark:hover:to-purple-900 transition-all duration-300 shadow-lg hover:shadow-xl border-2 border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 group",whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":"Toggle theme"},m.createElement(B.div,{initial:!1,animate:{rotate:t==="light"?0:180,scale:t==="light"?1:.9},transition:{type:"spring",stiffness:300,damping:20},className:"relative w-5 h-5"},t==="light"?m.createElement(Dj,{className:"w-5 h-5 text-yellow-500"}):m.createElement(vj,{className:"w-5 h-5 text-indigo-300"})),m.createElement(B.div,{className:`absolute inset-0 rounded-xl ${t==="light"?"bg-gradient-to-br from-yellow-400/20 to-orange-400/20":"bg-gradient-to-br from-indigo-400/20 to-purple-400/20"}`,animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}))}function Uj(){const{user:t}=ms(),e=Na(),n=cs(),r="ProdHub";async function i(){try{await xI(na),e("/")}catch(o){console.error("Logout error",o)}}const s=[{to:"/tasks",label:"Tasks",icon:zy},{to:"/calendar",label:"Calendar",icon:cj},{to:"/notes",label:"Notes",icon:pj},{to:"/timer",label:"Timer",icon:af},{to:"/habits",label:"Habits",icon:$y},{to:"/gamification",label:"Achievements",icon:Hy}];return t?m.createElement(B.nav,{className:"navbar-bg sticky top-0 z-50 backdrop-blur-xl border-b border-gray-200/50 dark:border-gray-800/50 shadow-lg",initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"}},m.createElement("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"},m.createElement(B.div,{whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(bn,{to:"/dashboard",className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-gray-50 transition-all duration-300 group"},m.createElement(B.span,{className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500 via-indigo-600 to-purple-600 text-white text-sm font-bold shadow-lg glow-primary",whileHover:{rotate:[0,-10,10,-10,0]},transition:{duration:.5}},"PH"),m.createElement("span",{className:"hidden sm:inline gradient-text font-heading text-2xl"},r))),m.createElement("div",{className:"flex items-center gap-3 md:gap-6 flex-wrap"},m.createElement("div",{className:"hidden lg:flex items-center gap-1 text-sm md:text-base"},s.map(o=>{const a=o.icon,l=n.pathname===o.to;return m.createElement(B.div,{key:o.to,whileHover:{y:-2}},m.createElement(bn,{to:o.to,className:`relative px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center gap-2 ${l?"text-primary-500 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`},m.createElement(a,{className:`w-5 h-5 ${l?"text-primary-500 dark:text-primary-400":""}`}),m.createElement("span",null,o.label),l&&m.createElement(B.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-primary-500 to-purple-600 rounded-full",layoutId:"activeTab",transition:{type:"spring",stiffness:380,damping:30}})))})),m.createElement("div",{className:"flex items-center gap-2 md:gap-3"},m.createElement(Qb,null),m.createElement(B.div,{whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(bn,{to:"/profile",className:"text-sm md:text-base transition-all duration-300 flex items-center gap-2 font-semibold text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"},m.createElement(dj,{className:"w-5 h-5"}),m.createElement("span",{className:"hidden xl:inline"},"Profile"))),m.createElement(B.span,{className:"text-xs md:text-sm hidden md:block px-3 py-1.5 rounded-full bg-gradient-to-r from-primary-100 to-purple-100 dark:from-primary-900/30 dark:to-purple-900/30 text-primary-700 dark:text-primary-300 font-semibold",whileHover:{scale:1.05}},t.email.split("@")[0]),m.createElement(B.button,{onClick:i,className:"btn-secondary text-sm px-4 md:px-5 py-2 font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95}},"Logout"))))):m.createElement(B.nav,{className:"navbar-bg sticky top-0 z-50 backdrop-blur-xl border-b border-gray-200/50 dark:border-gray-800/50 shadow-lg",initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"}},m.createElement("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"},m.createElement(B.div,{whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(bn,{to:"/",className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-gray-50 transition-all duration-300"},m.createElement(B.span,{className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500 via-indigo-600 to-purple-600 text-white text-sm font-bold shadow-lg glow-primary",whileHover:{rotate:[0,-10,10,-10,0]},transition:{duration:.5}},"PH"),m.createElement("span",{className:"gradient-text font-heading text-2xl"},r))),m.createElement("div",{className:"flex gap-4 md:gap-6 items-center"},m.createElement(Qb,null),m.createElement(B.div,{className:"hidden md:flex items-center gap-4"},m.createElement(bn,{to:"/features",className:"text-sm md:text-base transition-all duration-300 font-semibold text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"},"Features"),m.createElement(bn,{to:"/screenshots",className:"text-sm md:text-base transition-all duration-300 font-semibold text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"},"Screenshots"),m.createElement(bn,{to:"/user-flow",className:"text-sm md:text-base transition-all duration-300 font-semibold text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"},"User Flow")),m.createElement(B.div,{whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(bn,{to:"/auth",className:"btn-primary text-sm md:text-base px-5 md:px-6 py-2.5 font-bold"},"Get Started")))))}function jn({children:t}){const{user:e,initializing:n}=ms(),r=cs();return n?m.createElement("div",{className:"p-6 text-center"},"Loading..."):e?t:m.createElement(D2,{to:"/auth",state:{from:r},replace:!0})}function jj(){const{theme:t}=ZP(),[e,n]=C.useState({x:-100,y:-100}),[r,i]=C.useState(!1),[s,o]=C.useState(!1);return C.useEffect(()=>{const a=d=>{n({x:d.clientX,y:d.clientY}),i(!0)},l=()=>{i(!1)},c=()=>{i(!0)},u=d=>{const f=d.target;f.tagName==="BUTTON"||f.tagName==="A"||f.closest("button")||f.closest("a")||f.closest('[role="button"]')?o(!0):o(!1)};return document.addEventListener("mousemove",a),document.addEventListener("mouseleave",l),document.addEventListener("mouseenter",c),document.addEventListener("mouseover",u),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseleave",l),document.removeEventListener("mouseenter",c),document.removeEventListener("mouseover",u)}},[]),r?m.createElement(B.div,{className:"fixed pointer-events-none z-[9999] mix-blend-difference",style:{left:`${e.x}px`,top:`${e.y}px`,transform:"translate(-50%, -50%)"},animate:{scale:s?1.5:1},transition:{type:"spring",stiffness:500,damping:28}},m.createElement(B.div,{className:`absolute inset-0 rounded-full ${t==="dark"?"bg-primary-500":"bg-primary-600"}`,style:{width:s?"24px":"16px",height:s?"24px":"16px",transform:"translate(-50%, -50%)",left:"50%",top:"50%",filter:"blur(8px)",opacity:.6},animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),m.createElement(B.div,{className:`rounded-full ${t==="dark"?"bg-gradient-to-br from-primary-400 to-purple-500":"bg-gradient-to-br from-primary-500 to-indigo-600"}`,style:{width:s?"20px":"12px",height:s?"20px":"12px",boxShadow:`0 0 ${s?"20px":"10px"} ${t==="dark"?"rgba(99, 102, 241, 0.8)":"rgba(99, 102, 241, 0.6)"}`},animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),m.createElement(B.div,{className:"absolute inset-0 rounded-full bg-white",style:{width:s?"8px":"4px",height:s?"8px":"4px",transform:"translate(-50%, -50%)",left:"50%",top:"50%",opacity:.8}})):null}function zj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const $j=C.forwardRef(zj);function Hj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"}))}const Wj=C.forwardRef(Hj);function Kj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const P_=C.forwardRef(Kj);function qj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const Gj=C.forwardRef(qj);function eR({completed:t,total:e,points:n}){const r=e>0?t/e*100:0,i=2*Math.PI*60,s=i*(1-r/100);return m.createElement(B.div,{className:"card-gradient p-6 md:p-8 relative overflow-hidden particle-bg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"easeOut"},whileHover:{scale:1.02}},m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-br from-primary-500/10 via-purple-500/10 to-accent-500/10",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:10,repeat:1/0,repeatType:"reverse"}}),m.createElement("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6"},m.createElement("div",{className:"flex-shrink-0"},m.createElement("div",{className:"relative w-32 h-32"},m.createElement("svg",{width:"128",height:"128",viewBox:"0 0 128 128",className:"transform -rotate-90"},m.createElement("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"rgba(99, 102, 241, 0.1)",strokeWidth:"8"}),m.createElement(B.circle,{cx:"64",cy:"64",r:"60",fill:"none",stroke:"url(#progressGradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:s},transition:{duration:1,ease:"easeOut"}}),m.createElement("defs",null,m.createElement("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},m.createElement("stop",{offset:"0%",stopColor:"#6366F1"}),m.createElement("stop",{offset:"50%",stopColor:"#8B5CF6"}),m.createElement("stop",{offset:"100%",stopColor:"#34D399"})))),m.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},m.createElement("div",{className:"text-center"},m.createElement(B.div,{className:"text-3xl font-bold gradient-text font-heading",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200}},t,"/",e),m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold mt-1"},"Tasks"))))),m.createElement("div",{className:"flex-1 flex flex-col md:flex-row items-center justify-between gap-6 w-full"},m.createElement("div",{className:"text-center md:text-left"},m.createElement(B.div,{className:"flex items-center gap-2 mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2}},m.createElement(P_,{className:"w-5 h-5 text-primary-500"}),m.createElement("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Daily Progress")),m.createElement(B.p,{className:"text-sm text-gray-600 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}},t===e?" Amazing! You've completed all tasks today!":`${e-t} more task${e-t!==1?"s":""} to go!`)),m.createElement(B.div,{className:"text-center px-6 py-4 rounded-xl bg-gradient-to-br from-primary-500/10 to-purple-500/10 border border-primary-200/50 dark:border-primary-800/50",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.4,type:"spring",stiffness:200},whileHover:{scale:1.05}},m.createElement(B.div,{className:"flex items-center gap-2 justify-center mb-1",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3}},m.createElement(Wj,{className:"w-6 h-6 text-accent-500"})),m.createElement(B.div,{className:"text-4xl font-bold gradient-text font-heading",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200}},n),m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold mt-1"},"Total Points")))),m.createElement(B.div,{className:"mt-6 w-full bg-gray-200 dark:bg-gray-800 rounded-full h-3 overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6}},m.createElement(B.div,{className:"h-full bg-gradient-to-r from-primary-500 via-purple-500 to-accent-500 rounded-full relative overflow-hidden",initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,ease:"easeOut",delay:.7}},m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}))))}function Mn(t){const{user:e}=ms(),[n,r]=C.useState([]),[i,s]=C.useState(!0);return C.useEffect(()=>{if(!e){r([]),s(!1);return}let c;return t==="groups"?c=Kh(Kn,t):c=oA(Kh(Kn,t),aA("uid","==",e.uid)),dA(c,d=>{const f=d.docs.map(p=>({id:p.id,...p.data()}));r(f),s(!1)},d=>{console.error("Data sync error:",d),s(!1)})},[e,t]),{data:n,loading:i,addItem:async c=>{if(!e)throw new Error("Not authenticated");try{const u=t==="groups"?{...c,createdAt:new Date,ownerUid:e.uid}:{...c,uid:e.uid,createdAt:new Date},d=await f9(Kh(Kn,t),u);return console.log("Item added with ID:",d.id),d.id}catch(u){throw console.error("Add failed:",u.code,u.message),new Error(`Add failed: ${u.message}. Code: ${u.code}`)}},updateItem:async(c,u)=>{if(e)try{await xi(Wi(Kn,t,c),u),console.log("Item updated")}catch(d){throw console.error("Update failed:",d),d}},deleteItem:async c=>{if(e)try{await d9(Wi(Kn,t,c)),console.log(`${t} item ${c} deleted permanently`)}catch(u){throw console.error("Delete failed:",u),new Error(`Delete failed: ${u.message}. Code: ${u.code}`)}}}}const Eo={points:0,streaks:{},badges:[],claimedQuests:[]};function po(){const{user:t}=ms(),[e,n]=C.useState(Eo),[r,i]=C.useState(!0);C.useEffect(()=>{if(!t){n(Eo),i(!1);return}const u=Wi(Kn,"user_progress",t.uid);return dA(u,f=>{const p=f.data()||Eo;n({points:p.points||0,streaks:p.streaks||{},badges:p.badges||[],claimedQuests:p.claimedQuests||[]}),i(!1)},f=>{console.error("Progress sync error:",f),i(!1)})},[t]);const s=async()=>{if(!t)return null;const u=Wi(Kn,"user_progress",t.uid),d=await uA(u);return d.exists()?{ref:u,data:d.data()||Eo}:(await hA(u,Eo),{ref:u,data:Eo})},o=async(u,d="")=>{if(!t)return;const f=await s();if(!f)return;const p=f.data.points||0;await xi(f.ref,{points:p+u}),console.log(`${u>=0?"+":""}${u} points for ${d}`)};return{progress:e,loading:r,addPoints:o,updateStreak:async(u,d=!0)=>{var x;if(!t)return;const f=await s();if(!f)return;const p=((x=f.data.streaks)==null?void 0:x[u])||0,y=d?p+1:0,v=f.ref;if(await xi(v,{[`streaks.${u}`]:y}),y>0&&y%7===0){const _=f.data.badges||[];await xi(v,{badges:[..._,{id:`streak-${u}-week${Math.floor(y/7)}`,unlocked:new Date().toISOString()}]})}await o(y*5,`Streak update for ${u}`)},unlockBadge:async u=>{if(!t)return;const d=await s();if(!d)return;const f=d.ref,p=d.data.badges||[];p.some(y=>y.id===u)||(await xi(f,{badges:[...p,{id:u,unlocked:new Date().toISOString()}]}),await o(50,`Badge unlocked: ${u}`))},claimQuest:async(u,d)=>{if(!t)return;const f=await s();if(!f||(f.data.claimedQuests||[]).includes(u))return;const y=f.ref;await xi(y,{claimedQuests:m9(u),points:(f.data.points||0)+d})}}}function Yj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const Qj=C.forwardRef(Yj);function Xj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Jj=C.forwardRef(Xj);function Zj({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const ez=C.forwardRef(Zj);function tz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Jh=C.forwardRef(tz);function nz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Wy=C.forwardRef(nz);function rz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Xb=C.forwardRef(rz);function iz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Np=C.forwardRef(iz);function sz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const oz=C.forwardRef(sz);function az({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const tR=C.forwardRef(az);function lz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const cz=C.forwardRef(lz);function uz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const nR=C.forwardRef(uz);function hz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const dz=C.forwardRef(hz);function fz({title:t,titleId:e,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?C.createElement("title",{id:e},t):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const mz=C.forwardRef(fz);function Jb(){const{user:t}=ms(),{data:e=[]}=Mn("tasks"),{progress:n}=po(),r=new Date,i=(t==null?void 0:t.displayName)||(t!=null&&t.email?t.email.split("@")[0]:"Student"),s=C.useMemo(()=>{const y=r.getHours();return y<12?"Good morning":y<18?"Good afternoon":"Good evening"},[r]),o=e.filter(y=>!y.done||!y.completedAt?!1:new Date(y.completedAt).toDateString()===r.toDateString()).length||0,a=3,l=e.filter(y=>!y.done).slice(0,4),c=C.useMemo(()=>{const y=(n==null?void 0:n.points)||0,v=n!=null&&n.streaks&&Object.keys(n.streaks).length>0?Math.max(...Object.values(n.streaks)):0,x=e.filter(_=>_.done).length;return{totalPoints:y,longestStreak:v,completedTasks:x}},[n,e]),u=[{label:"Add Task",to:"/tasks",icon:Jh,description:"Capture a quick todo",gradient:"from-blue-500 to-cyan-500"},{label:"Start Timer",to:"/timer",icon:Wy,description:"25 min focus block",gradient:"from-orange-500 to-red-500"},{label:"Add Note",to:"/notes",icon:Xb,description:"Jot down ideas",gradient:"from-green-500 to-emerald-500"},{label:"Log Habit",to:"/habits",icon:Np,description:"Mark habit done",gradient:"from-yellow-500 to-orange-500"}],d=[{to:"/tasks",icon:Jh,title:"Tasks",desc:"Prioritise work with points",gradient:"from-blue-500 to-cyan-500"},{to:"/calendar",icon:Jj,title:"Calendar",desc:"See your week at a glance",gradient:"from-purple-500 to-pink-500"},{to:"/notes",icon:Xb,title:"Notes",desc:"Lightweight scratchpad",gradient:"from-green-500 to-emerald-500"},{to:"/timer",icon:Wy,title:"Focus Timer",desc:"Pomodoro cycles",gradient:"from-orange-500 to-red-500"},{to:"/habits",icon:Np,title:"Habits",desc:"Daily streaks",gradient:"from-yellow-500 to-orange-500"},{to:"/analytics",icon:ez,title:"Analytics",desc:"Trends & insights",gradient:"from-indigo-500 to-purple-500"},{to:"/gamification",icon:dz,title:"Achievements",desc:"Ranks and badges",gradient:"from-pink-500 to-rose-500"},{to:"/study-groups",icon:mz,title:"Study Groups",desc:"Share with friends",gradient:"from-cyan-500 to-blue-500"}],f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}};return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 py-8 particle-bg"},m.createElement("div",{className:"max-w-7xl mx-auto px-4 py-6 md:py-10 space-y-8"},m.createElement(B.div,{className:"space-y-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6}},m.createElement("div",{className:"card-gradient p-6 md:p-8 relative overflow-hidden"},m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-br from-primary-500/5 via-purple-500/5 to-accent-500/5",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}}),m.createElement("div",{className:"relative z-10"},m.createElement(B.div,{className:"flex items-center gap-2 mb-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2}},m.createElement(P_,{className:"w-6 h-6 text-primary-500 animate-pulse"}),m.createElement("p",{className:"text-xs uppercase tracking-[0.25em] text-primary-600 dark:text-primary-400 font-bold"},"OVERVIEW")),m.createElement(B.h1,{className:"text-3xl md:text-5xl font-bold mb-2 gradient-text font-heading",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3}},s,", ",i,"! "),m.createElement(B.p,{className:"text-base md:text-lg text-gray-600 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4}},"Here's your snapshot for today. Keep it light, finish the few things that matter."))),m.createElement(eR,{completed:o,total:a,points:(n==null?void 0:n.points)||0})),m.createElement(B.div,{className:"card p-5 md:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2}},m.createElement("div",{className:"flex items-center gap-2 mb-4"},m.createElement(Qj,{className:"w-5 h-5 text-accent-500"}),m.createElement("p",{className:"text-sm font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Quick Actions")),m.createElement(B.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",variants:f,initial:"hidden",animate:"visible"},u.map(y=>{const v=y.icon;return m.createElement(B.div,{key:y.label,variants:p},m.createElement(bn,{to:y.to,className:"group relative p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-2 border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-all duration-300 flex flex-col gap-2 overflow-hidden"},m.createElement(B.div,{className:`absolute inset-0 bg-gradient-to-br ${y.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),m.createElement(B.div,{whileHover:{scale:1.2,rotate:5},transition:{type:"spring",stiffness:300}},m.createElement(v,{className:`w-6 h-6 bg-gradient-to-br ${y.gradient} bg-clip-text text-transparent`})),m.createElement("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-50"},y.label),m.createElement("span",{className:"text-xs text-gray-600 dark:text-gray-400"},y.description)))}))),m.createElement(B.div,{className:"card p-5 md:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3}},m.createElement("div",{className:"flex items-center justify-between mb-4"},m.createElement("div",null,m.createElement("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Today's Tasks"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"A quick preview of what's on your plate")),m.createElement(bn,{to:"/tasks",className:"btn-secondary text-xs px-4 py-2 font-semibold"},"View All")),m.createElement("div",{className:"space-y-2 mt-4"},l.length===0&&m.createElement(B.p,{className:"text-sm text-gray-600 dark:text-gray-400 text-center py-8",initial:{opacity:0},animate:{opacity:1}},"No active tasks yet. Add one to give yourself a small win! "),l.map((y,v)=>m.createElement(B.div,{key:y.id,className:"flex items-center justify-between rounded-xl bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 px-4 py-3 group hover:border-primary-300 dark:hover:border-primary-700 transition-all",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+v*.1},whileHover:{scale:1.02,x:5}},m.createElement("div",{className:"flex flex-col"},m.createElement("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50"},y.title),y.description&&m.createElement("span",{className:"text-xs text-gray-600 dark:text-gray-400"},y.description)),m.createElement(B.span,{className:"badge-primary text-xs font-bold",whileHover:{scale:1.1}},y.points||10," pts"))))),m.createElement(B.div,{className:"card p-5 md:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4}},m.createElement("div",{className:"flex items-center justify-between mb-4"},m.createElement("div",null,m.createElement("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Weekly Productivity"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"A snapshot of how things are trending")),m.createElement(bn,{to:"/analytics",className:"btn-secondary text-xs px-4 py-2 font-semibold"},"View Analytics")),m.createElement("div",{className:"grid grid-cols-3 gap-4 mt-4"},[{label:"Points",value:c.totalPoints,icon:cz,color:"from-primary-500 to-purple-500"},{label:"Completed",value:c.completedTasks,icon:Jh,color:"from-accent-400 to-emerald-500"},{label:"Longest Streak",value:c.longestStreak,icon:Np,color:"from-orange-500 to-red-500"}].map((y,v)=>{const x=y.icon;return m.createElement(B.div,{key:y.label,className:"rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 p-4 text-center group hover:border-primary-300 dark:hover:border-primary-700 transition-all",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5+v*.1},whileHover:{scale:1.05,y:-5}},m.createElement(B.div,{className:`inline-flex p-2 rounded-lg bg-gradient-to-br ${y.color} mb-2`,whileHover:{rotate:360},transition:{duration:.5}},m.createElement(x,{className:"w-5 h-5 text-white"})),m.createElement("p",{className:"text-xs mb-1 text-gray-600 dark:text-gray-400 font-semibold"},y.label),m.createElement(B.p,{className:`text-2xl font-bold bg-gradient-to-r ${y.color} bg-clip-text text-transparent font-heading`,initial:{scale:0},animate:{scale:1},transition:{delay:.6+v*.1,type:"spring",stiffness:200}},y.value))}))),m.createElement("section",{className:"pb-4"},m.createElement(B.h2,{className:"text-xl md:text-2xl font-bold mb-4 text-gray-900 dark:text-gray-50 font-heading",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5}},"Workspace Sections"),m.createElement(B.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",variants:f,initial:"hidden",animate:"visible"},d.map((y,v)=>{const x=y.icon;return m.createElement(B.div,{key:y.to,variants:p,whileHover:{y:-5}},m.createElement(bn,{to:y.to,className:"card-glow p-5 h-full flex flex-col justify-between group relative overflow-hidden"},m.createElement(B.div,{className:`absolute inset-0 bg-gradient-to-br ${y.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),m.createElement("div",{className:"relative z-10"},m.createElement(B.div,{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${y.gradient} flex items-center justify-center mb-3 shadow-lg`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300}},m.createElement(x,{className:"w-6 h-6 text-white"})),m.createElement("h3",{className:"text-sm font-bold mb-1 text-gray-900 dark:text-gray-50 font-heading"},y.title),m.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400"},y.desc))))})))))}function pz(){var p,y;const[t,e]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),[o,a]=C.useState(""),l=Na(),u=((y=(p=cs().state)==null?void 0:p.from)==null?void 0:y.pathname)||"/";async function d(v){v.preventDefault(),a("");try{i?await OL(na,t,n):await LL(na,t,n),l(u,{replace:!0})}catch(x){a(x.message)}}async function f(){try{await aV(na,new Rr),l(u,{replace:!0})}catch(v){a(v.message)}}return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center p-4"},m.createElement(B.div,{className:"max-w-md w-full card p-6 md:p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}},m.createElement(B.h1,{className:"text-3xl md:text-4xl font-bold mb-6 text-center gradient-text",initial:{scale:.9},animate:{scale:1},transition:{delay:.1}},i?"Create Account":"Welcome Back"),m.createElement("form",{onSubmit:d,className:"space-y-4"},m.createElement("div",null,m.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email"),m.createElement("input",{type:"email",className:"input w-full",value:t,onChange:v=>e(v.target.value),placeholder:"you@example.com",required:!0})),m.createElement("div",null,m.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Password"),m.createElement("input",{type:"password",className:"input w-full",value:n,onChange:v=>r(v.target.value),placeholder:"",required:!0})),o&&m.createElement("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800"},m.createElement("p",{className:"text-sm text-red-600 dark:text-red-400"},o)),m.createElement("button",{type:"submit",className:"btn-primary w-full py-3"},i?"Sign Up":"Sign In")),m.createElement("div",{className:"mt-6"},m.createElement("button",{onClick:f,className:"btn-secondary w-full py-3 flex items-center justify-center gap-2"},m.createElement("svg",{className:"w-5 h-5",viewBox:"0 0 24 24"},m.createElement("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.createElement("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.createElement("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.createElement("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})),"Continue with Google")),m.createElement("div",{className:"mt-6 text-center"},m.createElement("button",{onClick:()=>s(!i),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline"},i?"Already have an account? Sign in":"Don't have an account? Sign up"))))}function gz({task:t,onToggle:e,onDelete:n,onStartTimer:r,index:i=0}){const s=t.priority==="high"?"from-red-500 to-pink-500":t.priority==="medium"?"from-blue-500 to-cyan-500":t.category==="study"?"from-green-500 to-emerald-500":"from-purple-500 to-indigo-500",o=t.points||10,a=t.bonus||0,l=o+a;return m.createElement(B.div,{className:`card-glow p-4 mb-4 relative overflow-hidden ${t.done?"opacity-75":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},whileHover:{scale:1.02,y:-2},layout:!0},m.createElement(B.div,{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),m.createElement("div",{className:"flex items-start justify-between relative z-10"},m.createElement("div",{className:"flex items-start gap-4 flex-1"},m.createElement(B.button,{onClick:()=>e(t.id),className:"flex-shrink-0 mt-1",whileHover:{scale:1.1},whileTap:{scale:.9}},t.done?m.createElement(B.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300}},m.createElement($j,{className:"w-6 h-6 text-accent-500"})):m.createElement(Jh,{className:"w-6 h-6 text-gray-400 hover:text-primary-500 transition-colors"})),m.createElement("div",{className:"flex-1"},m.createElement("div",{className:"flex items-center gap-3 mb-2 flex-wrap"},m.createElement(B.h3,{className:`font-bold text-lg ${t.done?"line-through opacity-50 text-gray-500":"text-gray-900 dark:text-gray-50"}`,initial:!1,animate:{opacity:t.done?.5:1}},t.title),t.dueDate&&m.createElement(B.span,{className:"text-xs px-2.5 py-1 rounded-full font-semibold",style:{background:t.dueDate==="Today"?"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))":"rgba(148, 163, 184, 0.2)",color:t.dueDate==="Today"?"rgb(99, 102, 241)":"rgb(100, 116, 139)"},whileHover:{scale:1.05}},"Due ",t.dueDate)),t.description&&m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3"},t.description),m.createElement("div",{className:"flex items-center gap-4 flex-wrap"},m.createElement(B.div,{className:"flex items-center gap-1",whileHover:{scale:1.05}},[...Array(5)].map((c,u)=>{const d=u<Math.floor(l/5);return m.createElement(B.span,{key:u,className:`text-sm ${d?"text-yellow-500":"text-gray-300"}`,initial:{scale:0},animate:{scale:1},transition:{delay:u*.05}},"")})),m.createElement(B.span,{className:"badge-primary text-xs font-bold px-3 py-1",whileHover:{scale:1.1}},l," pts")))),m.createElement("div",{className:"flex items-center gap-2 ml-4"},!t.done&&r&&m.createElement(B.button,{onClick:()=>r(t),className:"p-2 rounded-lg bg-gradient-to-br from-orange-100 to-red-100 dark:from-orange-900/30 dark:to-red-900/30 text-orange-600 dark:text-orange-400 hover:from-orange-200 hover:to-red-200 dark:hover:from-orange-800/50 dark:hover:to-red-800/50 transition-all",whileHover:{scale:1.1,rotate:15},whileTap:{scale:.9},title:"Start timer"},m.createElement(Wy,{className:"w-5 h-5"})),m.createElement(B.button,{onClick:()=>n(t.id),className:"p-2 rounded-lg bg-gradient-to-br from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30 text-red-600 dark:text-red-400 hover:from-red-200 hover:to-pink-200 dark:hover:from-red-800/50 dark:hover:to-pink-800/50 transition-all",whileHover:{scale:1.1,rotate:-15},whileTap:{scale:.9},title:"Delete task"},m.createElement(nR,{className:"w-5 h-5"})))),t.done&&m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-r from-accent-500/10 to-emerald-500/10 pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}))}function yz(){const{data:t=[],loading:e,addItem:n,updateItem:r,deleteItem:i}=Mn("tasks"),{addPoints:s,progress:o}=po(),[a,l]=C.useState(""),[c,u]=C.useState("all"),d=Na(),f=async I=>{try{const R=t.find(S=>S.id===I);if(!R)return;const O=R.points||10,k=R.bonus||0,b=new Date;await r(I,{done:!R.done,completedAt:R.done?null:b.toISOString()}),R.done||s(O+k,"Task completed")}catch{alert("Update failed")}},p=async()=>{if(a.trim()!=="")try{const I=10+Math.floor(Math.random()*5);await n({title:a.trim(),done:!1,pomodoros:0,points:I,bonus:0,priority:"medium",category:"general"}),l("")}catch{alert("Add failed")}},y=async I=>{try{await i(I)}catch{alert("Delete failed")}},v=I=>{d("/timer",{state:{task:I}})},x=new Date,_=t.filter(I=>I.done&&I.completedAt&&new Date(I.completedAt).toDateString()===x.toDateString()).length||0,w=3,T=C.useMemo(()=>c==="completed"?t.filter(I=>I.done):c==="today"?t.filter(I=>I.completedAt&&new Date(I.completedAt).toDateString()===x.toDateString()):t,[t,c,x]);return e?m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 flex items-center justify-center"},m.createElement(B.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1}},m.createElement(B.div,{className:"text-4xl mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}},""),m.createElement("div",{className:"text-gray-600 dark:text-gray-400"},"Loading tasks..."))):m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 py-8 particle-bg"},m.createElement("div",{className:"max-w-5xl mx-auto px-4 md:p-6 space-y-6"},m.createElement(B.div,{className:"flex items-center justify-between gap-4 flex-wrap",initial:{opacity:0,y:-20},animate:{opacity:1,y:0}},m.createElement("div",null,m.createElement("h1",{className:"section-header font-heading"},"Tasks"),m.createElement("p",{className:"section-subtitle"},"Capture, prioritise, and complete what matters today."))),m.createElement(eR,{completed:_,total:w,points:(o==null?void 0:o.points)||0}),m.createElement(B.div,{className:"flex gap-2 text-xs md:text-sm flex-wrap",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}},[{id:"all",label:"All"},{id:"today",label:"Today"},{id:"completed",label:"Completed"}].map(I=>m.createElement(B.button,{key:I.id,type:"button",onClick:()=>u(I.id),className:`px-4 py-2 rounded-full border-2 font-semibold transition-all duration-300 ${c===I.id?"border-primary-500 bg-gradient-to-r from-primary-500 to-purple-600 text-white shadow-lg":"border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:border-primary-300 dark:hover:border-primary-700"}`,whileHover:{scale:1.05},whileTap:{scale:.95}},I.label))),m.createElement(B.div,{className:"card p-5 space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3}},m.createElement("div",{className:"flex flex-col md:flex-row gap-3"},m.createElement("input",{type:"text",className:"input flex-1",placeholder:"Add a new task...",value:a,onChange:I=>l(I.target.value),onKeyDown:I=>I.key==="Enter"&&p()}),m.createElement(B.button,{onClick:p,className:"btn-primary px-6 py-3 text-sm md:text-base font-bold flex items-center justify-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(tR,{className:"w-5 h-5"}),"Add Task")),m.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400"}," Tip: Keep your list small. Three to five important tasks is enough for a focused day.")),m.createElement(hP,{mode:"popLayout"},m.createElement("div",{className:"space-y-3"},T.map((I,R)=>m.createElement(gz,{key:I.id,task:I,index:R,onToggle:f,onDelete:y,onStartTimer:v})))),T.length===0&&m.createElement(B.div,{className:"text-center mt-12 py-12",initial:{opacity:0},animate:{opacity:1}},m.createElement(B.div,{className:"text-6xl mb-4",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:2}},""),m.createElement("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-semibold"},"No tasks in this viewswitch filters or add a new one above."))))}const rR="custom-files-list",Tr=new Date().toISOString().split("T")[0];function bs(t){try{return JSON.parse(localStorage.getItem(`tasks-${t}`)||"[]")}catch{return[]}}function Mp(t,e){localStorage.setItem(`tasks-${t}`,JSON.stringify(e))}function Zb(){const t=[];for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);if(n&&n.startsWith("tasks-")){const r=n.slice(6);JSON.parse(localStorage.getItem(n)||"[]").forEach(s=>t.push({task:s,date:r}))}}return t}function Ts(){try{return JSON.parse(localStorage.getItem(rR)||"[]")}catch{return[]}}function Dp(t){localStorage.setItem(rR,JSON.stringify(t))}function vz(t){return new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function Op(t){return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function lh(t){return t?new Date(t.replace(" ","T")).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""}function _z(){const[t,e]=C.useState("daily"),[n,r]=C.useState(Tr),[i,s]=C.useState("day"),[o,a]=C.useState("all"),[l,c]=C.useState(""),[u,d]=C.useState(""),[f,p]=C.useState([]),[y,v]=C.useState(()=>parseInt(localStorage.getItem("points")||"0",10)||0),[x,_]=C.useState(""),[w,T]=C.useState(()=>Ts()),[I,R]=C.useState(null),[O,k]=C.useState(""),[b,S]=C.useState(!1),[P,N]=C.useState(""),[D,M]=C.useState(!1),[ie,ee]=C.useState(""),[ce,j]=C.useState(null),[V,W]=C.useState(null),G=t==="daily"&&i==="day"&&n===Tr;C.useEffect(()=>{t==="daily"&&te(n)},[t,n]),C.useEffect(()=>{var $;if(t==="custom"){se();const Q=Ts();T(Q);const re=I||(($=Q[0])==null?void 0:$.name);re&&Te(re)}},[t]),C.useEffect(()=>{i==="day"&&p(bs(n))},[i,n]);function te($){const Q=$===Tr,re=localStorage.getItem(`note-${$}`)||"";c(re),p(bs($)),d(Q?"You are editing today":"Viewing past day  read only")}function H($){const Q=$.target.value;c(Q),!(t!=="daily"||n!==Tr)&&localStorage.setItem(`note-${n}`,Q)}function se(){Ts().length===0&&de("My Notes")}function de($){const Q=$.replace(/[^a-zA-Z0-9._-\s]/g,"").trim()||"Untitled";let re=Ts(),Ae=Q,Tt=1;for(;re.some(tr=>tr.name===Ae);)Ae=`${Q} (${++Tt})`;re.push({name:Ae,updatedAt:new Date().toISOString()}),Dp(re),localStorage.setItem(`custom-${Ae}`,""),T(re),Te(Ae)}function Te($){R($);const Q=localStorage.getItem(`custom-${$}`)||"";c(Q);const Ae=Ts().find(Tt=>Tt.name===$);k(Ae?`Updated: ${new Date(Ae.updatedAt).toLocaleString()}`:""),d("Custom file  always editable")}function fe($){if(!window.confirm(`Delete "${$}"? This cannot be undone.`))return;const re=Ts().filter(Ae=>Ae.name!==$);Dp(re),localStorage.removeItem(`custom-${$}`),T(re),I===$&&(re.length>0?Te(re[0].name):(R(null),c(""),k("")))}function nt($){const Q=$.target.value;if(c(Q),!I)return;localStorage.setItem(`custom-${I}`,Q);const re=Ts(),Ae=re.find(Tt=>Tt.name===I);Ae&&(Ae.updatedAt=new Date().toISOString(),Dp(re),T(re),k(`Updated: ${new Date().toLocaleString()}`))}function er(){if(!G)return;const $=x.trim();if(!$)return;const Q=bs(n);Q.push({text:$,completed:!1,deadline:V,locked:!1,createdAt:new Date().toISOString()}),Mp(n,Q),p(Q),_(""),W(null)}function xr($,Q=n){if(Q!==Tr||i!=="day"||t!=="daily")return;const re=bs(Q),Ae=re[$];if(Ae){if(Ae.completed=!Ae.completed,Ae.completed&&!Ae.completedAt){Ae.completedAt=new Date().toISOString();const Tt=Ae.deadline?20:10,tr=y+Tt;v(tr),localStorage.setItem("points",String(tr))}Mp(Q,re),p(re)}}const me=C.useMemo(()=>{const $=Zb().filter(Q=>!Q.task.completed);return o==="all"?$:$.filter(Q=>Q.date===o)},[o,f,i]),vt=C.useMemo(()=>{const $=Zb().filter(Q=>Q.task.completed);return o==="all"?$:$.filter(Q=>Q.date===o)},[o,f,i]),br=C.useMemo(()=>[...new Set(Array.from({length:localStorage.length},(Q,re)=>localStorage.key(re)).filter(Q=>Q&&Q.startsWith("tasks-")).map(Q=>Q.slice(6)))].sort((Q,re)=>Q<re?1:-1),[f,i]);function ti(){if(n!==Tr){alert("Deadlines only for today's tasks");return}j("new"),ee(V||""),M(!0)}function gs($){if(n!==Tr||i!=="day")return;j($);const re=bs(n)[$];ee((re==null?void 0:re.deadline)||""),M(!0)}function ni(){const $=ie,Q=n;if(ce==="new")W($||null);else if(Q===Tr){const re=bs(Q);if(!re[ce])return;re[ce].deadline=$||null,Mp(Q,re),p(re)}M(!1),j(null)}function Wa($){const re=bs(n)[$];if(!(re!=null&&re.completed))return;let Ae=`<strong>Created:</strong> ${new Date(re.createdAt).toLocaleString()}<br/>`;if(re.completedAt&&(Ae+=`<strong>Completed:</strong> ${new Date(re.completedAt).toLocaleString()}<br/>`),re.deadline){const Tt=new Date(re.completedAt||Date.now())-new Date(re.deadline),tr=Tt>0,Eu=Math.abs(Math.floor(Tt/36e5)),qa=Math.abs(Math.round(Tt%36e5/6e4));Ae+=`<strong style="color:${tr?"#e74c3c":"#27ae60"}">${tr?"Late":"Early"} by: ${Eu}h ${qa}m</strong>`}N(Ae),S(!0)}function Ka(){s($=>$==="unfinishedAll"?"day":"unfinishedAll")}function wu(){s($=>$==="completedAll"?"day":"completedAll")}const ct=i==="day"?f.filter($=>!$.completed):[],_t=i==="day"?f.filter($=>$.completed):[];return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-gray-900 dark:to-space-dark py-8"},m.createElement("div",{className:"max-w-6xl mx-auto px-4 md:p-6 flex flex-col lg:flex-row gap-4 lg:gap-6"},m.createElement("div",{className:"flex-1 flex flex-col rounded-2xl card p-4 md:p-6 min-h-[60vh]"},m.createElement("h1",{className:"text-2xl md:text-3xl font-bold mb-3 text-gray-900 dark:text-gray-50 font-heading"},"Notes"),m.createElement("div",{className:"flex gap-2 mb-3"},m.createElement("button",{className:`px-3 py-2 rounded-xl text-xs md:text-sm border transition-colors ${t==="daily"?"bg-primary-500 text-white border-primary-400":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>{e("daily"),te(n)}},"Daily Notes"),m.createElement("button",{className:`px-3 py-2 rounded-xl text-xs md:text-sm border transition-colors ${t==="custom"?"bg-primary-500 text-white border-primary-400":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>e("custom")},"My Files")),t==="daily"&&m.createElement("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2"},m.createElement("input",{type:"date",className:"input w-full sm:w-auto",value:n,onChange:$=>{const Q=$.target.value;r(Q),te(Q)}}),m.createElement("div",{className:"flex-1"},m.createElement("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50"},vz(n)),m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},u))),t==="custom"&&m.createElement("div",{className:"mb-3 space-y-2"},m.createElement("div",{className:"flex gap-2"},m.createElement("input",{id:"new-file-name-input",type:"text",className:"input flex-1",placeholder:"New file name...",onKeyDown:$=>{if($.key==="Enter"){const Q=$.currentTarget.value.trim();Q&&(de(Q),$.currentTarget.value="")}}}),m.createElement("button",{className:"btn-primary text-xs px-4",onClick:()=>{const $=document.getElementById("new-file-name-input");$&&$.value.trim()&&(de($.value.trim()),$.value="")}},"Create")),m.createElement("div",{className:"flex flex-wrap gap-2"},w.map($=>m.createElement("div",{key:$.name,className:`group relative px-3 py-1 rounded-lg text-xs border transition-colors flex items-center gap-2 ${$.name===I?"bg-primary-500 text-white border-primary-400":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`},m.createElement("button",{onClick:()=>Te($.name),className:"flex-1 text-left"},$.name),m.createElement("button",{onClick:()=>fe($.name),className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Delete file"},"")))),O&&m.createElement("p",{className:"text-[11px] text-gray-600 dark:text-gray-400"},O)),m.createElement("textarea",{className:"flex-1 mt-2 input resize-none min-h-[260px]",placeholder:t==="daily"?`Write your notes here...

 Use lines for ideas and tasks
 Your notes for each day stay separate`:"Write in this custom file...",value:l,onChange:t==="daily"?H:nt,disabled:t==="daily"&&n!==Tr})),m.createElement("div",{className:"w-full lg:w-[360px] xl:w-[380px] rounded-2xl card flex flex-col p-4 md:p-5 max-h-[80vh]"},m.createElement("div",{className:"flex items-center justify-between mb-3"},m.createElement("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 font-heading"},"Tasks & Plans"),m.createElement("div",{className:"text-sm font-bold text-primary-500 dark:text-primary-400"},"Points: ",y)),m.createElement("div",{className:"flex gap-2 mb-3"},m.createElement("button",{className:`flex-1 text-xs sm:text-sm rounded-lg px-2 py-2 border transition-colors ${i==="unfinishedAll"?"bg-primary-500 text-white border-primary-400":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:Ka},i==="unfinishedAll"?"Back to Today":"Show Unfinished"),m.createElement("button",{className:`flex-1 text-xs sm:text-sm rounded-lg px-2 py-2 border transition-colors ${i==="completedAll"?"bg-primary-500 text-white border-primary-400":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:wu},i==="completedAll"?"Back to Today":"Show Completed")),i!=="day"&&m.createElement("div",{className:"flex items-center gap-2 mb-3 text-xs text-gray-600 dark:text-gray-400"},m.createElement("span",null,"Day:"),m.createElement("select",{className:"input rounded-md px-2 py-1 text-xs",value:o,onChange:$=>a($.target.value)},m.createElement("option",{value:"all"},"All days"),br.map($=>m.createElement("option",{key:$,value:$},new Date($).toLocaleDateString())))),i==="day"&&m.createElement("div",{className:"mt-2"},m.createElement("div",{className:"flex items-center gap-2 mb-2"},m.createElement("input",{type:"text",className:"input flex-1 text-xs sm:text-sm",placeholder:"Add a new task...",value:x,onChange:$=>_($.target.value),onKeyDown:$=>$.key==="Enter"&&er(),disabled:!G}),m.createElement("button",{className:"text-lg text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 transition-colors",onClick:ti,title:V?lh(V):"Set deadline"},"")),m.createElement("button",{className:"w-full btn-primary text-xs sm:text-sm",onClick:er,disabled:!G},"+ Add Task")),m.createElement("div",{className:"mt-4 overflow-y-auto flex-1 pr-1 space-y-4"},i==="day"&&m.createElement(m.Fragment,null,m.createElement("div",null,ct.length===0&&m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},"No pending tasks today."),ct.map(($,Q)=>m.createElement("div",{key:`${$.text}-${Q}`,className:"flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 py-2 text-xs sm:text-sm"},m.createElement("input",{type:"checkbox",className:"w-4 h-4 accent-primary-500",checked:$.completed,onChange:()=>xr(Q),disabled:!G}),m.createElement("div",{className:"flex-1"},$.deadline&&m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},lh($.deadline)),m.createElement("div",{className:"text-gray-900 dark:text-gray-100"},$.text)),m.createElement("button",{className:"text-[11px] text-primary-500 dark:text-primary-400 hover:text-primary-600 dark:hover:text-primary-300 transition-colors",onClick:()=>gs(Q)},"Timer")))),m.createElement("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-3"},m.createElement("div",{className:"text-xs font-semibold mb-1 text-primary-500 dark:text-primary-400"},"Completed Tasks"),_t.length===0&&m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},"No completed tasks yet."),_t.map(($,Q)=>m.createElement("div",{key:`done-${$.text}-${Q}`,className:"flex items-center gap-2 border-b border-gray-200 dark:border-gray-700 py-2 text-xs sm:text-sm opacity-70"},m.createElement("input",{type:"checkbox",className:"w-4 h-4 accent-primary-500",checked:$.completed,onChange:()=>xr(Q),disabled:!G}),m.createElement("div",{className:"flex-1"},$.deadline&&m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},lh($.deadline)),m.createElement("div",{className:"line-through text-gray-700 dark:text-gray-300"},$.text)),m.createElement("button",{className:"text-[11px] text-primary-500 dark:text-primary-400 hover:text-primary-600 dark:hover:text-primary-300 transition-colors",onClick:()=>Wa(Q)},"Info"))))),i==="unfinishedAll"&&m.createElement("div",{className:"space-y-2"},me.length===0?m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},"No unfinished tasks."):me.map(({task:$,date:Q},re)=>m.createElement("div",{key:`${Q}-${$.text}-${re}`,className:"flex flex-col border-b border-gray-200 dark:border-gray-700 py-2 text-xs"},m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},Op(Q)),$.deadline&&m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},lh($.deadline)),m.createElement("div",{className:"text-gray-900 dark:text-gray-100"},$.text)))),i==="completedAll"&&m.createElement("div",{className:"space-y-2"},vt.length===0?m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},"No completed tasks."):vt.map(({task:$,date:Q},re)=>m.createElement("div",{key:`${Q}-${$.text}-${re}`,className:"flex flex-col border-b border-gray-200 dark:border-gray-700 py-2 text-xs opacity-75"},m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},"Added: ",Op($.createdAt||Q)),m.createElement("div",{className:"text-[11px] text-gray-600 dark:text-gray-400"},"Done: ",Op($.completedAt||Q)),m.createElement("div",{className:"line-through text-gray-700 dark:text-gray-300"},$.text)))))),D&&m.createElement("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center z-40 backdrop-blur-sm"},m.createElement("div",{className:"card p-4 w-80 max-w-[90vw] space-y-3 shadow-2xl"},m.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 font-heading"},"Set Deadline"),m.createElement("input",{type:"datetime-local",className:"input w-full text-sm",value:ie,onChange:$=>ee($.target.value)}),m.createElement("div",{className:"flex justify-end gap-2 text-sm"},m.createElement("button",{className:"btn-secondary px-3 py-2",onClick:()=>{M(!1),j(null)}},"Cancel"),m.createElement("button",{className:"btn-primary px-3 py-2",onClick:ni},"Save")))),b&&m.createElement("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center z-40 backdrop-blur-sm"},m.createElement("div",{className:"card p-4 w-80 max-w-[90vw] space-y-3 shadow-2xl"},m.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 font-heading"},"Task Information"),m.createElement("div",{className:"text-sm space-y-1 text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:P}}),m.createElement("div",{className:"flex justify-end"},m.createElement("button",{className:"btn-secondary px-4 py-2 text-sm",onClick:()=>S(!1)},"Close"))))))}function wz(){const{user:t}=ms(),[e,n]=C.useState(!1),[r,i]=C.useState(0);return C.useEffect(()=>{if(!t)return;const a=Wi(Kn,"user_settings",t.uid);uA(a).then(async l=>{if(!l.exists()){await hA(a,{blocked:!1,blockedStart:null,blockedEnd:null,blockedSites:[]});return}const c=l.data();c!=null&&c.blocked&&(n(!0),i(c.blockedStart||Date.now()))})},[t]),{blocked:e,startBlock:async()=>{if(!t)return;n(!0),i(Date.now());const a=Wi(Kn,"user_settings",t.uid);await xi(a,{blocked:!0,blockedStart:Date.now(),blockedSites:["twitter.com","instagram.com","facebook.com","youtube.com"]});const l=document.createElement("div");l.id="blocker-overlay",l.style.cssText=`
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
      background: rgba(0,0,0,0.9); z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center;
      color: white; font-size: 2em; text-align: center; font-family: sans-serif;
    `,l.innerHTML=`
      <div style="margin-bottom: 1em;"> Focus Mode Active</div>
      <p style="font-size: 0.6em; opacity: 0.8;">Stay productivedistractions blocked!</p>
      <button id="escape-focus" style="margin-top: 1em; padding: 0.5em 1em; background: teal; color: white; border: none; border-radius: 0.5em; cursor: pointer;" onclick="document.getElementById('blocker-overlay').remove(); window.location.reload();">Emergency Exit</button>
    `,document.body.appendChild(l),window.onbeforeunload=()=>"Focus mode activestay on task!"},stopBlock:async()=>{n(!1);const a=((Date.now()-r)/1e3/60).toFixed(1),l=Wi(Kn,"user_settings",t.uid);await xi(l,{blocked:!1,blockedEnd:Date.now(),sessionDuration:parseFloat(a)});const c=document.getElementById("blocker-overlay");c&&c.remove(),window.onbeforeunload=null}}}var Zh={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=Zh.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=Zh.easeInBounce(t*2,0,i,r),s*.5+e):(s=Zh.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},Ez=Zh;function xz(t){return t*Math.PI/180}function hn(t,e){return t+Math.random()*(e-t)}function bz(t,e){return Math.floor(t+Math.random()*(e-t+1))}var oc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(oc||(oc={}));var gi;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(gi||(gi={}));const Tz=1e3/60;class kz{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=hn(5,20),this.h=hn(5,20),this.radius=hn(5,10),this.vx=typeof o=="number"?hn(-o,o):hn(o.min,o.max),this.vy=typeof a=="number"?hn(-a,0):hn(a.min,a.max),this.shape=bz(0,2),this.angle=xz(hn(0,360)),this.angularSpin=hn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=hn(0,1),this.rotationDirection=hn(0,1)?gi.Positive:gi.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/Tz;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===gi.Positive?this.rotationDirection=gi.Negative:this.rotateY<=-1&&this.rotationDirection===gi.Negative&&(this.rotationDirection=gi.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case oc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case oc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case oc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Sz{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=hn(this.x,this.w+this.x),s=hn(this.y,this.h+this.y);return new kz(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:d,debug:f,tweenFunction:p,tweenDuration:y}=this.getOptions();if(!c)return!1;const v=this.particles.length,x=u?v:a;if(x<d){l!==d&&(this.tweenProgress=0,this.tweenFrom=x,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(y,Math.max(0,this.tweenProgress+i));const _=p(this.tweenProgress,this.tweenFrom,d,y),w=Math.round(_-x);for(let T=0;T<w;T++)this.particles.push(this.getParticle());this.particlesGenerated+=w}f&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,s.width-10,s.height-20));for(let _=this.particles.length-1;_>=0;_--){const w=this.particles[_];w.update(i),(w.y>s.height||w.y<-100||w.x>s.width+100||w.x<-100)&&(u&&x<=d?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return v>0||x<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const R_={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Ez.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Iz{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...R_,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Sz(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Cz=m.createRef();class N_ extends m.Component{constructor(e){super(e),this.canvas=m.createRef(),this.canvas=e.canvasRef||Cz}componentDidMount(){if(this.canvas.current){const e=Lp(this.props)[0];this.confetti=new Iz(this.canvas.current,e)}}componentDidUpdate(){const e=Lp(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Lp(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return Xn.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}N_.defaultProps={...R_};N_.displayName="ReactConfetti";function Lp(t){const e={},n={},r={},i=[...Object.keys(R_),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const iR=m.forwardRef((t,e)=>Xn.jsx(N_,{canvasRef:e,...t}));function Az(){const[i,s]=C.useState(1500),[o,a]=C.useState(1500),[l,c]=C.useState(!1),[u,d]=C.useState("work"),[f,p]=C.useState(1),y=C.useRef(null),[v,x]=C.useState([]),[_,w]=C.useState(25),[T,I]=C.useState(0),[R,O]=C.useState(!1),[k,b]=C.useState({width:0,height:0}),{addPoints:S,unlockBadge:P}=po(),{startBlock:N,stopBlock:D}=wz(),{addItem:M}=Mn("sessions");C.useEffect(()=>{b({width:window.innerWidth,height:window.innerHeight});const me=()=>{b({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",me),()=>window.removeEventListener("resize",me)},[]);const ie=me=>{const vt=Math.floor(me/60),br=me%60;return{mins:vt.toString().padStart(2,"0"),secs:br.toString().padStart(2,"0")}},ee=C.useCallback(()=>{switch(u){case"work":return i;case"short":return 300;case"long":return 900;default:return i}},[u,i]),ce=()=>{switch(u){case"work":return"Work Session";case"short":return"Short Break";case"long":return"Long Break";default:return"Work Session"}},j=()=>{switch(u){case"work":return{primary:"#6366f1",secondary:"#4f46e5",gradient:"from-primary-500 to-indigo-600"};case"short":return{primary:"#34d399",secondary:"#10b981",gradient:"from-accent-400 to-emerald-500"};case"long":return{primary:"#a78bfa",secondary:"#8b5cf6",gradient:"from-purple-500 to-indigo-600"};default:return{primary:"#6366f1",secondary:"#4f46e5",gradient:"from-primary-500 to-indigo-600"}}},V=C.useCallback(async()=>{let me,vt;if(u==="work"){await S(10,"Pomodoro complete"),f%4===0&&await P("pomodoro-marathon");const ti=Math.round(i/60),gs=new Date().toISOString();x(ni=>[{id:`${Date.now()}-${ni.length}`,type:"Work",durationMinutes:ti,completedAt:gs},...ni.slice(0,9)]);try{await M({type:"work",durationMinutes:ti,completedAt:gs})}catch(ni){console.error("Failed to save session:",ni)}O(!0),setTimeout(()=>O(!1),5e3),vt=f,me=f<4?"short":"long",me==="long"&&(vt=1)}else me="work",vt=u==="long"?1:f+1;d(me),p(vt),a(me==="work"?i:me==="short"?300:900)},[u,f,i,S,P,M]);C.useEffect(()=>(l&&o>0?y.current=setInterval(()=>{a(me=>me<=1?(c(!1),setTimeout(()=>{V()},100),0):me-1)},1e3):y.current&&(clearInterval(y.current),y.current=null),()=>{y.current&&(clearInterval(y.current),y.current=null)}),[l,o,V]),C.useEffect(()=>{const me=ee();a(me)},[u,ee]);const W=()=>{D(),c(!1),d("work"),p(1),a(i),x([])},G=()=>{c(!l),l?D():N()},{mins:te,secs:H}=ie(o),se=ee(),de=se>0?(se-o)/se*100:0,Te=ce(),fe=j(),nt=2*Math.PI*90,er=nt*(1-de/100),xr=90;return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-space-dark dark:to-space-dark py-8 particle-bg"},R&&m.createElement(iR,{width:k.width,height:k.height,recycle:!1,numberOfPieces:300,gravity:.3,colors:["#6366f1","#8b5cf6","#34d399","#a78bfa","#ec4899"]}),m.createElement("div",{className:"max-w-5xl mx-auto px-4 md:p-6"},m.createElement(B.div,{className:"card-premium p-6 mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0}},m.createElement("h1",{className:"section-header font-heading text-gray-900 dark:text-gray-50"},"Focus Timer"),m.createElement("p",{className:"section-subtitle text-gray-600 dark:text-gray-400"},"Classic Pomodoro technique with beautiful animations")),m.createElement("div",{className:"card-premium p-8 md:p-12 grid gap-12 md:grid-cols-[1.2fr_1fr] items-center"},m.createElement("div",{className:"flex flex-col items-center"},m.createElement(B.div,{className:"mb-6 flex gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}},m.createElement("span",{className:`text-xs px-4 py-2 rounded-full border-2 bg-gradient-to-r ${fe.gradient} bg-opacity-10 border-current font-semibold`,style:{color:fe.primary}},Te),m.createElement("span",{className:"text-xs px-4 py-2 rounded-full border-2 border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold"},"Cycle ",f," / ",4)),m.createElement("div",{className:"relative"},m.createElement("svg",{width:"280",height:"280",viewBox:"0 0 200 200",className:"transform -rotate-90"},m.createElement("defs",null,m.createElement("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},m.createElement("stop",{offset:"0%",stopColor:fe.primary}),m.createElement("stop",{offset:"100%",stopColor:fe.secondary})),m.createElement("filter",{id:"glow"},m.createElement("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),m.createElement("feMerge",null,m.createElement("feMergeNode",{in:"coloredBlur"}),m.createElement("feMergeNode",{in:"SourceGraphic"})))),m.createElement("circle",{cx:"100",cy:"100",r:xr,fill:"none",stroke:"rgba(99, 102, 241, 0.1)",strokeWidth:"12"}),m.createElement(B.circle,{cx:"100",cy:"100",r:xr,fill:"none",stroke:"url(#progressGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:nt,initial:{strokeDashoffset:nt},animate:{strokeDashoffset:er,filter:l?["drop-shadow(0 0 10px "+fe.primary+")","drop-shadow(0 0 20px "+fe.primary+")","drop-shadow(0 0 10px "+fe.primary+")"]:"drop-shadow(0 0 10px "+fe.primary+")"},transition:{strokeDashoffset:{duration:1,ease:"linear"},filter:{duration:2,repeat:l?1/0:0}}}),l&&m.createElement(B.circle,{cx:"100",cy:"100",r:xr+8,fill:"none",stroke:fe.primary,strokeWidth:"2",opacity:"0.5",animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})),m.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},m.createElement(B.div,{className:"text-center",animate:l?{scale:[1,1.02,1]}:{},transition:{duration:1,repeat:l?1/0:0}},m.createElement(B.div,{className:"text-6xl md:text-7xl font-bold font-mono mb-2 gradient-text font-heading",key:`${te}-${H}`,initial:{scale:.9},animate:{scale:1},transition:{duration:.3}},te,":",H),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-semibold"},Math.round(de),"% Complete"))))),m.createElement("div",{className:"flex flex-col gap-6"},m.createElement("div",{className:"grid grid-cols-3 gap-3"},[{id:"work",label:"Work",time:"25m",duration:1500},{id:"short",label:"Break",time:"5m",duration:300},{id:"long",label:"Long",time:"15m",duration:900}].map(me=>{const vt=u===me.id,br=j();return m.createElement(B.button,{key:me.id,type:"button",onClick:()=>{d(me.id),a(me.duration)},className:`p-4 rounded-xl border-2 font-semibold transition-all ${vt?`bg-gradient-to-br ${br.gradient} text-white border-transparent shadow-lg`:"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:border-primary-300 dark:hover:border-primary-700"}`,whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement("div",{className:"text-sm font-bold"},me.label),m.createElement("div",{className:"text-xs opacity-80"},me.time))})),m.createElement("div",{className:"card p-4 space-y-3"},m.createElement("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide"},"Custom Duration"),m.createElement("div",{className:"flex gap-2"},m.createElement("input",{type:"number",min:0,max:90,value:_,onChange:me=>w(Math.min(90,Math.max(0,Number(me.target.value)||0))),className:"input flex-1 text-sm",placeholder:"Min"}),m.createElement("input",{type:"number",min:0,max:59,value:T,onChange:me=>I(Math.min(59,Math.max(0,Number(me.target.value)||0))),className:"input flex-1 text-sm",placeholder:"Sec"}),m.createElement(B.button,{type:"button",onClick:()=>{const me=_*60+T,vt=me>0?me:1500;s(vt),d("work"),a(vt)},className:"btn-secondary text-sm px-4",whileHover:{scale:1.05},whileTap:{scale:.95}},"Set"))),m.createElement("div",{className:"flex items-center gap-4"},m.createElement(B.button,{onClick:G,className:`w-20 h-20 rounded-full flex items-center justify-center text-white shadow-2xl bg-gradient-to-br ${fe.gradient}`,whileHover:{scale:1.1},whileTap:{scale:.9},animate:l?{boxShadow:[`0 0 20px ${fe.primary}`,`0 0 40px ${fe.primary}`,`0 0 20px ${fe.primary}`]}:{},transition:{duration:2,repeat:l?1/0:0}},l?m.createElement(wj,{className:"w-8 h-8"}):m.createElement(Tj,{className:"w-8 h-8 ml-1"})),m.createElement(B.button,{onClick:W,className:"btn-secondary flex-1 flex items-center justify-center gap-2 py-4",whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(Sj,{className:"w-5 h-5"}),"Reset")),m.createElement("p",{className:"text-xs text-center text-gray-600 dark:text-gray-400"}," Points are awarded automatically when a work session completes"))),m.createElement(B.div,{className:"card-premium p-6 mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3}},m.createElement("div",{className:"flex items-center gap-2 mb-4"},m.createElement(af,{className:"w-5 h-5 text-primary-500"}),m.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Recent Sessions")),m.createElement(hP,null,v.length===0?m.createElement(B.p,{className:"text-sm text-center text-gray-600 dark:text-gray-400 py-8",initial:{opacity:0},animate:{opacity:1}},"Complete a focus session to see it here!"):m.createElement("div",{className:"space-y-2"},v.map((me,vt)=>m.createElement(B.div,{key:me.id,className:"flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-primary-500/10 to-purple-500/10 border border-primary-500/20 dark:border-primary-500/30",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:vt*.1},whileHover:{x:5}},m.createElement("span",{className:"font-semibold text-gray-900 dark:text-gray-50"},me.type,"  ",me.durationMinutes," min"),m.createElement("span",{className:"text-sm text-gray-600 dark:text-gray-400"},new Date(me.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))))))))}function Pz(){var y;const{data:t,loading:e,addItem:n,updateItem:r,deleteItem:i}=Mn("habits"),{updateStreak:s,progress:o,addPoints:a}=po(),[l,c]=C.useState(""),u=async v=>{try{const x=t.find(w=>w.id===v),_=x.done;await r(v,{done:!x.done}),_?await s(v,!1):(await s(v,!0),await a(10,"Habit completed"))}catch(x){console.error("Update failed:",x),alert("Update failed")}},d=async()=>{if(l.trim()!=="")try{await n({title:l.trim(),done:!1,streak:0,createdAt:new Date().toISOString()}),c("")}catch(v){console.error("Add failed:",v),alert("Add failed")}},f=async v=>{if(window.confirm("Delete this habit?"))try{await i(v)}catch(x){console.error("Delete failed:",x),alert("Delete failed")}};if(e)return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-gray-900 dark:to-space-dark flex items-center justify-center"},m.createElement("div",{className:"text-center text-gray-600 dark:text-gray-300"},"Loading habits..."));const p=(o==null?void 0:o.streaks)||{};return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-gray-900 dark:to-space-dark py-8"},m.createElement("div",{className:"max-w-4xl mx-auto px-4 md:p-6"},m.createElement("div",{className:"card-premium p-6 mb-6"},m.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-50 font-heading mb-2"},"Habits"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Keep track of the small things you want to repeat.")),m.createElement("div",{className:"card p-4 mb-6"},m.createElement("div",{className:"flex gap-2"},m.createElement("input",{type:"text",className:"input flex-1 rounded-l-lg",placeholder:"Create a new habit...",value:l,onChange:v=>c(v.target.value),onKeyPress:v=>v.key==="Enter"&&d()}),m.createElement("button",{onClick:d,className:"btn-primary rounded-r-lg px-6"},"Add Habit"))),m.createElement("div",{className:"space-y-3 mb-8"},t.map((v,x)=>{const _=p[v.id]||0;return m.createElement(B.div,{key:v.id,className:"card border-accent-500/30 dark:border-accent-500/30 flex justify-between items-center p-4 hover:shadow-lg transition-all",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1}},m.createElement("div",{className:"flex items-center gap-3 flex-1"},m.createElement("input",{type:"checkbox",checked:v.done||!1,onChange:()=>u(v.id),className:"w-5 h-5 rounded cursor-pointer accent-primary-500"}),m.createElement("div",{className:"flex-1"},m.createElement("span",{className:`font-medium text-lg text-gray-900 dark:text-gray-50 ${v.done?"line-through opacity-50":""}`},v.title),_>0&&m.createElement("div",{className:"flex items-center gap-2 mt-1 text-xs text-accent-500 dark:text-accent-400 font-semibold"}," ",_," day streak"))),m.createElement("button",{onClick:()=>f(v.id),className:"text-red-400 hover:text-red-300 dark:text-red-500 dark:hover:text-red-400 text-lg ml-2 transition-colors"},""))})),t.length===0&&m.createElement("div",{className:"card p-8 text-center"},m.createElement("p",{className:"text-lg text-gray-700 dark:text-gray-200 font-medium"},"No habits yetcreate one above.")),m.createElement("div",{className:"card p-6"},m.createElement("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-50 font-heading"}," Achievement Badges"),m.createElement("div",{className:"flex flex-wrap gap-3 mb-4"},(y=o==null?void 0:o.badges)==null?void 0:y.map((v,x)=>m.createElement(B.div,{key:x,className:"px-3 py-1 text-sm rounded-full border border-primary-500/30 dark:border-primary-500/30 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 flex items-center gap-1",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:x*.1}},m.createElement("span",null,"")," ",v.id)),(!(o!=null&&o.badges)||o.badges.length===0)&&m.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"Keep building streaks to unlock badges!")),m.createElement("p",{className:"text-sm text-gray-700 dark:text-gray-200"},"Total points: ",m.createElement("span",{className:"font-bold text-primary-500 dark:text-primary-400"},(o==null?void 0:o.points)||0)))))}const Wo=[{name:"indigo",bg:"rgba(99, 102, 241, 0.2)",border:"rgb(99, 102, 241)",darkBg:"rgba(99, 102, 241, 0.3)",darkBorder:"rgb(129, 140, 248)"},{name:"emerald",bg:"rgba(16, 185, 129, 0.2)",border:"rgb(16, 185, 129)",darkBg:"rgba(16, 185, 129, 0.3)",darkBorder:"rgb(52, 211, 153)"},{name:"purple",bg:"rgba(168, 85, 247, 0.2)",border:"rgb(168, 85, 247)",darkBg:"rgba(168, 85, 247, 0.3)",darkBorder:"rgb(192, 132, 252)"},{name:"amber",bg:"rgba(245, 158, 11, 0.2)",border:"rgb(245, 158, 11)",darkBg:"rgba(245, 158, 11, 0.3)",darkBorder:"rgb(251, 191, 36)"},{name:"rose",bg:"rgba(244, 63, 94, 0.2)",border:"rgb(244, 63, 94)",darkBg:"rgba(244, 63, 94, 0.3)",darkBorder:"rgb(251, 113, 133)"},{name:"cyan",bg:"rgba(6, 182, 212, 0.2)",border:"rgb(6, 182, 212)",darkBg:"rgba(6, 182, 212, 0.3)",darkBorder:"rgb(34, 211, 238)"}];function Rz(t){const e=t.split("").reduce((n,r)=>n+r.charCodeAt(0),0);return Wo[e%Wo.length]}function Nz(){const{data:t,loading:e,addItem:n,updateItem:r,deleteItem:i}=Mn("events"),[s,o]=C.useState(new Date),[a,l]=C.useState(null),[c,u]=C.useState({title:"",date:"",time:"",category:""}),[d,f]=C.useState(!1),[p,y]=C.useState(null),[v,x]=C.useState(!1);C.useEffect(()=>{const j=()=>{x(document.documentElement.classList.contains("dark"))};j();const V=new MutationObserver(j);return V.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>V.disconnect()},[]);const _=s.getFullYear(),w=s.getMonth(),T=new Date(_,w,1).getDay(),I=new Date(_,w+1,0).getDate(),R=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=j=>{o(new Date(_,w+j,1))},b=j=>{o(new Date(_+j,w,1))},S=j=>{const V=`${_}-${String(w+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`;return(t==null?void 0:t.filter(W=>W.date===V))||[]},P=j=>{const V=new Date;return j===V.getDate()&&w===V.getMonth()&&_===V.getFullYear()},N=j=>{const V=new Date;return new Date(_,w,j)<new Date(V.getFullYear(),V.getMonth(),V.getDate())},D=j=>{const V=new Date;return new Date(_,w,j)>new Date(V.getFullYear(),V.getMonth(),V.getDate())},M=(j,V)=>{V.stopPropagation(),y(j),u({title:j.title,date:j.date,time:j.time||"",category:j.category||""}),f(!0)},ie=async(j,V)=>{V.stopPropagation(),window.confirm("Delete this event?")&&await i(j)},ee=async()=>{if(!c.title.trim()||!c.date)return;const j=c.date||`${_}-${String(w+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,V={title:c.title.trim(),date:j,time:c.time||new Date().toLocaleTimeString(),done:(p==null?void 0:p.done)||!1,category:c.category||Wo[Math.floor(Math.random()*Wo.length)].name};p?(await r(p.id,V),y(null)):await n(V),u({title:"",date:"",time:"",category:""}),f(!1),l(null)},ce=j=>{l(j),u({title:"",date:`${_}-${String(w+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`,time:"",category:Wo[Math.floor(Math.random()*Wo.length)].name}),f(!0)};return e?m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-gray-900 dark:to-space-dark flex items-center justify-center"},m.createElement("div",{className:"text-center text-gray-600 dark:text-gray-400"},"Loading calendar...")):m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-gray-900 dark:to-space-dark py-8"},m.createElement("div",{className:"max-w-7xl mx-auto px-4 md:p-6"},m.createElement("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4"},m.createElement("div",null,m.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Calendar"),m.createElement("p",{className:"text-sm mt-1 text-gray-600 dark:text-gray-400"},"See your week at a glance and add sessions quickly."))),m.createElement("div",{className:"card p-4 mb-6"},m.createElement("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-4"},m.createElement("div",{className:"flex items-center gap-4"},m.createElement("button",{onClick:()=>b(-1),className:"btn-secondary px-3 py-1 text-sm"}," Year"),m.createElement("button",{onClick:()=>k(-1),className:"btn-secondary px-3 py-1 text-sm"}," Month")),m.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},R[w]," ",_),m.createElement("div",{className:"flex items-center gap-4"},m.createElement("button",{onClick:()=>k(1),className:"btn-secondary px-3 py-1 text-sm"},"Month "),m.createElement("button",{onClick:()=>b(1),className:"btn-secondary px-3 py-1 text-sm"},"Year "))),m.createElement("button",{onClick:()=>o(new Date),className:"btn-primary text-sm px-4 py-2"},"Today")),d&&m.createElement("div",{className:"card p-6 mb-6"},m.createElement("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-50 font-heading"},p?"Edit Event":`Add Event for ${a&&`${R[w]} ${a}, ${_}`}`),m.createElement("div",{className:"space-y-3"},m.createElement("input",{type:"text",className:"input w-full",placeholder:"Event title...",value:c.title,onChange:j=>u({...c,title:j.target.value})}),m.createElement("input",{type:"date",className:"input w-full",value:c.date,onChange:j=>u({...c,date:j.target.value})}),m.createElement("input",{type:"time",className:"input w-full",value:c.time,onChange:j=>u({...c,time:j.target.value})}),m.createElement("div",{className:"flex gap-2"},m.createElement("button",{onClick:ee,className:"btn-primary flex-1"},p?"Save Changes":"Add Event"),m.createElement("button",{onClick:()=>{f(!1),l(null),y(null),u({title:"",date:"",time:"",category:""})},className:"btn-secondary flex-1"},"Cancel")))),m.createElement("div",{className:"card p-4"},m.createElement("div",{className:"grid grid-cols-7 gap-2 mb-2"},O.map(j=>m.createElement("div",{key:j,className:"p-2 text-center font-bold text-sm text-gray-700 dark:text-gray-300"},j))),m.createElement("div",{className:"grid grid-cols-7 gap-2"},Array(T).fill(null).map((j,V)=>m.createElement("div",{key:`empty-${V}`,className:"p-2"})),Array.from({length:I},(j,V)=>V+1).map(j=>{const V=S(j),W=N(j),G=P(j);return D(j),m.createElement("div",{key:j,className:`card p-2 min-h-[100px] cursor-pointer transition-all ${G?"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20":W?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900"}`,onClick:()=>ce(j)},m.createElement("div",{className:`text-sm font-bold mb-1 ${G?"text-primary-600 dark:text-primary-400":W?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`},j),m.createElement("div",{className:"space-y-1"},V.map(te=>{const H=Rz(te.title);return m.createElement("div",{key:te.id,className:"text-xs p-1.5 rounded-md border-2 text-gray-800 dark:text-gray-100 hover:opacity-90 transition-all group relative flex items-center justify-between shadow-sm font-semibold",style:{backgroundColor:v?H.darkBg:H.bg,borderColor:v?H.darkBorder:H.border},onClick:se=>se.stopPropagation()},m.createElement("div",{className:"flex-1 min-w-0"},te.time&&m.createElement("span",{className:"opacity-80 text-[10px] mr-1 font-medium"},te.time.split(":").slice(0,2).join(":")),m.createElement("span",null,te.title)),m.createElement("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},m.createElement("button",{onClick:se=>M(te,se),className:"p-1 rounded hover:bg-white/20 dark:hover:bg-white/10 transition-colors",title:"Edit event"},m.createElement(oz,{className:"w-3 h-3 text-gray-700 dark:text-gray-200"})),m.createElement("button",{onClick:se=>ie(te.id,se),className:"p-1 rounded hover:bg-red-500/30 dark:hover:bg-red-900/50 transition-colors",title:"Delete event"},m.createElement(nR,{className:"w-3 h-3 text-red-600 dark:text-red-400"}))))})))})))))}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function _u(t){return t+.5|0}const Ci=(t,e,n)=>Math.max(Math.min(t,n),e);function Dl(t){return Ci(_u(t*2.55),0,255)}function Ki(t){return Ci(_u(t*255),0,255)}function Pr(t){return Ci(_u(t/2.55)/100,0,1)}function eT(t){return Ci(_u(t*100),0,100)}const En={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ky=[..."0123456789ABCDEF"],Mz=t=>Ky[t&15],Dz=t=>Ky[(t&240)>>4]+Ky[t&15],ch=t=>(t&240)>>4===(t&15),Oz=t=>ch(t.r)&&ch(t.g)&&ch(t.b)&&ch(t.a);function Lz(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&En[t[1]]*17,g:255&En[t[2]]*17,b:255&En[t[3]]*17,a:e===5?En[t[4]]*17:255}:(e===7||e===9)&&(n={r:En[t[1]]<<4|En[t[2]],g:En[t[3]]<<4|En[t[4]],b:En[t[5]]<<4|En[t[6]],a:e===9?En[t[7]]<<4|En[t[8]]:255})),n}const Vz=(t,e)=>t<255?e(t):"";function Fz(t){var e=Oz(t)?Mz:Dz;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Vz(t.a,e):void 0}const Bz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sR(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Uz(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function jz(t,e,n){const r=sR(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function zz(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function M_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=zz(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function D_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ki)}function O_(t,e,n){return D_(sR,t,e,n)}function $z(t,e,n){return D_(jz,t,e,n)}function Hz(t,e,n){return D_(Uz,t,e,n)}function oR(t){return(t%360+360)%360}function Wz(t){const e=Bz.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Dl(+e[5]):Ki(+e[5]));const i=oR(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=$z(i,s,o):e[1]==="hsv"?r=Hz(i,s,o):r=O_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Kz(t,e){var n=M_(t);n[0]=oR(n[0]+e),n=O_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function qz(t){if(!t)return;const e=M_(t),n=e[0],r=eT(e[1]),i=eT(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Pr(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const tT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Gz(){const t={},e=Object.keys(nT),n=Object.keys(tT);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,tT[s]);s=parseInt(nT[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let uh;function Yz(t){uh||(uh=Gz(),uh.transparent=[0,0,0,0]);const e=uh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Qz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xz(t){const e=Qz.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Dl(o):Ci(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Dl(r):Ci(r,0,255)),i=255&(e[4]?Dl(i):Ci(i,0,255)),s=255&(e[6]?Dl(s):Ci(s,0,255)),{r,g:i,b:s,a:n}}}function Jz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Pr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Vp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,xo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Zz(t,e,n){const r=xo(Pr(t.r)),i=xo(Pr(t.g)),s=xo(Pr(t.b));return{r:Ki(Vp(r+n*(xo(Pr(e.r))-r))),g:Ki(Vp(i+n*(xo(Pr(e.g))-i))),b:Ki(Vp(s+n*(xo(Pr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function hh(t,e,n){if(t){let r=M_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=O_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function aR(t,e){return t&&Object.assign(e||{},t)}function rT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ki(t[3]))):(e=aR(t,{r:0,g:0,b:0,a:1}),e.a=Ki(e.a)),e}function e$(t){return t.charAt(0)==="r"?Xz(t):Wz(t)}class Hc{constructor(e){if(e instanceof Hc)return e;const n=typeof e;let r;n==="object"?r=rT(e):n==="string"&&(r=Lz(e)||Yz(e)||e$(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=aR(this._rgb);return e&&(e.a=Pr(e.a)),e}set rgb(e){this._rgb=rT(e)}rgbString(){return this._valid?Jz(this._rgb):void 0}hexString(){return this._valid?Fz(this._rgb):void 0}hslString(){return this._valid?qz(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Zz(this._rgb,e._rgb,n)),this}clone(){return new Hc(this.rgb)}alpha(e){return this._rgb.a=Ki(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=_u(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hh(this._rgb,2,e),this}darken(e){return hh(this._rgb,2,-e),this}saturate(e){return hh(this._rgb,1,e),this}desaturate(e){return hh(this._rgb,1,-e),this}rotate(e){return Kz(this._rgb,e),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function kr(){}const t$=(()=>{let t=0;return()=>t++})();function Me(t){return t===null||typeof t>"u"}function ft(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Vn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function sr(t,e){return Vn(t)?t:e}function ge(t,e){return typeof t>"u"?e:t}const n$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,lR=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ie(t,e,n,r){let i,s,o;if(ft(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(be(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function lf(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function cf(t){if(ft(t))return t.map(cf);if(be(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=cf(t[n[i]]);return e}return t}function cR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function r$(t,e,n,r){if(!cR(t))return;const i=e[t],s=n[t];be(i)&&be(s)?Wc(i,s,r):e[t]=cf(s)}function Wc(t,e,n){const r=ft(e)?e:[e],i=r.length;if(!be(t))return t;n=n||{};const s=n.merger||r$;let o;for(let a=0;a<i;++a){if(o=r[a],!be(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function ac(t,e){return Wc(t,e,{merger:i$})}function i$(t,e,n){if(!cR(t))return;const r=e[t],i=n[t];be(r)&&be(i)?ac(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=cf(i))}const iT={"":t=>t,x:t=>t.x,y:t=>t.y};function s$(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function o$(t){const e=s$(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function ao(t,e){return(iT[e]||(iT[e]=o$(e)))(t)}function L_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Kc=t=>typeof t<"u",is=t=>typeof t=="function",sT=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function a$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xe=Math.PI,Qe=2*Xe,l$=Qe+Xe,uf=Number.POSITIVE_INFINITY,c$=Xe/180,pt=Xe/2,ks=Xe/4,oT=Xe*2/3,uR=Math.log10,wr=Math.sign;function lc(t,e,n){return Math.abs(t-e)<n}function aT(t){const e=Math.round(t);t=lc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(uR(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function u$(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function qc(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function d$(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Lr(t){return t*(Xe/180)}function f$(t){return t*(180/Xe)}function lT(t){if(!Vn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function hR(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Xe&&(s+=Qe),{angle:s,distance:i}}function qy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function m$(t,e){return(t-e+l$)%Qe-Xe}function fi(t){return(t%Qe+Qe)%Qe}function Gc(t,e,n,r){const i=fi(t),s=fi(e),o=fi(n),a=fi(s-i),l=fi(o-i),c=fi(i-s),u=fi(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function jt(t,e,n){return Math.max(e,Math.min(n,t))}function p$(t){return jt(t,-32768,32767)}function Ai(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function V_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const js=(t,e,n,r)=>V_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),g$=(t,e,n)=>V_(t,n,r=>t[r][e]>=n);function y$(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const dR=["push","pop","shift","splice","unshift"];function v$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),dR.forEach(n=>{const r="_onData"+L_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function cT(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(dR.forEach(s=>{delete t[s]}),delete t._chartjs)}function fR(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const mR=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function pR(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,mR.call(window,()=>{r=!1,t.apply(e,n)}))}}function _$(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const F_=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,w$=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function E$(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=jt(Math.min(js(a,l,c).lo,n?r:js(e,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=jt(Math.max(js(a,o.axis,u,!0).hi+1,n?0:js(e,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function x$(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const dh=t=>t===0||t===1,uT=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Qe/n)),hT=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Qe/n)+1,cc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pt)+1,easeOutSine:t=>Math.sin(t*pt),easeInOutSine:t=>-.5*(Math.cos(Xe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>dh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>dh(t)?t:uT(t,.075,.3),easeOutElastic:t=>dh(t)?t:hT(t,.075,.3),easeInOutElastic(t){return dh(t)?t:t<.5?.5*uT(t*2,.1125,.45):.5+.5*hT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-cc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?cc.easeInBounce(t*2)*.5:cc.easeOutBounce(t*2-1)*.5+.5};function B_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function dT(t){return B_(t)?t:new Hc(t)}function Fp(t){return B_(t)?t:new Hc(t).saturate(.5).darken(.1).hexString()}const b$=["x","y","borderWidth","radius","tension"],T$=["color","borderColor","backgroundColor"];function k$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:T$},numbers:{type:"number",properties:b$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function S$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fT=new Map;function I$(t,e){e=e||{};const n=t+JSON.stringify(e);let r=fT.get(n);return r||(r=new Intl.NumberFormat(t,e),fT.set(n,r)),r}function U_(t,e,n){return I$(e,n).format(t)}const C$={values(t){return ft(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=A$(t,n)}const o=uR(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),U_(t,r,l)}};function A$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var gR={formatters:C$};function P$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gR.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const lo=Object.create(null),Gy=Object.create(null);function uc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Bp(t,e,n){return typeof e=="string"?Wc(uc(t,e),n):Wc(uc(t,""),e)}class R${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Fp(i.backgroundColor),this.hoverBorderColor=(r,i)=>Fp(i.borderColor),this.hoverColor=(r,i)=>Fp(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Bp(this,e,n)}get(e){return uc(this,e)}describe(e,n){return Bp(Gy,e,n)}override(e,n){return Bp(lo,e,n)}route(e,n,r,i){const s=uc(this,e),o=uc(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return be(l)?Object.assign({},c,l):ge(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var et=new R$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k$,S$,P$]);function N$(t){return!t||Me(t.size)||Me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function mT(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ss(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function pT(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Yy(t,e,n,r){yR(t,e,n,r,null)}function yR(t,e,n,r,i){let s,o,a,l,c,u,d,f;const p=e.pointStyle,y=e.rotation,v=e.radius;let x=(y||0)*c$;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,v,0,0,Qe):t.arc(n,r,v,0,Qe),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=oT,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=oT,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(x+ks)*l,d=Math.cos(x+ks)*(i?i/2-c:l),a=Math.sin(x+ks)*l,f=Math.sin(x+ks)*(i?i/2-c:l),t.arc(n-d,r-a,c,x-Xe,x-pt),t.arc(n+f,r-o,c,x-pt,x),t.arc(n+d,r+a,c,x,x+pt),t.arc(n-f,r+o,c,x+pt,x+Xe),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=ks;case"rectRot":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":x+=ks;case"cross":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),x+=ks,d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(x)*v,a=Math.sin(x)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:v),r+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Yc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function j_(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function z_(t){t.restore()}function M$(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function D$(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function O$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function L$(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function V$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Qc(t,e,n,r,i,s={}){const o=ft(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,O$(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&V$(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Me(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),L$(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function hf(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Xe,Xe,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Xe,pt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,pt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-pt,!0),t.lineTo(n+o.topLeft,r)}const F$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,B$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function U$(t,e){const n=(""+t).match(F$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const j$=t=>+t||0;function $_(t,e){const n={},r=be(e),i=r?Object.keys(e):e,s=be(t)?r?o=>ge(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=j$(s(o));return n}function vR(t){return $_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ia(t){return $_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Fn(t){const e=vR(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function zt(t,e){t=t||{},e=e||et.font;let n=ge(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ge(t.style,e.style);r&&!(""+r).match(B$)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ge(t.family,e.family),lineHeight:U$(ge(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ge(t.weight,e.weight),string:""};return i.string=N$(i),i}function fh(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function z$(t,e,n){const{min:r,max:i}=t,s=lR(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function go(t,e){return Object.assign(Object.create(t),e)}function H_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=xR("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>H_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return wR(a,l,()=>Q$(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return yT(a).includes(l)},ownKeys(a){return yT(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Ta(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:_R(t,r),setContext:s=>Ta(t,s,n,r),override:s=>Ta(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return wR(s,o,()=>H$(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function _R(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:is(n)?n:()=>n,isIndexable:is(r)?r:()=>r}}const $$=(t,e)=>t?t+L_(e):e,W_=(t,e)=>be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function wR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function H$(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return is(a)&&o.isScriptable(e)&&(a=W$(e,a,t,n)),ft(a)&&a.length&&(a=K$(e,a,t,o.isIndexable)),W_(e,a)&&(a=Ta(a,i,s&&s[e],o)),a}function W$(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),W_(t,l)&&(l=K_(i._scopes,i,t,l)),l}function K$(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(be(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=K_(c,i,t,u);e.push(Ta(d,s,o&&o[t],a))}}return e}function ER(t,e,n){return is(t)?t(e,n):t}const q$=(t,e)=>t===!0?e:typeof t=="string"?ao(e,t):void 0;function G$(t,e,n,r,i){for(const s of e){const o=q$(n,s);if(o){t.add(o);const a=ER(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function K_(t,e,n,r){const i=e._rootScopes,s=ER(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=gT(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=gT(a,o,s,l,r),l===null)?!1:H_(Array.from(a),[""],i,s,()=>Y$(e,n,r))}function gT(t,e,n,r,i){for(;n;)n=G$(t,e,n,r,i);return n}function Y$(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ft(i)&&be(n)?n:i||{}}function Q$(t,e,n,r){let i;for(const s of e)if(i=xR($$(s,t),n),typeof i<"u")return W_(t,i)?K_(n,r,t,i):i}function xR(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function yT(t){let e=t._keys;return e||(e=t._keys=X$(t._scopes)),e}function X$(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const J$=Number.EPSILON||1e-14,ka=(t,e)=>e<t.length&&!t[e].skip&&t[e],bR=t=>t==="x"?"y":"x";function Z$(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=qy(s,i),l=qy(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function eH(t,e,n){const r=t.length;let i,s,o,a,l,c=ka(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ka(t,u+1),!(!l||!c)){if(lc(e[u],0,J$)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function tH(t,e,n="x"){const r=bR(n),i=t.length;let s,o,a,l=ka(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ka(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function nH(t,e="x"){const n=bR(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ka(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ka(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?wr(i[o-1])!==wr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}eH(t,i,s),tH(t,s,e)}function mh(t,e,n){return Math.max(Math.min(t,n),e)}function rH(t,e){let n,r,i,s,o,a=Yc(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Yc(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=mh(i.cp1x,e.left,e.right),i.cp1y=mh(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=mh(i.cp2x,e.left,e.right),i.cp2y=mh(i.cp2y,e.top,e.bottom)))}function iH(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")nH(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Z$(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&rH(t,n)}function TR(){return typeof window<"u"&&typeof document<"u"}function q_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function df(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const hm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function sH(t,e){return hm(t).getPropertyValue(e)}const oH=["top","right","bottom","left"];function Ys(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=oH[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const aH=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function lH(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(aH(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ns(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=hm(n),s=i.boxSizing==="border-box",o=Ys(i,"padding"),a=Ys(i,"border","width"),{x:l,y:c,box:u}=lH(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-f)/y*n.height/r)}}function cH(t,e,n){let r,i;if(e===void 0||n===void 0){const s=q_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=hm(s),l=Ys(a,"border","width"),c=Ys(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=df(a.maxWidth,s,"clientWidth"),i=df(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||uf,maxHeight:i||uf}}const ph=t=>Math.round(t*10)/10;function uH(t,e,n,r){const i=hm(t),s=Ys(i,"margin"),o=df(i.maxWidth,t,"clientWidth")||uf,a=df(i.maxHeight,t,"clientHeight")||uf,l=cH(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Ys(i,"border","width"),p=Ys(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=ph(Math.min(c,o,l.maxWidth)),u=ph(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ph(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=ph(Math.floor(u*r))),{width:c,height:u}}function vT(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const hH=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function _T(t,e){const n=sH(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ms(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function dH(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function fH(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ms(t,i,n),a=Ms(i,s,n),l=Ms(s,e,n),c=Ms(o,a,n),u=Ms(a,l,n);return Ms(c,u,n)}const mH=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},pH=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function sa(t,e,n){return t?mH(e,n):pH()}function kR(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function SR(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function IR(t){return t==="angle"?{between:Gc,compare:m$,normalize:fi}:{between:Ai,compare:(e,n)=>e-n,normalize:e=>e}}function wT({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function gH(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=IR(r),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function yH(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=IR(r),{start:u,end:d,loop:f,style:p}=gH(t,e,n),y=[];let v=!1,x=null,_,w,T;const I=()=>l(i,T,_)&&a(i,T)!==0,R=()=>a(s,_)===0||l(s,T,_),O=()=>v||I(),k=()=>!v||R();for(let b=u,S=u;b<=d;++b)w=e[b%o],!w.skip&&(_=c(w[r]),_!==T&&(v=l(_,i,s),x===null&&O()&&(x=a(_,i)===0?b:S),x!==null&&k()&&(y.push(wT({start:x,end:b,loop:f,count:o,style:p})),x=null),S=b,T=_));return x!==null&&y.push(wT({start:x,end:d,loop:f,count:o,style:p})),y}function vH(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=yH(r[i],t.points,e);s.length&&n.push(...s)}return n}function _H(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function wH(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function EH(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=_H(n,i,s,r);if(r===!0)return ET(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return ET(t,wH(n,o,l,c),n,e)}function ET(t,e,n,r){return!r||!r.setContext||!n?e:xH(t,e,n,r)}function xH(t,e,n,r){const i=t._chart.getContext(),s=xT(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,f=d;function p(y,v,x,_){const w=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=w;for(;n[v%l].skip;)v+=w;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:x,style:_}),u=_,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],x;for(f=d+1;f<=y.end;f++){const _=n[f%l];x=xT(r.setContext(go(i,{type:"segment",p0:v,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),bH(x,u)&&p(d,f-1,y.loop,u),v=_,u=x}d<f-1&&p(d,f-1,y.loop,u)}return c}function xT(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function bH(t,e){if(!e)return!1;const n=[],r=function(i,s){return B_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class TH{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=mR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Sr=new TH;const bT="transparent",kH={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=dT(t||bT),i=r.valid&&dT(e||bT);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class SH{constructor(e,n,r,i){const s=n[r];i=fh([e.to,i,s,e.from]);const o=fh([e.from,s,i]);this._active=!0,this._fn=e.fn||kH[e.type||typeof o],this._easing=cc[e.easing]||cc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=fh([e.to,n,i,e.from]),this._from=fh([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class CR{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!be(e))return;const n=Object.keys(et.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!be(s))return;const o={};for(const a of n)o[a]=s[a];(ft(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=CH(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&IH(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=d=new SH(f,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Sr.add(this._chart,r),!0}}function IH(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function CH(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function TT(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function AH(t,e,n){if(n===!1)return!1;const r=TT(t,n),i=TT(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function PH(t){let e,n,r,i;return be(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function AR(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function kT(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Vn(c)&&(s||e===0||wr(e)===wr(c))&&(e+=c)}return e}}function RH(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function ST(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function NH(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function MH(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function DH(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function IT(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function CT(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=NH(s,o,r),d=e.length;let f;for(let p=0;p<d;++p){const y=e[p],{[l]:v,[c]:x}=y,_=y._stacks||(y._stacks={});f=_[c]=DH(i,u,v),f[a]=x,f._top=IT(f,o,!0,r.type),f._bottom=IT(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[a]=x}}function Up(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function OH(t,e){return go(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function LH(t,e,n){return go(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function vl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const jp=t=>t==="reset"||t==="none",AT=(t,e)=>e?t:Object.assign({},t),VH=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:AR(n,!0),values:null};class Qs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ST(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,p,y)=>d==="x"?f:d==="r"?y:p,s=n.xAxisID=ge(r.xAxisID,Up(e,"x")),o=n.yAxisID=ge(r.yAxisID,Up(e,"y")),a=n.rAxisID=ge(r.rAxisID,Up(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&cT(this._data,this),e._stacked&&vl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(be(n))this._data=RH(n);else if(r!==n){if(r){cT(r,this);const i=this._cachedMeta;vl(i),i._parsed=[]}n&&Object.isExtensible(n)&&v$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=ST(n.vScale,n),n.stack!==r.stack&&(i=!0,vl(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&CT(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{ft(i[e])?f=this.parseArrayData(r,i,e,n):be(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&CT(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let f,p,y;for(f=0,p=i;f<p;++f)y=f+r,d[f]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],c[u]={x:s.parse(ao(p,a),f),y:o.parse(ao(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:AR(i,!0),values:n._stacks[e.axis]._visualValues};return kT(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=kT(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=VH(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=MH(a);let f,p;function y(){p=i[f];const v=p[a.axis];return!Vn(p[e.axis])||u>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Vn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=PH(ge(this.options.clip,AH(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=LH(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=OH(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Kc(r);if(a)return AT(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(et.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,p,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(AT(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,r,n))}const c=new CR(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||jp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){jp(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!jp(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&vl(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(Qs,"defaults",{}),Z(Qs,"datasetElementType",null),Z(Qs,"dataElementType",null);function FH(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=fR(r.sort((i,s)=>i-s))}return t._cache.$bar}function BH(t){const e=t.iScale,n=FH(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Kc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function UH(t,e,n,r){const i=n.barThickness;let s,o;return Me(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function jH(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function zH(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function PR(t,e,n,r){return ft(t)?zH(t,e,n,r):e[n.axis]=n.parse(t,r),e}function PT(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,f;for(c=n,u=n+r;c<u;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(PR(f,d,s,c));return l}function zp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function $H(t,e,n){return t!==0?wr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function HH(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function WH(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=HH(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[RT(u,o,a,l)]=!0,i=c)),s[RT(i,o,a,l)]=!0,t.borderSkipped=s}function RT(t,e,n,r){return r?(t=KH(t,e,n),t=NT(t,n,e)):t=NT(t,e,n),t}function KH(t,e,n){return t===e?n:t===n?e:t}function NT(t,e,n){return t==="start"?e:t==="end"?n:t}function qH(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ed extends Qs{parsePrimitiveData(e,n,r,i){return PT(e,n,r,i)}parseArrayData(e,n,r,i){return PT(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,p,y,v;for(f=r,p=r+i;f<p;++f)v=n[f],y={},y[s.axis]=s.parse(ao(v,c),f),d.push(PR(ao(v,u),y,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=zp(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let p=n;p<n+r;p++){const y=this.getParsed(p),v=s||Me(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),x=this._calculateBarIndexPixels(p,u),_=(y._stacks||{})[a.axis],w={horizontal:c,base:v.base,enableBorderRadius:!_||zp(y._custom)||o===_._top||o===_._bottom,x:c?v.head:x.center,y:c?x.center:v.head,height:c?x.size:Math.abs(v.size),width:c?Math.abs(v.size):x.size};f&&(w.options=d||this.resolveDataElementOptions(p,e[p].active?"active":i));const T=w.options||e[p].options;WH(w,T,_,o),qH(w,T,u.ratio),this.updateElement(e[p],p,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(Me(u)||isNaN(u))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||BH(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=zp(c);let d=l[n.axis],f=0,p=r?this.applyStack(n,l,r):d,y,v;p!==d&&(f=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&wr(d)!==wr(c.barEnd)&&(f=0),f+=d);const x=!Me(s)&&!u?s:f;let _=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+p):y=_,v=y-_,Math.abs(v)<o){v=$H(v,n,a)*o,d===a&&(_-=v/2);const w=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),I=Math.min(w,T),R=Math.max(w,T);_=Math.max(Math.min(_,R),I),y=_+v,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const w=wr(v)*n.getLineWidthForValue(a)/2;_+=w,v-=w}return{size:v,base:_,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ge(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?jH(e,n,i,c):UH(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Z(ed,"id","bar"),Z(ed,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Z(ed,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function GH(t,e,n){let r=1,i=1,s=0,o=0;if(e<Qe){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(T,I,R)=>Gc(T,a,l,!0)?1:Math.max(I,I*n,R,R*n),y=(T,I,R)=>Gc(T,a,l,!0)?-1:Math.min(I,I*n,R,R*n),v=p(0,c,d),x=p(pt,u,f),_=y(Xe,c,d),w=y(Xe+pt,u,f);r=(v-_)/2,i=(x-w)/2,s=-(v+_)/2,o=-(x+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Ol extends Qs{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(be(r[e])){const{key:l="value"}=this._parsing;s=c=>+ao(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Lr(this.options.rotation-90)}_getCircumference(){return Lr(this.options.circumference)}_getRotationExtents(){let e=Qe,n=-Qe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(n$(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:y,offsetY:v}=GH(d,u,l),x=(r.width-o)/f,_=(r.height-o)/p,w=Math.max(Math.min(x,_)/2,0),T=lR(this.options.radius,w),I=Math.max(T*l,0),R=(T-I)/this._getVisibleDatasetWeightTotal();this.offsetX=y*T,this.offsetY=v*T,i.total=this.calculateTotal(),this.outerRadius=T-R*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-R*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Qe)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,p=f?0:this.innerRadius,y=f?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,i);let _=this._getRotation(),w;for(w=0;w<n;++w)_+=this._circumference(w,s);for(w=n;w<n+r;++w){const T=this._circumference(w,s),I=e[w],R={x:u+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+T,circumference:T,outerRadius:y,innerRadius:p};x&&(R.options=v||this.resolveDataElementOptions(w,I.active?"active":i)),_+=T,this.updateElement(I,w,R,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Qe*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=U_(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ge(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Z(Ol,"id","doughnut"),Z(Ol,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Z(Ol,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Z(Ol,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class td extends Qs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=E$(n,i,o);this._drawStart=a,this._drawCount=l,x$(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:y,segment:v}=this.options,x=qc(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",w=n+r,T=e.length;let I=n>0&&this.getParsed(n-1);for(let R=0;R<T;++R){const O=e[R],k=_?O:{};if(R<n||R>=w){k.skip=!0;continue}const b=this.getParsed(R),S=Me(b[p]),P=k[f]=o.getPixelForValue(b[f],R),N=k[p]=s||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],R);k.skip=isNaN(P)||isNaN(N)||S,k.stop=R>0&&Math.abs(b[f]-I[f])>x,v&&(k.parsed=b,k.raw=c.data[R]),d&&(k.options=u||this.resolveDataElementOptions(R,O.active?"active":i)),_||this.updateElement(O,R,k,i),I=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Z(td,"id","line"),Z(td,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(td,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Qy extends Ol{}Z(Qy,"id","pie"),Z(Qy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Is(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class G_{constructor(e){Z(this,"options");this.options=e||{}}static override(e){Object.assign(G_.prototype,e)}init(){}formats(){return Is()}parse(){return Is()}format(){return Is()}add(){return Is()}diff(){return Is()}startOf(){return Is()}endOf(){return Is()}}var YH={_date:G_};function QH(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?g$:js;if(r){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(s,e,n-u),f=l(s,e,n+u);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function dm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:f}=QH(s[a],e,o,i);for(let p=d;p<=f;++p){const y=u[p];y.skip||r(y,c,p)}}}function XH(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function $p(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||dm(t,n,e,function(a,l,c){!i&&!Yc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function JH(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=hR(o,{x:e.x,y:e.y});Gc(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return dm(t,n,e,s),i}function ZH(t,e,n,r,i,s){let o=[];const a=XH(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:d,index:f}],l=x):x===l&&o.push({element:u,datasetIndex:d,index:f})}return dm(t,n,e,c),o}function Hp(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?JH(t,e,n,i):ZH(t,e,n,r,i,s)}function MT(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return dm(t,n,e,(l,c,u)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var eW={modes:{index(t,e,n,r){const i=Ns(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?$p(t,i,s,r,o):Hp(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?$p(t,i,s,r,o):Hp(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return $p(t,i,s,r,o)},nearest(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Hp(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ns(e,t);return MT(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ns(e,t);return MT(t,i,"y",n.intersect,r)}}};const RR=["left","top","right","bottom"];function _l(t,e){return t.filter(n=>n.pos===e)}function DT(t,e){return t.filter(n=>RR.indexOf(n.pos)===-1&&n.box.axis===e)}function wl(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function tW(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function nW(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!RR.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function rW(t,e){const n=nW(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function iW(t){const e=tW(t),n=wl(e.filter(c=>c.box.fullSize),!0),r=wl(_l(e,"left"),!0),i=wl(_l(e,"right")),s=wl(_l(e,"top"),!0),o=wl(_l(e,"bottom")),a=DT(e,"x"),l=DT(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:_l(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function OT(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function NR(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function sW(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!be(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&NR(o,s.getPadding());const a=Math.max(0,e.outerWidth-OT(o,t,"left","right")),l=Math.max(0,e.outerHeight-OT(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function oW(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function aW(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ll(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,aW(a.horizontal,e));const{same:d,other:f}=sW(e,n,a,r);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&Ll(i,e,n,r)||u}function gh(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function LT(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Kc(c.start)&&(o=c.start),l.fullSize?gh(l,i.left,o,n.outerWidth-i.right-i.left,f):gh(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Kc(c.start)&&(s=c.start),l.fullSize?gh(l,s,i.top,f,n.outerHeight-i.bottom-i.top):gh(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var An={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Fn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=iW(t.boxes),l=a.vertical,c=a.horizontal;Ie(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);NR(f,Fn(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=rW(l.concat(c),d);Ll(a.fullSize,p,d,y),Ll(l,p,d,y),Ll(c,p,d,y)&&Ll(l,p,d,y),oW(p),LT(a.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,LT(a.rightAndBottom,p,d,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ie(a.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class MR{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class lW extends MR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const nd="$chartjs",cW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},VT=t=>t===null||t==="";function uW(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[nd]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",VT(i)){const s=_T(t,"width");s!==void 0&&(t.width=s)}if(VT(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=_T(t,"height");s!==void 0&&(t.height=s)}return t}const DR=hH?{passive:!0}:!1;function hW(t,e,n){t.addEventListener(e,n,DR)}function dW(t,e,n){t.canvas.removeEventListener(e,n,DR)}function fW(t,e){const n=cW[t.type]||t.type,{x:r,y:i}=Ns(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ff(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function mW(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ff(a.addedNodes,r),o=o&&!ff(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function pW(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ff(a.removedNodes,r),o=o&&!ff(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Xc=new Map;let FT=0;function OR(){const t=window.devicePixelRatio;t!==FT&&(FT=t,Xc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function gW(t,e){Xc.size||window.addEventListener("resize",OR),Xc.set(t,e)}function yW(t){Xc.delete(t),Xc.size||window.removeEventListener("resize",OR)}function vW(t,e,n){const r=t.canvas,i=r&&q_(r);if(!i)return;const s=pR((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),gW(t,s),o}function Wp(t,e,n){n&&n.disconnect(),e==="resize"&&yW(t)}function _W(t,e,n){const r=t.canvas,i=pR(s=>{t.ctx!==null&&n(fW(s,t))},t);return hW(r,e,i),i}class wW extends MR{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(uW(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[nd])return!1;const r=n[nd].initial;["height","width"].forEach(s=>{const o=r[s];Me(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[nd],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:mW,detach:pW,resize:vW}[n]||_W;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Wp,detach:Wp,resize:Wp}[n]||dW)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return uH(e,n,r,i)}isAttached(e){const n=q_(e);return!!(n&&n.isConnected)}}function EW(t){return!TR()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?lW:wW}var bh;let ei=(bh=class{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return qc(this.x)&&qc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Z(bh,"defaults",{}),Z(bh,"defaultRoutes"),bh);function xW(t,e){const n=t.options.ticks,r=bW(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?kW(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return SW(e,c,s,o/i),c;const u=TW(s,e,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(yh(e,c,u,Me(p)?0:a-p,a),d=0,f=o-1;d<f;d++)yh(e,c,u,s[d],s[d+1]);return yh(e,c,u,l,Me(p)?e.length:l+p),c}return yh(e,c,u),c}function bW(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function TW(t,e,n){const r=IW(t),i=e.length/n;if(!r)return Math.max(i,1);const s=u$(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function kW(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function SW(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function yh(t,e,n,r,i){const s=ge(r,0),o=Math.min(ge(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function IW(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const CW=t=>t==="left"?"right":t==="right"?"left":t,BT=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,UT=(t,e)=>Math.min(e||t,t);function jT(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function AW(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function PW(t,e){Ie(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function El(t){return t.drawTicks?t.tickLength:0}function zT(t,e){if(!t.display)return 0;const n=zt(t.font,e),r=Fn(t.padding);return(ft(t.text)?t.text.length:1)*n.lineHeight+r.height}function RW(t,e){return go(t,{scale:e,type:"scale"})}function NW(t,e,n){return go(t,{tick:n,index:e,type:"tick"})}function MW(t,e,n){let r=F_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=CW(r)),r}function DW(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,y;const v=o-i,x=a-s;if(t.isHorizontal()){if(p=Lt(r,s,a),be(n)){const _=Object.keys(n)[0],w=n[_];y=u[_].getPixelForValue(w)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=BT(t,n,e);f=a-s}else{if(be(n)){const _=Object.keys(n)[0],w=n[_];p=u[_].getPixelForValue(w)-x+e}else n==="center"?p=(c.left+c.right)/2-x+e:p=BT(t,n,e);y=Lt(r,o,i),d=n==="left"?-pt:pt}return{titleX:p,titleY:y,maxWidth:f,rotation:d}}class Ha extends ei{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=sr(e,Number.POSITIVE_INFINITY),n=sr(n,Number.NEGATIVE_INFINITY),r=sr(r,Number.POSITIVE_INFINITY),i=sr(i,Number.NEGATIVE_INFINITY),{min:sr(e,r),max:sr(n,i),minDefined:Vn(e),maxDefined:Vn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:sr(n,sr(r,n)),max:sr(r,sr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=z$(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?jT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=xW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Le(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=UT(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=jt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-El(e.grid)-n.padding-zT(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=f$(Math.min(Math.asin(jt((u.highest.height+6)/a,-1,1)),Math.asin(jt(l/c,-1,1))-Math.asin(jt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=zT(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=El(s)+l):(e.height=this.maxHeight,e.width=El(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=r.padding*2,y=Lr(this.labelRotation),v=Math.cos(y),x=Math.sin(y);if(a){const _=r.mirror?0:x*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+_+p)}else{const _=r.mirror?0:v*d.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,u,x,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=r*n.height):(f=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Me(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=jT(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/UT(n,r));let c=0,u=0,d,f,p,y,v,x,_,w,T,I,R;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=x=v.string,_=s[x]=s[x]||{data:{},gc:[]},w=v.lineHeight,T=I=0,!Me(y)&&!ft(y))T=mT(i,_.data,_.gc,T,y),I=w;else if(ft(y))for(f=0,p=y.length;f<p;++f)R=y[f],!Me(R)&&!ft(R)&&(T=mT(i,_.data,_.gc,T,R),I+=w);o.push(T),a.push(I),c=Math.max(T,c),u=Math.max(I,u)}PW(s,n);const O=o.indexOf(c),k=a.indexOf(u),b=S=>({width:o[S]||0,height:a[S]||0});return{first:b(0),last:b(n-1),widest:b(O),highest:b(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return p$(this._alignToPixels?Ss(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=NW(this.getContext(),e,r))}return this.$context||(this.$context=RW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Lr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=El(s),p=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,x=v/2,_=function(ce){return Ss(r,ce,v)};let w,T,I,R,O,k,b,S,P,N,D,M;if(o==="top")w=_(this.bottom),k=this.bottom-f,S=w-x,N=_(e.top)+x,M=e.bottom;else if(o==="bottom")w=_(this.top),N=e.top,M=_(e.bottom)-x,k=w+x,S=this.top+f;else if(o==="left")w=_(this.right),O=this.right-f,b=w-x,P=_(e.left)+x,D=e.right;else if(o==="right")w=_(this.left),P=e.left,D=_(e.right)-x,O=w+x,b=this.left+f;else if(n==="x"){if(o==="center")w=_((e.top+e.bottom)/2+.5);else if(be(o)){const ce=Object.keys(o)[0],j=o[ce];w=_(this.chart.scales[ce].getPixelForValue(j))}N=e.top,M=e.bottom,k=w+x,S=k+f}else if(n==="y"){if(o==="center")w=_((e.left+e.right)/2);else if(be(o)){const ce=Object.keys(o)[0],j=o[ce];w=_(this.chart.scales[ce].getPixelForValue(j))}O=w-x,b=O-f,P=e.left,D=e.right}const ie=ge(i.ticks.maxTicksLimit,d),ee=Math.max(1,Math.ceil(d/ie));for(T=0;T<d;T+=ee){const ce=this.getContext(T),j=s.setContext(ce),V=a.setContext(ce),W=j.lineWidth,G=j.color,te=V.dash||[],H=V.dashOffset,se=j.tickWidth,de=j.tickColor,Te=j.tickBorderDash||[],fe=j.tickBorderDashOffset;I=AW(this,T,l),I!==void 0&&(R=Ss(r,I,W),c?O=b=P=D=R:k=S=N=M=R,p.push({tx1:O,ty1:k,tx2:b,ty2:S,x1:P,y1:N,x2:D,y2:M,width:W,color:G,borderDash:te,borderDashOffset:H,tickWidth:se,tickColor:de,tickBorderDash:Te,tickBorderDashOffset:fe}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,f=El(r.grid),p=f+u,y=d?-u:p,v=-Lr(this.labelRotation),x=[];let _,w,T,I,R,O,k,b,S,P,N,D,M="middle";if(i==="top")O=this.bottom-y,k=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+y,k=this._getXAxisLabelAlignment();else if(i==="left"){const ee=this._getYAxisLabelAlignment(f);k=ee.textAlign,R=ee.x}else if(i==="right"){const ee=this._getYAxisLabelAlignment(f);k=ee.textAlign,R=ee.x}else if(n==="x"){if(i==="center")O=(e.top+e.bottom)/2+p;else if(be(i)){const ee=Object.keys(i)[0],ce=i[ee];O=this.chart.scales[ee].getPixelForValue(ce)+p}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")R=(e.left+e.right)/2-p;else if(be(i)){const ee=Object.keys(i)[0],ce=i[ee];R=this.chart.scales[ee].getPixelForValue(ce)}k=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?M="top":l==="end"&&(M="bottom"));const ie=this._getLabelSizes();for(_=0,w=a.length;_<w;++_){T=a[_],I=T.label;const ee=s.setContext(this.getContext(_));b=this.getPixelForTick(_)+s.labelOffset,S=this._resolveTickFontOptions(_),P=S.lineHeight,N=ft(I)?I.length:1;const ce=N/2,j=ee.color,V=ee.textStrokeColor,W=ee.textStrokeWidth;let G=k;o?(R=b,k==="inner"&&(_===w-1?G=this.options.reverse?"left":"right":_===0?G=this.options.reverse?"right":"left":G="center"),i==="top"?c==="near"||v!==0?D=-N*P+P/2:c==="center"?D=-ie.highest.height/2-ce*P+P:D=-ie.highest.height+P/2:c==="near"||v!==0?D=P/2:c==="center"?D=ie.highest.height/2-ce*P:D=ie.highest.height-N*P,d&&(D*=-1),v!==0&&!ee.showLabelBackdrop&&(R+=P/2*Math.sin(v))):(O=b,D=(1-N)*P/2);let te;if(ee.showLabelBackdrop){const H=Fn(ee.backdropPadding),se=ie.heights[_],de=ie.widths[_];let Te=D-H.top,fe=0-H.left;switch(M){case"middle":Te-=se/2;break;case"bottom":Te-=se;break}switch(k){case"center":fe-=de/2;break;case"right":fe-=de;break}te={left:fe,top:Te,width:de+H.width,height:se+H.height,color:ee.backdropColor}}x.push({label:I,font:S,textOffset:D,options:{rotation:v,color:j,strokeColor:V,strokeWidth:W,textAlign:G,textBaseline:M,translation:[R,O],backdrop:te}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Lr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Ss(e,this.left,o)-o/2,u=Ss(e,this.right,a)+a/2,d=f=l):(d=Ss(e,this.top,o)-o/2,f=Ss(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&j_(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Qc(r,c,0,u,l,a)}i&&z_(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=zt(r.font),o=Fn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||be(n)?(l+=o.bottom,ft(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=DW(this,l,n,a);Qc(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:MW(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ge(e.grid&&e.grid.z,-1),i=ge(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ha.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return zt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vh{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;VW(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,OW(e,o,r),this.override&&et.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in et[i]&&(delete et[i][r],this.override&&delete lo[r])}}function OW(t,e,n){const r=Wc(Object.create(null),[n?et.get(n):{},et.get(e),t.defaults]);et.set(e,r),t.defaultRoutes&&LW(e,t.defaultRoutes),t.descriptors&&et.describe(e,t.descriptors)}function LW(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");et.route(s,i,l,a)})}function VW(t){return"id"in t&&"defaults"in t}class FW{constructor(){this.controllers=new vh(Qs,"datasets",!0),this.elements=new vh(ei,"elements"),this.plugins=new vh(Object,"plugins"),this.scales=new vh(Ha,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ie(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=L_(e);Le(r["before"+i],[],r),n[e](r),Le(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var lr=new FW;class BW{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Le(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ge(r.options&&r.options.plugins,{}),s=UW(r);return i===!1&&!n?[]:zW(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function UW(t){const e={},n=[],r=Object.keys(lr.plugins.items);for(let s=0;s<r.length;s++)n.push(lr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function jW(t,e){return!e&&t===!1?null:t===!0?{}:t}function zW(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=jW(r[l],i);c!==null&&s.push({plugin:a,options:$W(t.config,{plugin:a,local:n[l]},c,o)})}return s}function $W(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xy(t,e){const n=et.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function HW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function WW(t,e){return t===e?"_index_":"_value_"}function $T(t){if(t==="x"||t==="y"||t==="r")return t}function KW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Jy(t,...e){if($T(t))return t;for(const n of e){const r=n.axis||KW(n.position)||t.length>1&&$T(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function HT(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function qW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return HT(t,"x",n[0])||HT(t,"y",n[0])}return{}}function GW(t,e){const n=lo[t.type]||{scales:{}},r=e.scales||{},i=Xy(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!be(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Jy(o,a,qW(o,t),et.scales[a.type]),c=WW(l,i),u=n.scales||{};s[o]=ac(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Xy(a,e),u=(lo[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=HW(d,l),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),ac(s[p],[{axis:f},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ac(a,[et.scales[a.type],et.scale])}),s}function LR(t){const e=t.options||(t.options={});e.plugins=ge(e.plugins,{}),e.scales=GW(t,e)}function VR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function YW(t){return t=t||{},t.data=VR(t.data),LR(t),t}const WT=new Map,FR=new Set;function _h(t,e){let n=WT.get(t);return n||(n=e(),WT.set(t,n),FR.add(n)),n}const xl=(t,e,n)=>{const r=ao(e,n);r!==void 0&&t.add(r)};class QW{constructor(e){this._config=YW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=VR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),LR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _h(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _h(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _h(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return _h(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>xl(l,e,d))),u.forEach(d=>xl(l,i,d)),u.forEach(d=>xl(l,lo[s]||{},d)),u.forEach(d=>xl(l,et,d)),u.forEach(d=>xl(l,Gy,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),FR.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,lo[n]||{},et.datasets[n]||{},{type:n},et,Gy]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=KT(this._resolverCache,e,i);let l=o;if(JW(o,n)){s.$shared=!1,r=is(r)?r():r;const c=this.createResolver(e,r,a);l=Ta(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=KT(this._resolverCache,e,r);return be(n)?Ta(s,n,void 0,i):s}}function KT(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:H_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const XW=t=>be(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||is(t[n]),!1);function JW(t,e){const{isScriptable:n,isIndexable:r}=_R(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(is(a)||XW(a))||o&&ft(a))return!0}return!1}var ZW="4.4.0";const eK=["top","bottom","left","right","chartArea"];function qT(t,e){return t==="top"||t==="bottom"||eK.indexOf(t)===-1&&e==="x"}function GT(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function YT(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Le(n&&n.onComplete,[t],e)}function tK(t){const e=t.chart,n=e.options.animation;Le(n&&n.onProgress,[t],e)}function BR(t){return TR()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rd={},QT=t=>{const e=BR(t);return Object.values(rd).filter(n=>n.canvas===e).pop()};function nK(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function rK(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function wh(t,e,n){return t.options.clip?t[n]:e[n]}function iK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:wh(n,e,"left"),right:wh(n,e,"right"),top:wh(r,e,"top"),bottom:wh(r,e,"bottom")}:e}var hi;let fm=(hi=class{static register(...e){lr.add(...e),XT()}static unregister(...e){lr.remove(...e),XT()}constructor(e,n){const r=this.config=new QW(n),i=BR(e),s=QT(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||EW(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=t$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new BW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_$(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],rd[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Sr.listen(this,"complete",YT),Sr.listen(this,"progress",tK),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Me(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pT(this.canvas,this.ctx),this}stop(){return Sr.stop(this),this}resize(e,n){Sr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vT(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Le(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ie(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Jy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ie(s,o=>{const a=o.options,l=a.id,c=Jy(l,a),u=ge(a.type,o.dtype);(a.position===void 0||qT(a.position,c)!==qT(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const f=lr.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ie(i,(o,a)=>{o||delete r[a]}),Ie(r,o=>{An.configure(this,o,o.options),An.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(GT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Xy(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=lr.getController(a),{datasetElementType:c,dataElementType:u}=et.datasets[a];Object.assign(l,{dataElementType:lr.getElement(u),datasetElementType:c&&lr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ie(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ie(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(GT("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ie(this.scales,e=>{An.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!sT(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;nK(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!sT(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;An.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ie(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,is(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Sr.has(this)?this.attached&&!Sr.running(this)&&Sr.start(this):(this.draw(),YT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=iK(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&j_(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&z_(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Yc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=eW.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=go(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Kc(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Sr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),pT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete rd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ie(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ie(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ie(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!lf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=a$(e),c=rK(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Le(s.onHover,[e,a,this],this),l&&Le(s.onClick,[e,a,this],this));const u=!lf(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},Z(hi,"defaults",et),Z(hi,"instances",rd),Z(hi,"overrides",lo),Z(hi,"registry",lr),Z(hi,"version",ZW),Z(hi,"getChart",QT),hi);function XT(){return Ie(fm.instances,t=>t._plugins.invalidate())}function sK(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+pt,r-pt),t.closePath(),t.clip()}function oK(t){return $_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function aK(t,e,n,r){const i=oK(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return jt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:jt(i.innerStart,0,o),innerEnd:jt(i.innerEnd,0,o)}}function bo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function mf(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let p=0;const y=i-l;if(r){const ee=u>0?u-r:0,ce=d>0?d-r:0,j=(ee+ce)/2,V=j!==0?y*j/(j+r):y;p=(y-V)/2}const v=Math.max(.001,y*d-n/Xe)/d,x=(y-v)/2,_=l+x+p,w=i-x-p,{outerStart:T,outerEnd:I,innerStart:R,innerEnd:O}=aK(e,f,d,w-_),k=d-T,b=d-I,S=_+T/k,P=w-I/b,N=f+R,D=f+O,M=_+R/N,ie=w-O/D;if(t.beginPath(),s){const ee=(S+P)/2;if(t.arc(o,a,d,S,ee),t.arc(o,a,d,ee,P),I>0){const W=bo(b,P,o,a);t.arc(W.x,W.y,I,P,w+pt)}const ce=bo(D,w,o,a);if(t.lineTo(ce.x,ce.y),O>0){const W=bo(D,ie,o,a);t.arc(W.x,W.y,O,w+pt,ie+Math.PI)}const j=(w-O/f+(_+R/f))/2;if(t.arc(o,a,f,w-O/f,j,!0),t.arc(o,a,f,j,_+R/f,!0),R>0){const W=bo(N,M,o,a);t.arc(W.x,W.y,R,M+Math.PI,_-pt)}const V=bo(k,_,o,a);if(t.lineTo(V.x,V.y),T>0){const W=bo(k,S,o,a);t.arc(W.x,W.y,T,_-pt,S)}}else{t.moveTo(o,a);const ee=Math.cos(S)*d+o,ce=Math.sin(S)*d+a;t.lineTo(ee,ce);const j=Math.cos(P)*d+o,V=Math.sin(P)*d+a;t.lineTo(j,V)}t.closePath()}function lK(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){mf(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Qe||Qe))}return mf(t,e,n,r,l,i),t.fill(),l}function cK(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let y=e.endAngle;if(s){mf(t,e,n,r,y,i);for(let v=0;v<s;++v)t.stroke();isNaN(a)||(y=o+(a%Qe||Qe))}p&&sK(t,e,y),s||(mf(t,e,n,r,y,i),t.stroke())}class Vl extends ei{constructor(n){super();Z(this,"circumference");Z(this,"endAngle");Z(this,"fullCircles");Z(this,"innerRadius");Z(this,"outerRadius");Z(this,"pixelMargin");Z(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=hR(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,v=ge(f,c-l)>=Qe||Gc(o,l,c),x=Ai(a,u+p,d+p);return v&&x}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Qe?Math.floor(i/Qe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Xe,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,lK(n,this,u,o,a),cK(n,this,u,o,a),n.restore()}}Z(Vl,"id","arc"),Z(Vl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Z(Vl,"defaultRoutes",{backgroundColor:"backgroundColor"}),Z(Vl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function UR(t,e,n=e){t.lineCap=ge(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ge(n.borderDash,e.borderDash)),t.lineDashOffset=ge(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ge(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ge(n.borderWidth,e.borderWidth),t.strokeStyle=ge(n.borderColor,e.borderColor)}function uK(t,e,n){t.lineTo(n.x,n.y)}function hK(t){return t.stepped?M$:t.tension||t.cubicInterpolationMode==="monotone"?D$:uK}function jR(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function dK(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=jR(i,n,r),u=hK(s);let{move:d=!0,reverse:f}=r||{},p,y,v;for(p=0;p<=c;++p)y=i[(a+(f?c-p:p))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):u(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?c:0))%o],u(t,v,y,f,s.stepped)),!!l}function fK(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=jR(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,f,p,y,v,x,_;const w=I=>(o+(c?a-I:I))%s,T=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,_))};for(l&&(p=i[w(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[w(f)],p.skip)continue;const I=p.x,R=p.y,O=I|0;O===y?(R<v?v=R:R>x&&(x=R),u=(d*u+I)/++d):(T(),t.lineTo(I,R),y=O,d=0,v=x=R),_=R}T()}function Zy(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?fK:dK}function mK(t){return t.stepped?dH:t.tension||t.cubicInterpolationMode==="monotone"?fH:Ms}function pK(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),UR(t,e.options),t.stroke(i)}function gK(t,e,n,r){const{segments:i,options:s}=e,o=Zy(e);for(const a of i)UR(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const yK=typeof Path2D=="function";function vK(t,e,n,r){yK&&!e.options.segment?pK(t,e,n,r):gK(t,e,n,r)}class Fl extends ei{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;iH(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=EH(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=vH(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=mK(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=s[d],y=s[f];if(p===y){a.push(p);continue}const v=Math.abs((i-p[n])/(y[n]-p[n])),x=l(p,y,v,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Zy(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Zy(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),vK(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(Fl,"id","line"),Z(Fl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(Fl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(Fl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function JT(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class id extends ei{constructor(n){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return JT(this,n,"x",r)}inYRange(n,r){return JT(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Yc(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Yy(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Z(id,"id","point"),Z(id,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(id,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function zR(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Pi(t,e,n,r){return t?0:jt(e,n,r)}function _K(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=vR(r);return{t:Pi(i.top,s.top,0,n),r:Pi(i.right,s.right,0,e),b:Pi(i.bottom,s.bottom,0,n),l:Pi(i.left,s.left,0,e)}}function wK(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=ia(i),o=Math.min(e,n),a=t.borderSkipped,l=r||be(i);return{topLeft:Pi(!l||a.top||a.left,s.topLeft,0,o),topRight:Pi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Pi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Pi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function EK(t){const e=zR(t),n=e.right-e.left,r=e.bottom-e.top,i=_K(t,n/2,r/2),s=wK(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Kp(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&zR(t,r);return a&&(i||Ai(e,a.left,a.right))&&(s||Ai(n,a.top,a.bottom))}function xK(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function bK(t,e){t.rect(e.x,e.y,e.w,e.h)}function qp(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class sd extends ei{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=EK(this),a=xK(o.radius)?hf:bK;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,qp(o,n,s)),e.clip(),a(e,qp(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,qp(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Kp(this,e,n,r)}inXRange(e,n){return Kp(this,e,null,n)}inYRange(e,n){return Kp(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Z(sd,"id","bar"),Z(sd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Z(sd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ZT=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},TK=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ek extends ei{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=zt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ZT(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((y,v)=>{const x=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+x+2*a>o)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,f++),l[v]={left:0,top:p,row:f,width:x,height:i},c[c.length-1]+=x+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,y=0,v=0;return this.legendItems.forEach((x,_)=>{const{itemWidth:w,itemHeight:T}=kK(r,n,s,x,i);_>0&&p+T+2*a>u&&(d+=f+a,c.push({width:f,height:p}),y+=f+a,v++,f=p=0),l[_]={left:y,top:p,col:v,width:w,height:T},f=Math.max(f,w),p+=T+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=sa(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;j_(e,this),this._draw(),z_(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=et.color,l=sa(e.rtl,this.left,this.width),c=zt(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:x}=ZT(o,d),_=function(O,k,b){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const S=ge(b.lineWidth,1);if(i.fillStyle=ge(b.fillStyle,a),i.lineCap=ge(b.lineCap,"butt"),i.lineDashOffset=ge(b.lineDashOffset,0),i.lineJoin=ge(b.lineJoin,"miter"),i.lineWidth=S,i.strokeStyle=ge(b.strokeStyle,a),i.setLineDash(ge(b.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:S},N=l.xPlus(O,y/2),D=k+f;yR(i,P,N,D,o.pointStyleWidth&&y)}else{const P=k+Math.max((d-v)/2,0),N=l.leftForLtr(O,y),D=ia(b.borderRadius);i.beginPath(),Object.values(D).some(M=>M!==0)?hf(i,{x:N,y:P,w:y,h:v,radius:D}):i.rect(N,P,y,v),i.fill(),S!==0&&i.stroke()}i.restore()},w=function(O,k,b){Qc(i,b.text,O,k+x/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},T=this.isHorizontal(),I=this._computeTitleHeight();T?p={x:Lt(s,this.left+u,this.right-r[0]),y:this.top+u+I,line:0}:p={x:this.left+u,y:Lt(s,this.top+I+u,this.bottom-n[0].height),line:0},kR(this.ctx,e.textDirection);const R=x+u;this.legendItems.forEach((O,k)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const b=i.measureText(O.text).width,S=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),P=y+f+b;let N=p.x,D=p.y;l.setWidth(this.width),T?k>0&&N+P+u>this.right&&(D=p.y+=R,p.line++,N=p.x=Lt(s,this.left+u,this.right-r[p.line])):k>0&&D+R>this.bottom&&(N=p.x=N+n[p.line].width+u,p.line++,D=p.y=Lt(s,this.top+I+u,this.bottom-n[p.line].height));const M=l.x(N);if(_(M,D,O),N=w$(S,N+y+f,T?N+P:this.right,e.rtl),w(l.x(N),D,O),T)p.x+=P+u;else if(typeof O.text!="string"){const ie=c.lineHeight;p.y+=$R(O,ie)+u}else p.y+=R}),SR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=zt(n.font),i=Fn(n.padding);if(!n.display)return;const s=sa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Lt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=c+Lt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Lt(a,d,d+f);o.textAlign=s.textAlign(F_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Qc(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=zt(e.font),r=Fn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ai(e,this.left,this.right)&&Ai(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ai(e,i.left,i.left+i.width)&&Ai(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!CK(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=TK(i,r);i&&!s&&Le(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Le(n.onHover,[e,r,this],this)}else r&&Le(n.onClick,[e,r,this],this)}}function kK(t,e,n,r,i){const s=SK(r,t,e,n),o=IK(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function SK(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function IK(t,e,n){let r=t;return typeof e.text!="string"&&(r=$R(e,n)),r}function $R(t,e){const n=t.text?t.text.length:0;return e*n}function CK(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var AK={id:"legend",_element:ek,start(t,e,n){const r=t.legend=new ek({ctx:t.ctx,options:n,chart:t});An.configure(t,r,n),An.addBox(t,r)},stop(t){An.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;An.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Fn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class HR extends ei{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ft(r.text)?r.text.length:1;this._padding=Fn(r.padding);const s=i*zt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Lt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Lt(a,i,n),l=Xe*-.5):(u=s-e,d=Lt(a,n,i),l=Xe*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=zt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Qc(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:F_(n.align),textBaseline:"middle",translation:[o,a]})}}function PK(t,e){const n=new HR({ctx:t.ctx,options:e,chart:t});An.configure(t,n,e),An.addBox(t,n),t.titleBlock=n}var RK={id:"title",_element:HR,start(t,e,n){PK(t,n)},stop(t){const e=t.titleBlock;An.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;An.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bl={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=qy(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function or(t,e){return e&&(ft(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ir(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function NK(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function tk(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=zt(e.bodyFont),c=zt(e.titleFont),u=zt(e.footerFont),d=s.length,f=i.length,p=r.length,y=Fn(e.padding);let v=y.height,x=0,_=r.reduce((I,R)=>I+R.before.length+R.lines.length+R.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*I+(_-p)*l.lineHeight+(_-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let w=0;const T=function(I){x=Math.max(x,n.measureText(I).width+w)};return n.save(),n.font=c.string,Ie(t.title,T),n.font=l.string,Ie(t.beforeBody.concat(t.afterBody),T),w=e.displayColors?o+2+e.boxPadding:0,Ie(r,I=>{Ie(I.before,T),Ie(I.lines,T),Ie(I.after,T)}),w=0,n.font=u.string,Ie(t.footer,T),n.restore(),x+=y.width,{width:x,height:v}}function MK(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function DK(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function OK(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),DK(c,t,e,n)&&(c="center"),c}function nk(t,e,n){const r=n.yAlign||e.yAlign||MK(t,n);return{xAlign:n.xAlign||e.xAlign||OK(t,e,n,r),yAlign:r}}function LK(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function VK(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function rk(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=ia(o);let y=LK(e,a);const v=VK(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,f)+i:a==="right"&&(y+=Math.max(d,p)+i),{x:jt(y,0,r.width-e.width),y:jt(v,0,r.height-e.height)}}function Eh(t,e,n){const r=Fn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function ik(t){return or([],Ir(t))}function FK(t,e,n){return go(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sk(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const WR={beforeTitle:kr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:kr,beforeBody:kr,beforeLabel:kr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Me(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:kr,afterBody:kr,beforeFooter:kr,footer:kr,afterFooter:kr};function Jt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?WR[e].call(n,r):i}class e0 extends ei{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new CR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=FK(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Jt(r,"beforeTitle",this,e),s=Jt(r,"title",this,e),o=Jt(r,"afterTitle",this,e);let a=[];return a=or(a,Ir(i)),a=or(a,Ir(s)),a=or(a,Ir(o)),a}getBeforeBody(e,n){return ik(Jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ie(e,s=>{const o={before:[],lines:[],after:[]},a=sk(r,s);or(o.before,Ir(Jt(a,"beforeLabel",this,s))),or(o.lines,Jt(a,"label",this,s)),or(o.after,Ir(Jt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return ik(Jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Jt(r,"beforeFooter",this,e),s=Jt(r,"footer",this,e),o=Jt(r,"afterFooter",this,e);let a=[];return a=or(a,Ir(i)),a=or(a,Ir(s)),a=or(a,Ir(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(NK(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Ie(a,u=>{const d=sk(e.callbacks,u);i.push(Jt(d,"labelColor",this,u)),s.push(Jt(d,"labelPointStyle",this,u)),o.push(Jt(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Bl[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=tk(this,r),c=Object.assign({},a,l),u=nk(this.chart,r,c),d=rk(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=ia(a),{x:f,y:p}=e,{width:y,height:v}=n;let x,_,w,T,I,R;return s==="center"?(I=p+v/2,i==="left"?(x=f,_=x-o,T=I+o,R=I-o):(x=f+y,_=x+o,T=I-o,R=I+o),w=x):(i==="left"?_=f+Math.max(l,u)+o:i==="right"?_=f+y-Math.max(c,d)-o:_=this.caretX,s==="top"?(T=p,I=T-o,x=_-o,w=_+o):(T=p+v,I=T+o,x=_+o,w=_-o),R=T),{x1:x,x2:_,x3:w,y1:T,y2:I,y3:R}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=sa(r.rtl,this.x,this.width);for(e.x=Eh(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=zt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=zt(s.bodyFont),d=Eh(this,"left",s),f=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(f,c)+c/2,_=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Yy(e,v,x,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Yy(e,v,x,_)}else{e.lineWidth=be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),x=i.leftForLtr(i.xPlus(f,1),c-2),_=ia(o.borderRadius);Object.values(_).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,hf(e,{x:v,y,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),hf(e,{x,y:y+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=zt(r.bodyFont);let f=d.lineHeight,p=0;const y=sa(r.rtl,this.x,this.width),v=function(b){n.fillText(b,y.x(e.x+p),e.y+f/2),e.y+=f+s},x=y.textAlign(o);let _,w,T,I,R,O,k;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Eh(this,x,r),n.fillStyle=r.bodyColor,Ie(this.beforeBody,v),p=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,I=0,O=i.length;I<O;++I){for(_=i[I],w=this.labelTextColors[I],n.fillStyle=w,Ie(_.before,v),T=_.lines,a&&T.length&&(this._drawColorBox(n,e,I,y,r),f=Math.max(d.lineHeight,l)),R=0,k=T.length;R<k;++R)v(T[R]),f=d.lineHeight;Ie(_.after,v)}p=0,f=d.lineHeight,Ie(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=sa(r.rtl,this.x,this.width);for(e.x=Eh(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=zt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:y}=ia(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Bl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=tk(this,e),l=Object.assign({},o,this._size),c=nk(n,e,l),u=rk(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Fn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),kR(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),SR(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!lf(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!lf(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Bl[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Z(e0,"positioners",Bl);var BK={id:"tooltip",_element:e0,positioners:Bl,afterInit(t,e,n){n&&(t.tooltip=new e0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:WR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const UK=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function jK(t,e,n,r){const i=t.indexOf(e);if(i===-1)return UK(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const zK=(t,e)=>t===null?null:jt(Math.round(t),0,e);function ok(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class t0 extends Ha{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Me(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:jK(r,e,ge(n,e),this._addedLabels),zK(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return ok.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Z(t0,"id","category"),Z(t0,"defaults",{ticks:{callback:ok}});function $K(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=s||1,y=u-1,{min:v,max:x}=e,_=!Me(o),w=!Me(a),T=!Me(c),I=(x-v)/(d+1);let R=aT((x-v)/y/p)*p,O,k,b,S;if(R<1e-14&&!_&&!w)return[{value:v},{value:x}];S=Math.ceil(x/R)-Math.floor(v/R),S>y&&(R=aT(S*R/y/p)*p),Me(l)||(O=Math.pow(10,l),R=Math.ceil(R*O)/O),i==="ticks"?(k=Math.floor(v/R)*R,b=Math.ceil(x/R)*R):(k=v,b=x),_&&w&&s&&h$((a-o)/s,R/1e3)?(S=Math.round(Math.min((a-o)/R,u)),R=(a-o)/S,k=o,b=a):T?(k=_?o:k,b=w?a:b,S=c-1,R=(b-k)/S):(S=(b-k)/R,lc(S,Math.round(S),R/1e3)?S=Math.round(S):S=Math.ceil(S));const P=Math.max(lT(R),lT(k));O=Math.pow(10,Me(l)?P:l),k=Math.round(k*O)/O,b=Math.round(b*O)/O;let N=0;for(_&&(f&&k!==o?(n.push({value:o}),k<o&&N++,lc(Math.round((k+N*R)*O)/O,o,ak(o,I,t))&&N++):k<o&&N++);N<S;++N){const D=Math.round((k+N*R)*O)/O;if(w&&D>a)break;n.push({value:D})}return w&&f&&b!==a?n.length&&lc(n[n.length-1].value,a,ak(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!w||b===a)&&n.push({value:b}),n}function ak(t,e,{horizontal:n,minRotation:r}){const i=Lr(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class HK extends Ha{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=wr(i),c=wr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=$K(i,s);return e.bounds==="ticks"&&d$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return U_(e,this.chart.options.locale,this.options.ticks.format)}}class n0 extends HK{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Vn(e)?e:0,this.max=Vn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Lr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Z(n0,"id","linear"),Z(n0,"defaults",{ticks:{callback:gR.formatters.numeric}});const mm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nn=Object.keys(mm);function lk(t,e){return t-e}function ck(t,e){if(Me(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Vn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(qc(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function uk(t,e,n,r){const i=nn.length;for(let s=nn.indexOf(t);s<i-1;++s){const o=mm[nn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return nn[s]}return nn[i-1]}function WK(t,e,n,r,i){for(let s=nn.length-1;s>=nn.indexOf(n);s--){const o=nn[s];if(mm[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return nn[n?nn.indexOf(n):0]}function KK(t){for(let e=nn.indexOf(t)+1,n=nn.length;e<n;++e)if(mm[nn[e]].common)return nn[e]}function hk(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=V_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function qK(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function dk(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:qK(t,r,i,n)}class pf extends Ha{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new YH._date(e.adapters.date);i.init(n),ac(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:ck(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Vn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Vn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=y$(i,s,o);return this._unit=n.unit||(r.autoSkip?uk(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):WK(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:KK(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),dk(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=jt(n,0,o),r=jt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||uk(s.minUnit,n,r,this._getLabelCapacity(n)),a=ge(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=qc(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<r;f=+e.add(f,a,o),p++)hk(u,f,y);return(f===r||i.bounds==="ticks"||p===1)&&hk(u,f,y),Object.keys(u).sort(lk).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Le(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=r[n],p=c&&d&&f&&f.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Lr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,dk(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(ck(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return fR(e.sort(lk))}}Z(pf,"id","time"),Z(pf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xh(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=js(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=js(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class fk extends pf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xh(n,this.min),this._tableRange=xh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return xh(this._table,r*this._tableRange+this._minPos,!0)}}Z(fk,"id","timeseries"),Z(fk,"defaults",pf.defaults);const KR="label";function mk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GK(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function qR(t,e){t.labels=e}function GR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:KR;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function YK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KR;const n={labels:[],datasets:[]};return qR(n,t.labels),GR(n,t.datasets,e),n}function QK(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=C.useRef(null),y=C.useRef(),v=()=>{p.current&&(y.current=new fm(p.current,{type:o,data:YK(a,s),options:l&&{...l},plugins:c}),mk(e,y.current))},x=()=>{mk(e,null),y.current&&(y.current.destroy(),y.current=null)};return C.useEffect(()=>{!i&&y.current&&l&&GK(y.current,l)},[i,l]),C.useEffect(()=>{!i&&y.current&&qR(y.current.config.data,a.labels)},[i,a.labels]),C.useEffect(()=>{!i&&y.current&&a.datasets&&GR(y.current.config.data,a.datasets,s)},[i,a.datasets]),C.useEffect(()=>{y.current&&(i?(x(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),C.useEffect(()=>{y.current&&(x(),setTimeout(v))},[o]),C.useEffect(()=>(v(),()=>x()),[]),m.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:r},f),u)}const XK=C.forwardRef(QK);function Y_(t,e){return fm.register(e),C.forwardRef((n,r)=>m.createElement(XK,Object.assign({},n,{ref:r,type:t})))}const JK=Y_("line",td),ZK=Y_("bar",ed),eq=Y_("pie",Qy);fm.register(t0,n0,id,Fl,sd,Vl,RK,BK,AK);function tq(){var v;const{progress:t,loading:e}=po(),{data:n=[],loading:r}=Mn("tasks"),{loading:i}=Mn("habits"),{data:s=[],loading:o}=Mn("sessions"),a=e||r||i||o,{labels:l,studyMinutes:c,tasksCompleted:u}=C.useMemo(()=>{const x=new Date,_=[],w=[],T=[];for(let I=6;I>=0;I--){const R=new Date(x);R.setDate(x.getDate()-I);const O=R.toISOString().split("T")[0];_.push(R.toLocaleDateString(void 0,{weekday:"short"}));const k=s.filter(S=>{const P=S.completedAt||S.createdAt;return P?new Date(P).toISOString().startsWith(O):!1}).reduce((S,P)=>S+(P.durationMinutes||0),0),b=n.filter(S=>!S.completedAt||!S.done?!1:new Date(S.completedAt).toISOString().startsWith(O)).length;w.push(k),T.push(b)}return{labels:_,studyMinutes:w,tasksCompleted:T}},[s,n]),d={labels:l,datasets:[{label:"Study minutes",data:c,borderColor:"#0ea5e9",backgroundColor:"rgba(14, 165, 233, 0.15)",tension:.35,fill:!0}]},f={labels:["Badges","Longest streak","Points"],datasets:[{data:[((v=t==null?void 0:t.badges)==null?void 0:v.length)||0,t!=null&&t.streaks&&Object.keys(t.streaks).length>0?Math.max(...Object.values(t.streaks)):0,(t==null?void 0:t.points)||0],backgroundColor:["#0ea5e9","#f59e0b","#06b6d4"]}]},p={labels:["Completed","Pending"],datasets:[{label:"Tasks",data:[n.filter(x=>x.done).length||0,n.filter(x=>!x.done).length||0],backgroundColor:["#10b981","#0ea5e9"]}]},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#1e293b",font:{size:12}}}},scales:{x:{ticks:{color:"#64748b"},grid:{color:"rgba(148, 163, 184, 0.2)"}},y:{ticks:{color:"#64748b"},grid:{color:"rgba(148, 163, 184, 0.2)"}}}};return a?m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 flex items-center justify-center"},m.createElement("div",{className:"text-center"},m.createElement("div",{className:"text-4xl mb-4"},""),m.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Loading analytics..."))):m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 py-8"},m.createElement("div",{className:"max-w-6xl mx-auto px-4 md:p-6"},m.createElement("div",{className:"flex items-center justify-between mb-6"},m.createElement("div",null,m.createElement("h1",{className:"text-3xl md:text-4xl font-bold",style:{color:"var(--poker-text)"}},"Analytics"),m.createElement("p",{className:"text-sm mt-1",style:{color:"var(--poker-muted)"}},"Study minutes, completed tasks, and streaks at a glance."))),m.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},m.createElement("div",{className:"poker-card text-center p-6"},m.createElement("div",{className:"text-4xl mb-2"},""),m.createElement("p",{className:"text-3xl font-bold mb-2"},c.reduce((x,_)=>x+_,0)),m.createElement("p",{className:"text-sm opacity-70"},"Study minutes (7 days)")),m.createElement("div",{className:"poker-card text-center p-6"},m.createElement("div",{className:"text-4xl mb-2"},""),m.createElement("p",{className:"text-3xl font-bold mb-2"},n.filter(x=>x.done).length),m.createElement("p",{className:"text-sm opacity-70"},"Tasks completed")),m.createElement("div",{className:"poker-card text-center p-6"},m.createElement("div",{className:"text-4xl mb-2"},""),m.createElement("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--poker-accent)"}},t!=null&&t.streaks&&Object.keys(t.streaks).length>0?Math.max(...Object.values(t.streaks)):0),m.createElement("p",{className:"text-sm opacity-70"},"Longest habit streak"))),m.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-8"},m.createElement("div",{className:"poker-card p-6"},m.createElement("h3",{className:"text-xl font-bold mb-4",style:{color:"var(--poker-gold)"}},"Weekly Study Time"),m.createElement("div",{style:{height:"250px"}},m.createElement(JK,{data:d,options:y}))),m.createElement("div",{className:"poker-card p-6"},m.createElement("h3",{className:"text-xl font-bold mb-4",style:{color:"var(--poker-gold)"}},"Progress Snapshot"),m.createElement("div",{style:{height:"250px"}},m.createElement(eq,{data:f,options:y})))),m.createElement("div",{className:"poker-card p-6"},m.createElement("h3",{className:"text-xl font-bold mb-4",style:{color:"var(--poker-gold)"}},"Task Completion"),m.createElement("div",{style:{height:"200px"}},m.createElement(ZK,{data:p,options:y})))))}function nq(){const{progress:t,claimQuest:e,addPoints:n}=po(),i=(d=>d<100?{name:"Bronze",color:"text-amber-600",icon:""}:d<500?{name:"Silver",color:"text-gray-400",icon:""}:d<1e3?{name:"Gold",color:"text-yellow-500",icon:""}:{name:"Platinum",color:"text-accent-500",icon:""})((t==null?void 0:t.points)||0),s=(t==null?void 0:t.badges)||[],o=(t==null?void 0:t.claimedQuests)||[],a=[{id:"starter",name:"Starter",points:50,icon:"",owned:s.some(d=>d.id==="starter")},{id:"focus-master",name:"Focus Master",points:100,icon:"",owned:s.some(d=>d.id==="focus-master")},{id:"streak-king",name:"Streak King",points:200,icon:"",owned:s.some(d=>d.id==="streak-king")}],l=[{id:"tasks-3",name:"Complete 3 tasks today",reward:20},{id:"pomodoro-4",name:"Run 4 Pomodoros",reward:30},{id:"streak-3",name:"Any habit streak  3",reward:50}].map(d=>({...d,completed:o.includes(d.id)})),c=async d=>{const f=(t==null?void 0:t.points)||0;if(f>=d.points&&!d.owned)try{await n(-d.points,`Redeemed ${d.name}`),ke.success(`${d.name} unlocked! `,{icon:""})}catch(p){console.error("Redeem failed:",p),ke.error("Failed to redeem badge")}else ke.warning(d.owned?"Already owned":`Not enough points! Need ${d.points}, have ${f}`)},u=async d=>{if(d.completed){ke.info("Quest already claimed!");return}try{await e(d.id,d.reward),ke.success(`Quest completed! +${d.reward} points `,{icon:""})}catch(f){console.error("Claim quest failed:",f),ke.error("Failed to claim reward")}};return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 py-8"},m.createElement("div",{className:"max-w-6xl mx-auto px-4 md:px-6"},m.createElement(B.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5}},m.createElement("h1",{className:"section-header"},"Achievements"),m.createElement("p",{className:"section-subtitle"},"Optional rewards on top of your normal work. Claim, don't grind.")),m.createElement(B.div,{className:"card-gradient p-6 mb-6 text-center",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0}},m.createElement("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-50"},"Your Rank"),m.createElement("div",{className:"text-5xl mb-2"},i.icon),m.createElement("p",{className:`text-2xl font-bold ${i.color}`},i.name),m.createElement("p",{className:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Points:"," ",m.createElement("span",{className:"font-semibold text-gray-900 dark:text-gray-50"},(t==null?void 0:t.points)||0))),m.createElement(B.div,{className:"card p-6 mb-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2}},m.createElement("div",{className:"flex items-center gap-2 mb-4"},m.createElement(P_,{className:"w-6 h-6 text-accent-500"}),m.createElement("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-50"},"Badge Shop")),m.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},a.map((d,f)=>m.createElement(B.div,{key:d.id,className:"card-asymmetric text-center p-4",whileHover:{scale:1.05,rotate:1},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3+f*.1}},m.createElement("div",{className:"text-4xl mb-2"},d.icon),m.createElement("h4",{className:"font-bold mb-2 text-gray-900 dark:text-gray-50"},d.name),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Cost: ",d.points," pts"),m.createElement("button",{onClick:()=>c(d),className:`btn-primary w-full text-sm ${d.owned?"opacity-50 cursor-not-allowed":""}`,disabled:d.owned},d.owned?" Owned":"Redeem"))))),m.createElement(B.div,{className:"card p-6",initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4}},m.createElement("div",{className:"flex items-center gap-2 mb-4"},m.createElement(Gj,{className:"w-6 h-6 text-primary-500"}),m.createElement("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-50"},"Daily Quests")),m.createElement("div",{className:"space-y-3"},l.map((d,f)=>m.createElement(B.div,{key:d.id,className:"card flex justify-between items-center p-4",whileHover:{scale:1.02,x:5},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+f*.1}},m.createElement("span",{className:"text-gray-900 dark:text-gray-50 font-medium"},d.name),m.createElement("div",{className:"flex items-center gap-2"},m.createElement("span",{className:"text-xs text-gray-600 dark:text-gray-400"},"+",d.reward," pts"),m.createElement("button",{onClick:()=>u(d),className:`btn-accent text-sm px-3 py-1 ${d.completed?"opacity-50 cursor-not-allowed":""}`,disabled:d.completed},d.completed?" Claimed":"Claim"))))))))}function rq(){const{user:t}=ms(),{data:e=[],loading:n,addItem:r,updateItem:i}=Mn("groups"),[s,o]=C.useState(""),[a,l]=C.useState({}),[c,u]=C.useState(""),d=async()=>{if(s.trim()!=="")try{const v=Math.random().toString(36).slice(2,8).toUpperCase();await r({name:s.trim(),code:v,members:[(t==null?void 0:t.email)||"user"],messages:[]}),o("")}catch(v){console.error("Add group failed:",v),alert("Failed to create group")}},f=async v=>{var _,w;const x=(_=a[v])==null?void 0:_.trim();if(x)try{const I=[...e.find(R=>R.id===v).messages||[],{user:((w=t==null?void 0:t.email)==null?void 0:w.split("@")[0])||"You",text:x,timestamp:new Date().toISOString()}];await i(v,{messages:I}),l({...a,[v]:""})}catch(T){console.error("Send message failed:",T),alert("Failed to send message")}},p=async v=>{try{const _=e.find(w=>w.id===v).members||[];_.includes(t==null?void 0:t.email)||await i(v,{members:[..._,(t==null?void 0:t.email)||"user"]})}catch(x){console.error("Join group failed:",x),alert("Failed to join group")}},y=async()=>{const v=c.trim().toUpperCase();if(v)try{const x=Kh(Kn,"groups"),_=oA(x,aA("code","==",v)),w=await h9(_);if(w.empty){alert("No group found with that code");return}const T=w.docs[0],R=T.data().members||[];R.includes(t==null?void 0:t.email)||await i(T.id,{members:[...R,(t==null?void 0:t.email)||"user"]}),u(""),alert("Joined group!")}catch(x){console.error("Join by code failed:",x),alert("Failed to join by code")}};return n?m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 flex items-center justify-center"},m.createElement("div",{className:"text-center text-gray-600 dark:text-gray-400"},"Loading groups...")):m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900 py-8"},m.createElement("div",{className:"max-w-6xl mx-auto px-4 md:p-6"},m.createElement("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4"},m.createElement("div",null,m.createElement("h1",{className:"section-header"},"Study Groups"),m.createElement("p",{className:"section-subtitle"},"Share progress with friends using join codes."))),m.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},m.createElement("div",{className:"card p-4 space-y-3"},m.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-400"},"Create a group"),m.createElement("div",{className:"flex gap-2"},m.createElement("input",{type:"text",className:"input flex-1",placeholder:"New study group name...",value:s,onChange:v=>o(v.target.value),onKeyDown:v=>v.key==="Enter"&&d()}),m.createElement("button",{onClick:d,className:"btn-primary px-4 whitespace-nowrap"},m.createElement(tR,{className:"w-4 h-4 inline mr-1"}),"Create"))),m.createElement("div",{className:"card p-4 space-y-3"},m.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-400"},"Join with code"),m.createElement("div",{className:"flex gap-2"},m.createElement("input",{type:"text",className:"input flex-1",placeholder:"Enter join code...",value:c,onChange:v=>u(v.target.value),onKeyDown:v=>v.key==="Enter"&&y()}),m.createElement("button",{onClick:y,className:"btn-secondary px-4 whitespace-nowrap"},"Join")))),m.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-8"},e.map(v=>{var w,T,I;const x=(w=v.members)==null?void 0:w.includes(t==null?void 0:t.email),_=v.messages||[];return m.createElement("div",{key:v.id,className:"card p-6"},m.createElement("div",{className:"flex justify-between items-start mb-4"},m.createElement("div",null,m.createElement("h3",{className:"text-xl font-bold mb-1 text-gray-900 dark:text-gray-50"},v.name),m.createElement("p",{className:"text-xs mb-1 text-gray-600 dark:text-gray-400"},"Join code:"," ",m.createElement("span",{className:"font-mono text-primary-500"},v.code||"")),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},((T=v.members)==null?void 0:T.length)||0," member",((I=v.members)==null?void 0:I.length)!==1?"s":"")),!x&&m.createElement("button",{onClick:()=>p(v.id),className:"btn-secondary text-xs px-3 py-1"},"Join")),m.createElement("div",{className:"h-32 overflow-y-auto input p-3 rounded-lg mb-3 bg-gray-50 dark:bg-gray-800"},_.length>0?_.slice(-5).map((R,O)=>m.createElement("div",{key:O,className:"text-sm mb-2 text-gray-900 dark:text-gray-50"},m.createElement("span",{className:"font-bold text-primary-500"},R.user,":")," ",m.createElement("span",null,R.text),R.timestamp&&m.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2"},new Date(R.timestamp).toLocaleTimeString()))):m.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"No messages yet")),x&&m.createElement("div",{className:"flex gap-2"},m.createElement("input",{type:"text",className:"input flex-1 text-sm",placeholder:"Type a message...",value:a[v.id]||"",onChange:R=>l({...a,[v.id]:R.target.value}),onKeyDown:R=>R.key==="Enter"&&f(v.id)}),m.createElement("button",{onClick:()=>f(v.id),className:"btn-primary text-sm px-3"},"Send")))})),e.length===0&&m.createElement("p",{className:"text-center mt-8 text-lg text-gray-600 dark:text-gray-400"},"No groups yetcreate one above or join with a code.")))}const pk=["You're crushing it! ","Keep up the amazing work! ","You're on fire today! ","Every step counts! ","You're unstoppable! ","Progress, not perfection! "];function iq(){var j,V,W,G,te;const{user:t}=ms(),{progress:e}=po(),{data:n}=Mn("tasks"),{data:r}=Mn("habits"),{data:i}=Mn("sessions"),s=Na(),[o,a]=C.useState((t==null?void 0:t.displayName)||""),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[f]=C.useState(pk[Math.floor(Math.random()*pk.length)]),p=(n==null?void 0:n.filter(H=>H.done).length)||0,y=(n==null?void 0:n.length)||0,v=(r==null?void 0:r.filter(H=>!H.archived).length)||0,x=((j=e==null?void 0:e.badges)==null?void 0:j.length)||0,_=e!=null&&e.streaks&&Object.keys(e.streaks).length>0?Math.max(...Object.values(e.streaks)):0,w=(i==null?void 0:i.reduce((H,se)=>H+(se.durationMinutes||0),0))||0,T=Math.floor(w/60),I=w%60,R=(e==null?void 0:e.points)||0,k=(H=>Math.floor(H/100)+1)(R),b=R%100,S=100-b,P=b/100*100,N=["Beginner","Rising Star","Focused","Dedicated","Consistent","Disciplined","Master","Elite","Legendary","Unstoppable"],D=N[Math.min(k-1,N.length-1)]||"Champion",M=async()=>{try{await xI(na),s("/")}catch(H){console.error("Sign out error:",H)}},ie=async()=>{try{t&&o.trim()&&(await FL(t,{displayName:o.trim()}),c(!1),d(!0),setTimeout(()=>d(!1),3e3))}catch(H){console.error("Update profile error:",H)}},ee=[...(i==null?void 0:i.slice(0,3).map(H=>({type:"session",icon:af,text:`Completed ${H.durationMinutes||0} min focus session`,time:H.completedAt||H.createdAt,color:"text-primary-500"})))||[],...(n==null?void 0:n.filter(H=>H.done&&H.completedAt).slice(0,2).map(H=>({type:"task",icon:zy,text:`Completed task: ${H.title}`,time:H.completedAt,color:"text-accent-500"})))||[]].sort((H,se)=>new Date(se.time)-new Date(H.time)).slice(0,5),ce=[{id:"starter",name:"Starter",icon:"",unlocked:R>=50},{id:"focus-master",name:"Focus Master",icon:"",unlocked:w>=500},{id:"streak-king",name:"Streak King",icon:"",unlocked:_>=7},{id:"task-completer",name:"Task Completer",icon:"",unlocked:p>=50},{id:"habit-hero",name:"Habit Hero",icon:"",unlocked:v>=5},{id:"level-up",name:"Level Up",icon:"",unlocked:k>=5}];return m.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white dark:from-space-dark dark:via-space-dark dark:to-space-dark py-8 particle-bg"},u&&m.createElement(iR,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.3}),m.createElement("div",{className:"max-w-6xl mx-auto px-4 md:p-6 space-y-8"},m.createElement(B.div,{className:"card-premium p-8 md:p-10 relative overflow-hidden",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6}},m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-br from-primary-500/10 via-purple-500/10 to-accent-500/10",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:10,repeat:1/0,repeatType:"reverse"}}),m.createElement("div",{className:"relative z-10 flex flex-col md:flex-row items-center md:items-start gap-6"},m.createElement(B.div,{className:"relative",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300}},m.createElement("div",{className:"relative w-32 h-32 md:w-40 md:h-40"},m.createElement(B.div,{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary-500 via-purple-600 to-accent-500 p-1 animate-pulse-glow",animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"}},m.createElement("div",{className:"w-full h-full rounded-full bg-space-dark flex items-center justify-center text-4xl md:text-5xl font-bold text-white"},((V=t==null?void 0:t.displayName)==null?void 0:V.charAt(0).toUpperCase())||((W=t==null?void 0:t.email)==null?void 0:W.charAt(0).toUpperCase())||"?")),m.createElement(B.div,{className:"absolute -bottom-2 -right-2 bg-gradient-to-br from-accent-400 to-emerald-500 rounded-full p-2 shadow-lg",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0}},m.createElement(Nj,{className:"w-5 h-5 text-white"})))),m.createElement("div",{className:"flex-1 text-center md:text-left"},l?m.createElement(B.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1}},m.createElement("input",{type:"text",value:o,onChange:H=>a(H.target.value),className:"input-premium w-full md:w-auto",placeholder:"Display Name",autoFocus:!0}),m.createElement("div",{className:"flex gap-2 justify-center md:justify-start"},m.createElement(B.button,{onClick:ie,className:"btn-primary flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(Cj,{className:"w-4 h-4"}),"Save"),m.createElement(B.button,{onClick:()=>{c(!1),a((t==null?void 0:t.displayName)||"")},className:"btn-secondary flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(Bj,{className:"w-4 h-4"}),"Cancel"))):m.createElement(m.Fragment,null,m.createElement(B.h1,{className:"text-3xl md:text-4xl font-bold mb-2 gradient-text font-heading",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2}},(t==null?void 0:t.displayName)||"Student"),m.createElement(B.p,{className:"text-gray-600 dark:text-gray-400 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}},t==null?void 0:t.email),m.createElement(B.div,{className:"flex flex-wrap items-center gap-4 justify-center md:justify-start",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4}},m.createElement("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-primary-500/10 to-purple-500/10 border border-primary-500/20"},m.createElement(Hy,{className:"w-5 h-5 text-primary-500"}),m.createElement("span",{className:"font-bold text-primary-500"},R),m.createElement("span",{className:"text-sm text-gray-600 dark:text-gray-400"},"Points")),m.createElement("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-accent-500/10 to-emerald-500/10 border border-accent-500/20"},m.createElement($y,{className:"w-5 h-5 text-accent-500"}),m.createElement("span",{className:"font-bold text-accent-500"},_),m.createElement("span",{className:"text-sm text-gray-600 dark:text-gray-400"},"Day Streak")),m.createElement(B.button,{onClick:()=>c(!0),className:"btn-secondary flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95}},m.createElement(xj,{className:"w-4 h-4"}),"Edit Profile")),m.createElement(B.p,{className:"mt-4 text-lg font-semibold gradient-text-accent animate-pulse",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5}},f))))),m.createElement(B.div,{className:"card-premium p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2}},m.createElement("div",{className:"flex items-center justify-between mb-4"},m.createElement("div",null,m.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Level ",k,"  ",D),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},S," points until Level ",k+1)),m.createElement("div",{className:"text-right"},m.createElement("div",{className:"text-3xl font-bold gradient-text font-heading"},k),m.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-400"},"Level"))),m.createElement("div",{className:"w-full bg-gray-200 dark:bg-gray-800 rounded-full h-3 overflow-hidden"},m.createElement(B.div,{className:"h-full bg-gradient-to-r from-primary-500 via-purple-600 to-accent-500 rounded-full relative overflow-hidden",initial:{width:0},animate:{width:`${P}%`},transition:{duration:1,ease:"easeOut"}},m.createElement(B.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})))),m.createElement(B.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}},[{icon:af,label:"Focus Time",value:`${T}h ${I}m`,color:"from-primary-500 to-indigo-600",bgColor:"from-primary-500/10 to-indigo-600/10"},{icon:zy,label:"Tasks",value:`${p}/${y}`,color:"from-accent-400 to-emerald-500",bgColor:"from-accent-500/10 to-emerald-500/10"},{icon:$y,label:"Habits",value:v,color:"from-orange-500 to-red-500",bgColor:"from-orange-500/10 to-red-500/10"},{icon:Hy,label:"Achievements",value:x,color:"from-yellow-500 to-orange-500",bgColor:"from-yellow-500/10 to-orange-500/10"}].map((H,se)=>{const de=H.icon;return m.createElement(B.div,{key:H.label,className:`card-glow p-6 text-center bg-gradient-to-br ${H.bgColor} border-0`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+se*.1},whileHover:{scale:1.05,y:-5}},m.createElement(B.div,{className:`inline-flex p-3 rounded-xl bg-gradient-to-br ${H.color} mb-3`,whileHover:{rotate:360},transition:{duration:.5}},m.createElement(de,{className:"w-6 h-6 text-white"})),m.createElement("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading mb-1"},H.value),m.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold"},H.label))})),m.createElement(B.div,{className:"card-premium p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5}},m.createElement("div",{className:"flex items-center gap-2 mb-6"},m.createElement(aj,{className:"w-6 h-6 text-primary-500"}),m.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Achievements")),m.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4"},ce.map((H,se)=>m.createElement(B.div,{key:H.id,className:`p-4 rounded-xl border-2 text-center transition-all ${H.unlocked?"border-accent-500/50 bg-gradient-to-br from-accent-500/10 to-emerald-500/10":"border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 opacity-50"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6+se*.1},whileHover:{scale:H.unlocked?1.1:1,rotate:H.unlocked?[0,-5,5,-5,0]:0}},m.createElement("div",{className:"text-4xl mb-2"},H.icon),m.createElement("p",{className:`font-semibold ${H.unlocked?"text-gray-900 dark:text-gray-50":"text-gray-500 dark:text-gray-500"}`},H.name),H.unlocked&&m.createElement(B.div,{className:"mt-2 text-xs text-accent-500 font-bold",initial:{opacity:0},animate:{opacity:1}}," Unlocked"))))),m.createElement(B.div,{className:"card-premium p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7}},m.createElement("div",{className:"flex items-center gap-2 mb-6"},m.createElement(Lj,{className:"w-6 h-6 text-primary-500"}),m.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Recent Activity")),m.createElement("div",{className:"space-y-3"},ee.length>0?ee.map((H,se)=>{const de=H.icon;return m.createElement(B.div,{key:se,className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+se*.1},whileHover:{x:5}},m.createElement("div",{className:`p-2 rounded-lg bg-gradient-to-br ${H.color} bg-opacity-10`},m.createElement(de,{className:`w-5 h-5 ${H.color}`})),m.createElement("div",{className:"flex-1"},m.createElement("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50"},H.text),m.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400"},new Date(H.time).toLocaleString())))}):m.createElement("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8"},"No recent activity yet. Start completing tasks and sessions to see your progress!"))),m.createElement(B.div,{className:"card-premium p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9}},m.createElement("div",{className:"flex items-center gap-2 mb-6"},m.createElement(Pj,{className:"w-6 h-6 text-primary-500"}),m.createElement("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 font-heading"},"Account Settings")),m.createElement("div",{className:"space-y-4"},m.createElement("div",{className:"flex justify-between items-center p-4 rounded-xl bg-gray-50 dark:bg-gray-900"},m.createElement("div",null,m.createElement("p",{className:"font-semibold text-gray-900 dark:text-gray-50"},"User ID"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono"},(G=t==null?void 0:t.uid)==null?void 0:G.substring(0,20),"..."))),m.createElement("div",{className:"flex justify-between items-center p-4 rounded-xl bg-gray-50 dark:bg-gray-900"},m.createElement("div",null,m.createElement("p",{className:"font-semibold text-gray-900 dark:text-gray-50"},"Email Verified"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},t!=null&&t.emailVerified?" Verified":" Not verified"))),m.createElement("div",{className:"flex justify-between items-center p-4 rounded-xl bg-gray-50 dark:bg-gray-900"},m.createElement("div",null,m.createElement("p",{className:"font-semibold text-gray-900 dark:text-gray-50"},"Member Since"),m.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},(te=t==null?void 0:t.metadata)!=null&&te.creationTime?new Date(t.metadata.creationTime).toLocaleDateString():"N/A"))),m.createElement("div",{className:"flex gap-3 pt-4"},m.createElement(B.button,{onClick:()=>s("/dashboard"),className:"btn-primary flex-1",whileHover:{scale:1.05},whileTap:{scale:.95}},"Go to Dashboard"),m.createElement(B.button,{onClick:()=>s("/analytics"),className:"btn-secondary flex-1",whileHover:{scale:1.05},whileTap:{scale:.95}},"View Analytics"),m.createElement(B.button,{onClick:M,className:"btn-accent",whileHover:{scale:1.05},whileTap:{scale:.95}},"Sign Out"))))))}function sq(){return m.createElement(g9,null,m.createElement(LD,null,m.createElement("div",{className:"min-h-screen flex flex-col bg-white dark:bg-space-dark"},m.createElement(Uj,null),m.createElement(jj,null),m.createElement("main",{className:"flex-1"},m.createElement(PD,null,m.createElement(kt,{path:"/auth",element:m.createElement(pz,null)}),m.createElement(kt,{path:"/",element:m.createElement(jn,null,m.createElement(Jb,null))}),m.createElement(kt,{path:"/dashboard",element:m.createElement(jn,null,m.createElement(Jb,null))}),m.createElement(kt,{path:"/tasks",element:m.createElement(jn,null,m.createElement(yz,null))}),m.createElement(kt,{path:"/notes",element:m.createElement(jn,null,m.createElement(_z,null))}),m.createElement(kt,{path:"/timer",element:m.createElement(jn,null,m.createElement(Az,null))}),m.createElement(kt,{path:"/habits",element:m.createElement(jn,null,m.createElement(Pz,null))}),m.createElement(kt,{path:"/calendar",element:m.createElement(jn,null,m.createElement(Nz,null))}),m.createElement(kt,{path:"/analytics",element:m.createElement(jn,null,m.createElement(tq,null))}),m.createElement(kt,{path:"/gamification",element:m.createElement(jn,null,m.createElement(nq,null))}),m.createElement(kt,{path:"/study-groups",element:m.createElement(jn,null,m.createElement(rq,null))}),m.createElement(kt,{path:"/profile",element:m.createElement(jn,null,m.createElement(iq,null))}),m.createElement(kt,{path:"/features",element:m.createElement("div",{className:"min-h-[60vh] flex items-center justify-center px-4"},m.createElement("div",{className:"max-w-3xl w-full card p-8 space-y-4"},m.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-50"},"Features"),m.createElement("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400"},"ProdHub combines tasks, notes, calendar, focus timers, habits, analytics and light gamification into one calm student workspace.")))}),m.createElement(kt,{path:"/screenshots",element:m.createElement("div",{className:"min-h-[60vh] flex items-center justify-center px-4"},m.createElement("div",{className:"max-w-3xl w-full card p-8 space-y-4 text-center"},m.createElement("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-gray-900 dark:text-gray-50"},"Screenshots"),m.createElement("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400"},"Explore each section of the app to experience the live, animated UI instead of static screenshots.")))}),m.createElement(kt,{path:"/user-flow",element:m.createElement("div",{className:"min-h-[60vh] flex items-center justify-center px-4"},m.createElement("div",{className:"max-w-3xl w-full card p-8 space-y-4"},m.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-50"},"User Flow"),m.createElement("ol",{className:"list-decimal list-inside space-y-2 text-sm md:text-base text-gray-600 dark:text-gray-400"},m.createElement("li",null,"Create an account or sign in."),m.createElement("li",null,"Land on the dashboard overview to see today's focus and progress."),m.createElement("li",null,"Add tasks, notes, habits, and calendar events as you plan your week."),m.createElement("li",null,"Run Pomodoro sessions with the focus timer to earn points and streaks."),m.createElement("li",null,"Review your analytics and achievements to keep motivation high."))))}),m.createElement(kt,{path:"*",element:m.createElement(D2,{to:"/",replace:!0})}))),m.createElement(XD,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}))))}Gp.createRoot(document.getElementById("root")).render(m.createElement(m.StrictMode,null,m.createElement(sq,null)));
